{
  "getAllPSDEACModes" : [ {
    "codeName" : "Default",
    "logicName" : "DEFAULT",
    "name" : "DEFAULT",
    "getPSDEACModeDataItems" : [ {
      "dataType" : 25,
      "name" : "value",
      "getPSDEField" : {
        "name" : "ID",
        "codeName" : "id"
      }
    }, {
      "dataType" : 25,
      "name" : "text",
      "getPSDEField" : {
        "name" : "NAME",
        "codeName" : "name"
      }
    } ],
    "pagingSize" : 50,
    "defaultMode" : true,
    "enablePagingBar" : false,
    "id" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACMODES/Default.json"
  } ],
  "getAllPSDEActions" : [ {
    "actionMode" : "CREATE",
    "actionType" : "BUILTIN",
    "getAfterPSDEActionLogics" : [ {
      "actionLogicType" : 1,
      "attachMode" : "AFTER",
      "codeName" : "Usr0717677809",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/activeRule.json"
      },
      "internalLogic" : true
    }, {
      "actionLogicType" : 1,
      "attachMode" : "AFTER",
      "codeName" : "A7037e45d9df25823bf",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/generateOther.json"
      },
      "internalLogic" : true
    }, {
      "actionLogicType" : 1,
      "attachMode" : "AFTER",
      "codeName" : "A8ce743bd53afa0b0e1",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/generateHoliday.json"
      },
      "internalLogic" : true
    }, {
      "actionLogicType" : 1,
      "attachMode" : "AFTER",
      "codeName" : "A3c4dd1de0b96d85bda",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/generateResource.json"
      },
      "internalLogic" : true
    } ],
    "getBeforePSDEActionLogics" : [ {
      "actionLogicType" : 1,
      "attachMode" : "BEFORE",
      "codeName" : "A858e9d1e88bfec2111",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/cleanWorkdays.json"
      },
      "internalLogic" : true
    }, {
      "actionLogicType" : 1,
      "attachMode" : "BEFORE",
      "codeName" : "A6e4603eb9db4cd74e7",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/judgingEffect.json"
      },
      "internalLogic" : true
    } ],
    "codeName" : "Create",
    "dataAccessAction" : "CREATE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/Create.json",
    "logicName" : "Create",
    "name" : "Create",
    "orderValue" : 1,
    "getPSDEActionInput" : {
      "name" : "CreateInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO",
      "output" : true
    },
    "getPSDEActionReturn" : {
      "name" : "CreateResult",
      "type" : "VOID"
    },
    "builtinAction" : true
  }, {
    "actionHolder" : 2,
    "actionMode" : "CREATE",
    "actionType" : "BUILTIN",
    "codeName" : "CreateTemp",
    "dataAccessAction" : "CREATE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/CreateTemp.json",
    "logicName" : "CreateTemp",
    "name" : "CreateTemp",
    "orderValue" : 2,
    "getPSDEActionInput" : {
      "name" : "CreateTempInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO",
      "output" : true
    },
    "getPSDEActionReturn" : {
      "name" : "CreateTempResult",
      "type" : "VOID"
    },
    "tempDataMode" : 2,
    "builtinAction" : true,
    "enableBackend" : false,
    "enableTempData" : true
  }, {
    "actionHolder" : 2,
    "actionMode" : "CREATE",
    "actionType" : "BUILTIN",
    "codeName" : "CreateTempMajor",
    "dataAccessAction" : "CREATE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/CreateTempMajor.json",
    "logicName" : "CreateTempMajor",
    "name" : "CreateTempMajor",
    "orderValue" : 3,
    "getPSDEActionInput" : {
      "name" : "CreateTempMajorInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO",
      "output" : true
    },
    "getPSDEActionReturn" : {
      "name" : "CreateTempMajorResult",
      "type" : "VOID"
    },
    "tempDataMode" : 1,
    "builtinAction" : true,
    "enableBackend" : false,
    "enableTempData" : true
  }, {
    "actionMode" : "UPDATE",
    "actionType" : "BUILTIN",
    "getAfterPSDEActionLogics" : [ {
      "actionLogicType" : 1,
      "attachMode" : "AFTER",
      "codeName" : "Aba4c4017612b274a61",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/activeRule.json"
      },
      "internalLogic" : true
    }, {
      "actionLogicType" : 1,
      "attachMode" : "AFTER",
      "codeName" : "A0539e3482bba73b858",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/generateOther.json"
      },
      "internalLogic" : true
    }, {
      "actionLogicType" : 1,
      "attachMode" : "AFTER",
      "codeName" : "Ae2303270bd85ac4e08",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/generateHoliday.json"
      },
      "internalLogic" : true
    }, {
      "actionLogicType" : 1,
      "attachMode" : "AFTER",
      "codeName" : "A45dbf8e49244eccf88",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/generateResource.json"
      },
      "internalLogic" : true
    } ],
    "getBeforePSDEActionLogics" : [ {
      "actionLogicType" : 1,
      "attachMode" : "BEFORE",
      "codeName" : "Aef9878cf33562a9bb8",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/cleanWorkdays.json"
      },
      "internalLogic" : true
    }, {
      "actionLogicType" : 1,
      "attachMode" : "BEFORE",
      "codeName" : "Ac9f5877bc331fe6a57",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/judgingEffect.json"
      },
      "internalLogic" : true
    } ],
    "codeName" : "Update",
    "dataAccessAction" : "UPDATE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/Update.json",
    "logicName" : "Update",
    "name" : "Update",
    "orderValue" : 11,
    "getPSDEActionInput" : {
      "name" : "UpdateInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO",
      "output" : true
    },
    "getPSDEActionReturn" : {
      "name" : "UpdateResult",
      "type" : "VOID"
    },
    "builtinAction" : true
  }, {
    "actionHolder" : 2,
    "actionMode" : "UPDATE",
    "actionType" : "BUILTIN",
    "codeName" : "UpdateTemp",
    "dataAccessAction" : "UPDATE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/UpdateTemp.json",
    "logicName" : "UpdateTemp",
    "name" : "UpdateTemp",
    "orderValue" : 12,
    "getPSDEActionInput" : {
      "name" : "UpdateTempInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO",
      "output" : true
    },
    "getPSDEActionReturn" : {
      "name" : "UpdateTempResult",
      "type" : "VOID"
    },
    "tempDataMode" : 2,
    "builtinAction" : true,
    "enableBackend" : false,
    "enableTempData" : true
  }, {
    "actionHolder" : 2,
    "actionMode" : "UPDATE",
    "actionType" : "BUILTIN",
    "codeName" : "UpdateTempMajor",
    "dataAccessAction" : "UPDATE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/UpdateTempMajor.json",
    "logicName" : "UpdateTempMajor",
    "name" : "UpdateTempMajor",
    "orderValue" : 13,
    "getPSDEActionInput" : {
      "name" : "UpdateTempMajorInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO",
      "output" : true
    },
    "getPSDEActionReturn" : {
      "name" : "UpdateTempMajorResult",
      "type" : "VOID"
    },
    "tempDataMode" : 1,
    "builtinAction" : true,
    "enableBackend" : false,
    "enableTempData" : true
  }, {
    "actionMode" : "DELETE",
    "actionType" : "BUILTIN",
    "getAfterPSDEActionLogics" : [ {
      "actionLogicType" : 1,
      "attachMode" : "AFTER",
      "codeName" : "Adb633580640434fac9",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/deleteOtherInfo.json"
      },
      "internalLogic" : true
    }, {
      "actionLogicType" : 1,
      "attachMode" : "AFTER",
      "codeName" : "Ad6155154ce6a5695fd",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/removeOdooData.json"
      },
      "internalLogic" : true
    } ],
    "batchActionMode" : 1,
    "codeName" : "Remove",
    "dataAccessAction" : "DELETE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/Remove.json",
    "logicName" : "Remove",
    "name" : "Remove",
    "orderValue" : 21,
    "getPSDEActionInput" : {
      "getKeyPSDEField" : {
        "name" : "ID",
        "codeName" : "id"
      },
      "name" : "RemoveInput",
      "type" : "KEYFIELDS"
    },
    "getPSDEActionReturn" : {
      "name" : "RemoveResult",
      "type" : "VOID"
    },
    "batchAction" : true,
    "builtinAction" : true
  }, {
    "actionHolder" : 2,
    "actionMode" : "DELETE",
    "actionType" : "BUILTIN",
    "batchActionMode" : 1,
    "codeName" : "RemoveTemp",
    "dataAccessAction" : "DELETE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/RemoveTemp.json",
    "logicName" : "RemoveTemp",
    "name" : "RemoveTemp",
    "orderValue" : 22,
    "getPSDEActionInput" : {
      "getKeyPSDEField" : {
        "name" : "ID",
        "codeName" : "id"
      },
      "name" : "RemoveTempInput",
      "type" : "KEYFIELDS"
    },
    "getPSDEActionReturn" : {
      "name" : "RemoveTempResult",
      "type" : "VOID"
    },
    "tempDataMode" : 2,
    "batchAction" : true,
    "builtinAction" : true,
    "enableBackend" : false,
    "enableTempData" : true
  }, {
    "actionHolder" : 2,
    "actionMode" : "DELETE",
    "actionType" : "BUILTIN",
    "batchActionMode" : 1,
    "codeName" : "RemoveTempMajor",
    "dataAccessAction" : "DELETE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/RemoveTempMajor.json",
    "logicName" : "RemoveTempMajor",
    "name" : "RemoveTempMajor",
    "orderValue" : 23,
    "getPSDEActionInput" : {
      "getKeyPSDEField" : {
        "name" : "ID",
        "codeName" : "id"
      },
      "name" : "RemoveTempMajorInput",
      "type" : "KEYFIELDS"
    },
    "getPSDEActionReturn" : {
      "name" : "RemoveTempMajorResult",
      "type" : "VOID"
    },
    "tempDataMode" : 1,
    "batchAction" : true,
    "builtinAction" : true,
    "enableBackend" : false,
    "enableTempData" : true
  }, {
    "actionMode" : "READ",
    "actionType" : "BUILTIN",
    "getAfterPSDEActionLogics" : [ {
      "actionLogicType" : 1,
      "attachMode" : "AFTER",
      "codeName" : "Af22a2360fdbdec5a87",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/fillWorkDays.json"
      },
      "internalLogic" : true
    }, {
      "actionLogicType" : 1,
      "attachMode" : "AFTER",
      "codeName" : "A134db3cd702ecf99d6",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/calcOther.json"
      },
      "internalLogic" : true
    } ],
    "codeName" : "Get",
    "dataAccessAction" : "READ",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/Get.json",
    "logicName" : "Get",
    "name" : "Get",
    "orderValue" : 31,
    "getPSDEActionInput" : {
      "getKeyPSDEField" : {
        "name" : "ID",
        "codeName" : "id"
      },
      "name" : "GetInput",
      "type" : "KEYFIELD"
    },
    "getPSDEActionReturn" : {
      "name" : "GetResult",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "builtinAction" : true
  }, {
    "actionHolder" : 2,
    "actionMode" : "READ",
    "actionType" : "BUILTIN",
    "codeName" : "GetTemp",
    "dataAccessAction" : "READ",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/GetTemp.json",
    "logicName" : "GetTemp",
    "name" : "GetTemp",
    "orderValue" : 32,
    "getPSDEActionInput" : {
      "getKeyPSDEField" : {
        "name" : "ID",
        "codeName" : "id"
      },
      "name" : "GetTempInput",
      "type" : "KEYFIELD"
    },
    "getPSDEActionReturn" : {
      "name" : "GetTempResult",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "tempDataMode" : 2,
    "builtinAction" : true,
    "enableBackend" : false,
    "enableTempData" : true
  }, {
    "actionHolder" : 2,
    "actionMode" : "READ",
    "actionType" : "BUILTIN",
    "codeName" : "GetTempMajor",
    "dataAccessAction" : "READ",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/GetTempMajor.json",
    "logicName" : "GetTempMajor",
    "name" : "GetTempMajor",
    "orderValue" : 33,
    "getPSDEActionInput" : {
      "getKeyPSDEField" : {
        "name" : "ID",
        "codeName" : "id"
      },
      "name" : "GetTempMajorInput",
      "type" : "KEYFIELD"
    },
    "getPSDEActionReturn" : {
      "name" : "GetTempMajorResult",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "tempDataMode" : 1,
    "builtinAction" : true,
    "enableBackend" : false,
    "enableTempData" : true
  }, {
    "actionMode" : "GETDRAFT",
    "actionType" : "BUILTIN",
    "getAfterPSDEActionLogics" : [ {
      "actionLogicType" : 1,
      "attachMode" : "AFTER",
      "codeName" : "A21e1f0fa03d9ebd5a4",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/fillShift.json"
      },
      "internalLogic" : true
    }, {
      "actionLogicType" : 1,
      "attachMode" : "AFTER",
      "codeName" : "A23f3769bc1b7bb9b1f",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/fillWorkDays.json"
      },
      "internalLogic" : true
    }, {
      "actionLogicType" : 1,
      "attachMode" : "AFTER",
      "codeName" : "A5b7cb516909beeb6db",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/fillGroupShift.json"
      },
      "internalLogic" : true
    }, {
      "actionLogicType" : 1,
      "attachMode" : "AFTER",
      "codeName" : "Ada9a8c8ca747e2304c",
      "name" : "附加逻辑",
      "getPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/calcOther.json"
      },
      "internalLogic" : true
    } ],
    "codeName" : "GetDraft",
    "dataAccessAction" : "CREATE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/GetDraft.json",
    "logicName" : "GetDraft",
    "name" : "GetDraft",
    "orderValue" : 41,
    "getPSDEActionInput" : {
      "name" : "GetDraftInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "getPSDEActionReturn" : {
      "name" : "GetDraftResult",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "builtinAction" : true
  }, {
    "actionHolder" : 2,
    "actionMode" : "GETDRAFT",
    "actionType" : "BUILTIN",
    "codeName" : "GetDraftTemp",
    "dataAccessAction" : "CREATE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/GetDraftTemp.json",
    "logicName" : "GetDraftTemp",
    "name" : "GetDraftTemp",
    "orderValue" : 43,
    "getPSDEActionInput" : {
      "name" : "GetDraftTempInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "getPSDEActionReturn" : {
      "name" : "GetDraftTempResult",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "tempDataMode" : 2,
    "builtinAction" : true,
    "enableBackend" : false,
    "enableTempData" : true
  }, {
    "actionHolder" : 2,
    "actionMode" : "GETDRAFT",
    "actionType" : "BUILTIN",
    "codeName" : "GetDraftTempMajor",
    "dataAccessAction" : "CREATE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/GetDraftTempMajor.json",
    "logicName" : "GetDraftTempMajor",
    "name" : "GetDraftTempMajor",
    "orderValue" : 45,
    "getPSDEActionInput" : {
      "name" : "GetDraftTempMajorInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "getPSDEActionReturn" : {
      "name" : "GetDraftTempMajorResult",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "tempDataMode" : 1,
    "builtinAction" : true,
    "enableBackend" : false,
    "enableTempData" : true
  }, {
    "actionMode" : "CHECKKEY",
    "actionType" : "BUILTIN",
    "codeName" : "CheckKey",
    "dataAccessAction" : "CREATE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/CheckKey.json",
    "logicName" : "CheckKey",
    "name" : "CheckKey",
    "getPSDEActionInput" : {
      "name" : "CheckKeyInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "getPSDEActionReturn" : {
      "name" : "CheckKeyResult",
      "stdDataType" : 9,
      "type" : "SIMPLE"
    },
    "builtinAction" : true
  }, {
    "actionMode" : "SAVE",
    "actionType" : "BUILTIN",
    "codeName" : "Save",
    "dataAccessAction" : "CREATE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/Save.json",
    "logicName" : "Save",
    "name" : "Save",
    "getPSDEActionInput" : {
      "name" : "SaveInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO",
      "output" : true
    },
    "getPSDEActionReturn" : {
      "name" : "SaveResult",
      "type" : "VOID"
    },
    "builtinAction" : true
  }, {
    "actionHolder" : 1,
    "actionMode" : "CUSTOM",
    "actionType" : "DELOGIC",
    "codeName" : "changeGroups",
    "dataAccessAction" : "READ",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/changeGroups.json",
    "logicName" : "更新组排班",
    "name" : "changeGroups",
    "getPSDEActionInput" : {
      "name" : "ChangeGroupsInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "getPSDEActionReturn" : {
      "name" : "ChangeGroupsResult",
      "type" : "VOID"
    },
    "getPSDELogic" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/updateGroups.json"
    },
    "enableFront" : false
  }, {
    "actionHolder" : 1,
    "actionMode" : "CUSTOM",
    "actionType" : "DELOGIC",
    "codeName" : "executeCompletion",
    "dataAccessAction" : "CREATE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/executeCompletion.json",
    "logicName" : "定时执行补全排班",
    "name" : "executeCompletion",
    "getPSDEActionInput" : {
      "name" : "ExecuteCompletionInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "getPSDEActionReturn" : {
      "name" : "ExecuteCompletionResult",
      "type" : "VOID"
    },
    "getPSDELogic" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/executeCompletion3.json"
    },
    "enableFront" : false
  }, {
    "actionHolder" : 1,
    "actionMode" : "CUSTOM",
    "actionType" : "DELOGIC",
    "codeName" : "executionActivate",
    "dataAccessAction" : "CREATE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/executionActivate.json",
    "logicName" : "定时执行激活规则",
    "name" : "executionActivate",
    "getPSDEActionInput" : {
      "name" : "ExecutionActivateInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "getPSDEActionReturn" : {
      "name" : "ExecutionActivateResult",
      "type" : "VOID"
    },
    "getPSDELogic" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/executeActivate.json"
    },
    "enableFront" : false
  }, {
    "actionHolder" : 1,
    "actionMode" : "CUSTOM",
    "actionType" : "DELOGIC",
    "codeName" : "fillDefaultShift",
    "dataAccessAction" : "CREATE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/fillDefaultShift.json",
    "logicName" : "填充默认班次",
    "name" : "fillDefaultShift",
    "getPSDEActionInput" : {
      "name" : "FillDefaultShiftInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "getPSDEActionReturn" : {
      "name" : "FillDefaultShiftResult",
      "type" : "VOID"
    },
    "getPSDELogic" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/fillShift.json"
    },
    "enableFront" : false
  }, {
    "actionHolder" : 1,
    "actionMode" : "CUSTOM",
    "actionType" : "DELOGIC",
    "codeName" : "fillGroupShift",
    "dataAccessAction" : "CREATE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/fillGroupShift.json",
    "logicName" : "填充组排班",
    "name" : "fillGroupShift",
    "getPSDEActionInput" : {
      "name" : "FillGroupShiftInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "getPSDEActionReturn" : {
      "name" : "FillGroupShiftResult",
      "type" : "VOID"
    },
    "getPSDELogic" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/fillGroupShift.json"
    },
    "enableFront" : false
  }, {
    "actionHolder" : 1,
    "actionMode" : "CUSTOM",
    "actionType" : "DELOGIC",
    "codeName" : "fillWorkDays",
    "dataAccessAction" : "CREATE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/fillWorkDays.json",
    "logicName" : "填充工作日",
    "name" : "fillWorkDays",
    "getPSDEActionInput" : {
      "name" : "FillWorkDaysInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "getPSDEActionReturn" : {
      "name" : "FillWorkDaysResult",
      "type" : "VOID"
    },
    "getPSDELogic" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/fillWorkDays.json"
    },
    "enableFront" : false
  }, {
    "actionHolder" : 1,
    "actionMode" : "CUSTOM",
    "actionType" : "USERCUSTOM",
    "codeName" : "judgingMember",
    "dataAccessAction" : "READ",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/judgingMember.json",
    "logicName" : "判断人员是否已存在其他规则",
    "name" : "judgingMember",
    "getPSDEActionInput" : {
      "name" : "JudgingMemberInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "getPSDEActionReturn" : {
      "name" : "JudgingMemberResult",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "getPSSysSFPlugin" : {
      "modelref" : true,
      "path" : "PSSYSSFPLUGINS/JudgingDEActionRuntime.json"
    },
    "enableFront" : false
  }, {
    "actionHolder" : 2,
    "actionMode" : "CUSTOM",
    "actionType" : "DELOGIC",
    "codeName" : "nothing",
    "dataAccessAction" : "CREATE",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/nothing.json",
    "logicName" : "nothing",
    "name" : "nothing",
    "getPSDEActionInput" : {
      "name" : "NothingInput",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTO"
    },
    "getPSDEActionReturn" : {
      "name" : "NothingResult",
      "type" : "VOID"
    },
    "getPSDELogic" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/nothing.json"
    },
    "enableBackend" : false
  } ],
  "getAllPSDEDBConfigs" : [ {
    "dBType" : "MYSQL5",
    "name" : "MYSQL5",
    "objNameCase" : "DEFAULT",
    "standardTableName" : "`ATTENDANCE_RULE`",
    "tableName" : "ATTENDANCE_RULE",
    "viewName" : "V_ATTENDANCE_RULE",
    "valid" : true
  } ],
  "getAllPSDEDBTables" : [ {
    "getAllPSDEFields" : [ {
      "name" : "REQUIREMENT",
      "codeName" : "requirement"
    }, {
      "name" : "AUTO_MATCH",
      "codeName" : "auto_match"
    }, {
      "name" : "BIWEEKLY_CYCLE",
      "codeName" : "biweekly_cycle"
    }, {
      "name" : "INVERSION_CYCLE",
      "codeName" : "inversion_cycle"
    }, {
      "name" : "INVERSION_DAYS",
      "codeName" : "inversion_days"
    }, {
      "name" : "EFFECT_TIME",
      "codeName" : "effect_time"
    }, {
      "name" : "WORK",
      "codeName" : "work"
    }, {
      "name" : "REST",
      "codeName" : "rest"
    }, {
      "name" : "SAME_RESTDAY",
      "codeName" : "same_restday"
    }, {
      "name" : "INVERSION_COUNT",
      "codeName" : "inversion_count"
    }, {
      "name" : "IS_ACTIVATE",
      "codeName" : "is_activate"
    }, {
      "name" : "HOLIDAY",
      "codeName" : "holiday"
    }, {
      "name" : "FREE_RATIO",
      "codeName" : "free_ratio"
    }, {
      "name" : "FREE_MIN_MINUTES",
      "codeName" : "free_min_minutes"
    }, {
      "name" : "DEFAULT_FLAG",
      "codeName" : "default_flag"
    }, {
      "name" : "NAME",
      "codeName" : "name"
    }, {
      "name" : "ID",
      "codeName" : "id"
    }, {
      "name" : "SCHEDULE_TYPE",
      "codeName" : "schedule_type"
    }, {
      "name" : "CREATE_UID",
      "codeName" : "create_uid"
    }, {
      "name" : "CREATE_DATE",
      "codeName" : "create_date"
    }, {
      "name" : "WRITE_UID",
      "codeName" : "write_uid"
    }, {
      "name" : "WRITE_DATE",
      "codeName" : "write_date"
    }, {
      "name" : "CHECKIN_METHOD",
      "codeName" : "checkin_method"
    }, {
      "name" : "ELASTIC_MINUTES",
      "codeName" : "elastic_minutes"
    }, {
      "name" : "ELASTIC_VALID",
      "codeName" : "elastic_valid"
    } ],
    "codeName" : "Table",
    "name" : "ATTENDANCE_RULE",
    "getPSSysDBTable" : {
      "modelref" : true,
      "id" : "ATTENDANCE_RULE"
    },
    "tableType" : "MAIN"
  } ],
  "getAllPSDEDRItems" : [ {
    "modelref" : true,
    "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDRITEMS/A429dd7d439bd21e833.json"
  }, {
    "modelref" : true,
    "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDRITEMS/A8e637ddde447408bc7.json"
  }, {
    "modelref" : true,
    "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDRITEMS/Aa80108e6209fd8d378.json"
  }, {
    "modelref" : true,
    "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDRITEMS/Afb1c7d20d172dfcdcc.json"
  }, {
    "modelref" : true,
    "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDRITEMS/Auto20896800.json"
  }, {
    "modelref" : true,
    "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDRITEMS/Auto31399195.json"
  }, {
    "modelref" : true,
    "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDRITEMS/Auto43972430.json"
  }, {
    "modelref" : true,
    "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDRITEMS/Auto56142004.json"
  }, {
    "modelref" : true,
    "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDRITEMS/Auto5879687.json"
  }, {
    "modelref" : true,
    "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDRITEMS/Auto64095410.json"
  }, {
    "modelref" : true,
    "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDRITEMS/Auto66806033.json"
  }, {
    "modelref" : true,
    "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDRITEMS/Auto75839119.json"
  }, {
    "modelref" : true,
    "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDRITEMS/DRItem.json"
  }, {
    "modelref" : true,
    "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDRITEMS/DRItem2.json"
  }, {
    "modelref" : true,
    "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDRITEMS/DRItem3.json"
  } ],
  "getAllPSDEDataQueries" : [ {
    "getAllPSDEDataQueryCodes" : [ {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDATAQUERIES/Default/PSDEDQCODES/MYSQL5.json"
    } ],
    "codeName" : "Default",
    "logicName" : "DEFAULT",
    "name" : "DEFAULT",
    "getPSDEDQMain" : {
      "getJoinPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "joinType" : "MAIN",
      "name" : "ATTENDANCE_RULE"
    },
    "getPSDEDataQueryInput" : {
      "name" : "DefaultInput",
      "getPSDEFilterDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_filter_dto"
      },
      "type" : "DTO"
    },
    "getPSDEDataQueryReturn" : {
      "name" : "DefaultResult",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTOS"
    },
    "defaultMode" : true
  }, {
    "getAllPSDEDataQueryCodes" : [ {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDATAQUERIES/View/PSDEDQCODES/MYSQL5.json"
    } ],
    "codeName" : "View",
    "logicName" : "默认（全部数据）",
    "name" : "VIEW",
    "getPSDEDQMain" : {
      "getJoinPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "joinType" : "MAIN",
      "name" : "WORK_ITEM"
    },
    "getPSDEDataQueryInput" : {
      "name" : "ViewInput",
      "getPSDEFilterDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_filter_dto"
      },
      "type" : "DTO"
    },
    "getPSDEDataQueryReturn" : {
      "name" : "ViewResult",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTOS"
    },
    "viewLevel" : 0
  }, {
    "getAllPSDEDataQueryCodes" : [ {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDATAQUERIES/needActivate/PSDEDQCODES/MYSQL5.json"
    } ],
    "codeName" : "needActivate",
    "logicName" : "需激活的规则",
    "name" : "needActivate",
    "getPSDEDQMain" : {
      "getJoinPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "joinType" : "MAIN",
      "name" : "ATTENDANCE_RULE",
      "getPSDEDQGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "连接条件",
        "getPSDEDQConditions" : [ {
          "condOp" : "EQ",
          "condType" : "SINGLE",
          "condValue" : "0",
          "fieldName" : "IS_ACTIVATE",
          "name" : "(IS_ACTIVATE) 等于(=) 0",
          "getPSDEField" : {
            "name" : "IS_ACTIVATE",
            "codeName" : "is_activate"
          }
        }, {
          "condType" : "CUSTOM",
          "condition" : "EFFECT_TIME <= CURDATE()",
          "name" : "生效时间小于等于当前时间"
        } ]
      }
    },
    "getPSDEDataQueryInput" : {
      "name" : "NeedActivateInput",
      "getPSDEFilterDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_filter_dto"
      },
      "type" : "DTO"
    },
    "getPSDEDataQueryReturn" : {
      "name" : "NeedActivateResult",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "DTOS"
    },
    "viewLevel" : 0
  } ],
  "getAllPSDEDataRelations" : [ {
    "modelref" : true,
    "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEDATARELATIONS/Default.json"
  } ],
  "getAllPSDEDataSets" : [ {
    "codeName" : "ALL",
    "logicName" : "全部数据",
    "majorSortDir" : "DESC",
    "getMajorSortPSDEField" : {
      "name" : "DEFAULT_FLAG",
      "codeName" : "default_flag"
    },
    "name" : "ALL",
    "getPSDEDataQueries" : [ {
      "modelref" : true,
      "id" : "View"
    } ],
    "getPSDEDataSetInput" : {
      "name" : "ALLInput",
      "getPSDEFilterDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_filter_dto"
      },
      "type" : "DTO"
    },
    "getPSDEDataSetReturn" : {
      "name" : "ALLResult",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "PAGE"
    },
    "viewLevel" : 0,
    "enableBackend" : true,
    "enableFront" : true,
    "enableTempData" : true
  }, {
    "actionHolder" : 1,
    "codeName" : "Calendar",
    "dataSetType" : "DELOGIC",
    "logicName" : "日历排班",
    "name" : "Calendar",
    "getPSDEDataSetInput" : {
      "name" : "CalendarInput",
      "getPSDEFilterDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_filter_dto"
      },
      "type" : "DTO"
    },
    "getPSDEDataSetReturn" : {
      "name" : "CalendarResult",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "PAGE"
    },
    "getPSDELogic" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/attendance_scheduleCalendar.json"
    },
    "predefinedType" : "DELOGIC",
    "enableBackend" : true,
    "enableFront" : false,
    "enableTempData" : true
  }, {
    "codeName" : "Default",
    "logicName" : "DEFAULT",
    "majorSortDir" : "DESC",
    "getMajorSortPSDEField" : {
      "name" : "CREATE_DATE",
      "codeName" : "create_date"
    },
    "name" : "DEFAULT",
    "getPSDEDataQueries" : [ {
      "modelref" : true,
      "id" : "Default"
    } ],
    "getPSDEDataSetInput" : {
      "name" : "DefaultInput",
      "getPSDEFilterDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_filter_dto"
      },
      "type" : "DTO"
    },
    "getPSDEDataSetReturn" : {
      "name" : "DefaultResult",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "PAGE"
    },
    "defaultMode" : true,
    "enableBackend" : true,
    "enableFront" : true,
    "enableTempData" : true
  }, {
    "actionHolder" : 1,
    "codeName" : "complete",
    "dataSetType" : "DELOGIC",
    "logicName" : "完整数据（含人数）",
    "name" : "complete",
    "getPSDEDataSetInput" : {
      "name" : "CompleteInput",
      "getPSDEFilterDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_filter_dto"
      },
      "type" : "DTO"
    },
    "getPSDEDataSetReturn" : {
      "name" : "CompleteResult",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "PAGE"
    },
    "getPSDELogic" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/all.json"
    },
    "predefinedType" : "DELOGIC",
    "enableBackend" : true,
    "enableFront" : false,
    "enableTempData" : true
  }, {
    "codeName" : "needActivate",
    "logicName" : "全部数据",
    "name" : "needActivate",
    "getPSDEDataQueries" : [ {
      "modelref" : true,
      "id" : "needActivate"
    } ],
    "getPSDEDataSetInput" : {
      "name" : "NeedActivateInput",
      "getPSDEFilterDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_filter_dto"
      },
      "type" : "DTO"
    },
    "getPSDEDataSetReturn" : {
      "name" : "NeedActivateResult",
      "getPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_rule_dto"
      },
      "type" : "PAGE"
    },
    "viewLevel" : 0,
    "enableBackend" : true,
    "enableFront" : true,
    "enableTempData" : true
  } ],
  "getAllPSDEFields" : [ {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "REQUIREMENT",
      "dBType" : "MYSQL5",
      "name" : "REQUIREMENT",
      "queryCodeExp" : "t1.`REQUIREMENT`",
      "standardColumnName" : "`REQUIREMENT`"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[REQUIREMENT][每日打卡要求]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBDROPDOWNLIST",
        "name" : "[REQUIREMENT][每日打卡要求]移动端默认",
        "stringLength" : 100,
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true,
        "needCodeListConfig" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[REQUIREMENT][每日打卡要求]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "DROPDOWNLIST",
        "name" : "[REQUIREMENT][每日打卡要求]",
        "stringLength" : 100,
        "uIMode" : "DEFAULT",
        "needCodeListConfig" : true
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "REQUIREMENT",
          "maxValue" : 100,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[100]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[100]"
      },
      "ruleInfo" : "内容长度必须小于等于[100]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "requirement",
    "dEFType" : 1,
    "dataType" : "SSCODELIST",
    "importOrder" : 1000,
    "length" : 100,
    "logicName" : "每日打卡要求",
    "name" : "REQUIREMENT",
    "orderValue" : 190,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSCODELISTS/attendance_policy.json"
    },
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "REQUIREMENT"
    },
    "serviceCodeName" : "requirement",
    "stdDataType" : 25,
    "stringLength" : 100,
    "valueFormat" : "%1$s"
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "AUTO_MATCH",
      "dBType" : "MYSQL5",
      "name" : "AUTO_MATCH",
      "queryCodeExp" : "t1.`AUTO_MATCH`",
      "standardColumnName" : "`AUTO_MATCH`",
      "valueAutoGen" : true
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[AUTO_MATCH][智能匹配]",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.AUTO_MATCH"
        },
        "codeName" : "Default",
        "editorType" : "DROPDOWNLIST_100",
        "name" : "[AUTO_MATCH][智能匹配]",
        "uIMode" : "DEFAULT",
        "needCodeListConfig" : true
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[AUTO_MATCH][智能匹配]移动端默认",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.AUTO_MATCH"
        },
        "codeName" : "MobileDefault",
        "editorType" : "MOBSWITCH",
        "name" : "[AUTO_MATCH][智能匹配]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true,
        "needCodeListConfig" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "auto_match",
    "dEFType" : 1,
    "dataType" : "YESNO",
    "defaultValue" : "0",
    "importOrder" : 1000,
    "getLNPSLanguageRes" : {
      "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.AUTO_MATCH"
    },
    "logicName" : "智能匹配",
    "name" : "AUTO_MATCH",
    "orderValue" : 200,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSCODELISTS/YesNo.json"
    },
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "AUTO_MATCH"
    },
    "serviceCodeName" : "auto_match",
    "stdDataType" : 9,
    "valueFormat" : "%1$s"
  }, {
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[WORKDAY][工作日]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "CHECKBOXLIST",
        "name" : "[WORKDAY][工作日]",
        "stringLength" : 100,
        "uIMode" : "DEFAULT",
        "needCodeListConfig" : true
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[WORKDAY][工作日]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBCHECKLIST",
        "name" : "[WORKDAY][工作日]移动端默认",
        "stringLength" : 100,
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true,
        "needCodeListConfig" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "WORKDAY",
          "maxValue" : 100,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[100]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[100]"
      },
      "ruleInfo" : "内容长度必须小于等于[100]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "workday",
    "dEFType" : 5,
    "dataType" : "SMCODELIST",
    "defaultValue" : "1,2,3,4,5",
    "importOrder" : 1000,
    "length" : 100,
    "logicName" : "工作日(常规)",
    "name" : "WORKDAY",
    "orderValue" : 210,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSCODELISTS/Week1.json"
    },
    "serviceCodeName" : "workday",
    "stdDataType" : 25,
    "stringLength" : 100,
    "valueFormat" : "%1$s",
    "viewLevel" : 0,
    "phisicalDEField" : false,
    "uIAssistDEField" : true
  }, {
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[SMALL_WORKDAY][工作日(小周)]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "CHECKBOXLIST",
        "name" : "[SMALL_WORKDAY][工作日(小周)]",
        "stringLength" : 100,
        "uIMode" : "DEFAULT",
        "needCodeListConfig" : true
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[SMALL_WORKDAY][工作日(小周)]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBCHECKLIST",
        "name" : "[SMALL_WORKDAY][工作日(小周)]移动端默认",
        "stringLength" : 100,
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true,
        "needCodeListConfig" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "WEEK2",
          "maxValue" : 100,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[100]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[100]"
      },
      "ruleInfo" : "内容长度必须小于等于[100]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "week2",
    "dEFType" : 5,
    "dataType" : "SMCODELIST",
    "importOrder" : 1000,
    "length" : 100,
    "logicName" : "工作日(周期2)",
    "name" : "WEEK2",
    "orderValue" : 210,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSCODELISTS/Week2.json"
    },
    "serviceCodeName" : "week2",
    "stdDataType" : 25,
    "stringLength" : 100,
    "valueFormat" : "%1$s",
    "viewLevel" : 0,
    "phisicalDEField" : false,
    "uIAssistDEField" : true
  }, {
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[BIG_WORKDAY][工作日(大周)]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "CHECKBOXLIST",
        "name" : "[BIG_WORKDAY][工作日(大周)]",
        "stringLength" : 100,
        "uIMode" : "DEFAULT",
        "needCodeListConfig" : true
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[BIG_WORKDAY][工作日(大周)]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBCHECKLIST",
        "name" : "[BIG_WORKDAY][工作日(大周)]移动端默认",
        "stringLength" : 100,
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true,
        "needCodeListConfig" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "WEEK1",
          "maxValue" : 100,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[100]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[100]"
      },
      "ruleInfo" : "内容长度必须小于等于[100]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "week1",
    "dEFType" : 5,
    "dataType" : "SMCODELIST",
    "importOrder" : 1000,
    "length" : 100,
    "logicName" : "工作日(周期1)",
    "name" : "WEEK1",
    "orderValue" : 210,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSCODELISTS/Week1.json"
    },
    "serviceCodeName" : "week1",
    "stdDataType" : 25,
    "stringLength" : 100,
    "valueFormat" : "%1$s",
    "viewLevel" : 0,
    "phisicalDEField" : false,
    "uIAssistDEField" : true
  }, {
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[WEEK3][工作日(周期3)]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBCHECKLIST",
        "name" : "[WEEK3][工作日(周期3)]移动端默认",
        "stringLength" : 100,
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true,
        "needCodeListConfig" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[WEEK3][工作日(周期3)]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "CHECKBOXLIST",
        "name" : "[WEEK3][工作日(周期3)]",
        "stringLength" : 100,
        "uIMode" : "DEFAULT",
        "needCodeListConfig" : true
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "WEEK3",
          "maxValue" : 100,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[100]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[100]"
      },
      "ruleInfo" : "内容长度必须小于等于[100]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "week3",
    "dEFType" : 5,
    "dataType" : "SMCODELIST",
    "importOrder" : 1000,
    "length" : 100,
    "logicName" : "工作日(周期3)",
    "name" : "WEEK3",
    "orderValue" : 210,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSCODELISTS/Week3.json"
    },
    "serviceCodeName" : "week3",
    "stdDataType" : 25,
    "stringLength" : 100,
    "valueFormat" : "%1$s",
    "viewLevel" : 0,
    "phisicalDEField" : false,
    "uIAssistDEField" : true
  }, {
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[WEEK4][工作日(周期4)]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "CHECKBOXLIST",
        "name" : "[WEEK4][工作日(周期4)]",
        "stringLength" : 100,
        "uIMode" : "DEFAULT",
        "needCodeListConfig" : true
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[WEEK4][工作日(周期4)]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBCHECKLIST",
        "name" : "[WEEK4][工作日(周期4)]移动端默认",
        "stringLength" : 100,
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true,
        "needCodeListConfig" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "WEEK4",
          "maxValue" : 100,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[100]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[100]"
      },
      "ruleInfo" : "内容长度必须小于等于[100]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "week4",
    "dEFType" : 5,
    "dataType" : "SMCODELIST",
    "importOrder" : 1000,
    "length" : 100,
    "logicName" : "工作日(周期4)",
    "name" : "WEEK4",
    "orderValue" : 210,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSCODELISTS/Week4.json"
    },
    "serviceCodeName" : "week4",
    "stdDataType" : 25,
    "stringLength" : 100,
    "valueFormat" : "%1$s",
    "viewLevel" : 0,
    "phisicalDEField" : false,
    "uIAssistDEField" : true
  }, {
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[WORK_TIME][上下班时间]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBTEXT",
        "name" : "[WORK_TIME][上下班时间]移动端默认",
        "stringLength" : 100,
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[WORK_TIME][上下班时间]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "TEXTBOX",
        "name" : "[WORK_TIME][上下班时间]",
        "stringLength" : 100,
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "WORK_TIME",
          "maxValue" : 100,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[100]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[100]"
      },
      "ruleInfo" : "内容长度必须小于等于[100]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "work_time",
    "dEFType" : 5,
    "dataType" : "TEXT",
    "importOrder" : 1000,
    "length" : 100,
    "logicName" : "上下班时间",
    "name" : "WORK_TIME",
    "orderValue" : 220,
    "serviceCodeName" : "work_time",
    "stdDataType" : 25,
    "stringLength" : 100,
    "valueFormat" : "%1$s",
    "viewLevel" : 0,
    "phisicalDEField" : false,
    "uIAssistDEField" : true
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "BIWEEKLY_CYCLE",
      "dBType" : "MYSQL5",
      "name" : "BIWEEKLY_CYCLE",
      "queryCodeExp" : "t1.`BIWEEKLY_CYCLE`",
      "standardColumnName" : "`BIWEEKLY_CYCLE`"
    } ],
    "getAllPSDEFSearchModes" : [ {
      "codeName" : "N_CYCLE_EQ",
      "name" : "N_CYCLE_EQ",
      "stdDataType" : 25,
      "valueOP" : "EQ"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[CYCLE][循环周期设置]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBDROPDOWNLIST",
        "name" : "[CYCLE][循环周期设置]移动端默认",
        "stringLength" : 60,
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true,
        "needCodeListConfig" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[CYCLE][循环周期设置]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "DROPDOWNLIST",
        "name" : "[CYCLE][循环周期设置]",
        "stringLength" : 60,
        "uIMode" : "DEFAULT",
        "needCodeListConfig" : true
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "BIWEEKLY_CYCLE",
          "maxValue" : 60,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[60]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[60]"
      },
      "ruleInfo" : "内容长度必须小于等于[60]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "biweekly_cycle",
    "dEFType" : 1,
    "dataType" : "SSCODELIST",
    "importOrder" : 1000,
    "length" : 60,
    "logicName" : "循环周期设置（大小周）",
    "name" : "BIWEEKLY_CYCLE",
    "orderValue" : 230,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSCODELISTS/cycle.json"
    },
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "BIWEEKLY_CYCLE"
    },
    "serviceCodeName" : "biweekly_cycle",
    "stdDataType" : 25,
    "stringLength" : 60,
    "valueFormat" : "%1$s"
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "INVERSION_CYCLE",
      "dBType" : "MYSQL5",
      "name" : "INVERSION_CYCLE",
      "queryCodeExp" : "t1.`INVERSION_CYCLE`",
      "standardColumnName" : "`INVERSION_CYCLE`"
    } ],
    "getAllPSDEFSearchModes" : [ {
      "codeName" : "N_INVERSION_CYCLE_EQ",
      "name" : "N_INVERSION_CYCLE_EQ",
      "stdDataType" : 9,
      "valueOP" : "EQ"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[INVERSION_CYCLE][N班倒循环周期设置]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBTEXT",
        "name" : "[INVERSION_CYCLE][N班倒循环周期设置]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[INVERSION_CYCLE][N班倒循环周期设置]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "TEXTBOX",
        "name" : "[INVERSION_CYCLE][N班倒循环周期设置]",
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "inversion_cycle",
    "dEFType" : 1,
    "dataType" : "INT",
    "importOrder" : 1000,
    "length" : 60,
    "logicName" : "循环周期设置（N班倒）",
    "name" : "INVERSION_CYCLE",
    "orderValue" : 230,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSCODELISTS/CycleWeeks.json"
    },
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "INVERSION_CYCLE"
    },
    "serviceCodeName" : "inversion_cycle",
    "stdDataType" : 9,
    "valueFormat" : "%1$s"
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "INVERSION_DAYS",
      "dBType" : "MYSQL5",
      "name" : "INVERSION_DAYS",
      "queryCodeExp" : "t1.`INVERSION_DAYS`",
      "standardColumnName" : "`INVERSION_DAYS`"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[INVERSION_DAYS][循环天数设置（N班倒）]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "TEXTBOX",
        "name" : "[INVERSION_DAYS][循环天数设置（N班倒）]",
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[INVERSION_DAYS][循环天数设置（N班倒）]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBTEXT",
        "name" : "[INVERSION_DAYS][循环天数设置（N班倒）]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "inversion_days",
    "dEFType" : 1,
    "dataType" : "INT",
    "importOrder" : 1000,
    "length" : 60,
    "logicName" : "循环天数设置（N班倒）",
    "name" : "INVERSION_DAYS",
    "orderValue" : 230,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSCODELISTS/CycleDays.json"
    },
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "INVERSION_DAYS"
    },
    "serviceCodeName" : "inversion_days",
    "stdDataType" : 9,
    "valueFormat" : "%1$s"
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "EFFECT_TIME",
      "dBType" : "MYSQL5",
      "name" : "EFFECT_TIME",
      "queryCodeExp" : "t1.`EFFECT_TIME`",
      "standardColumnName" : "`EFFECT_TIME`"
    } ],
    "getAllPSDEFSearchModes" : [ {
      "codeName" : "N_EFFECT_TIME_LTANDEQ",
      "name" : "N_EFFECT_TIME_LTANDEQ",
      "stdDataType" : 5,
      "valueOP" : "LTANDEQ"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[EFFECT_TIME][生效时间]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "DATEPICKER",
        "name" : "[EFFECT_TIME][生效时间]",
        "uIMode" : "DEFAULT",
        "valueFormat" : "%1$tY-%1$tm-%1$td %1$tH:%1$tM:%1$tS"
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[EFFECT_TIME][生效时间]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBDATE",
        "name" : "[EFFECT_TIME][生效时间]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "valueFormat" : "%1$tY-%1$tm-%1$td %1$tH:%1$tM:%1$tS",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "effect_time",
    "dEFType" : 1,
    "dataType" : "DATETIME",
    "importOrder" : 1000,
    "jsonFormat" : "yyyy-MM-dd HH:mm:ss",
    "logicName" : "生效时间",
    "name" : "EFFECT_TIME",
    "orderValue" : 250,
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "EFFECT_TIME"
    },
    "serviceCodeName" : "effect_time",
    "stdDataType" : 5,
    "valueFormat" : "%1$tY-%1$tm-%1$td %1$tH:%1$tM:%1$tS"
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "WORK",
      "dBType" : "MYSQL5",
      "name" : "WORK",
      "queryCodeExp" : "t1.`WORK`",
      "standardColumnName" : "`WORK`"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[WORK][工作天数（上A休B）]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "TEXTBOX",
        "name" : "[WORK][工作天数（上A休B）]",
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[WORK][工作天数（上A休B）]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBTEXT",
        "name" : "[WORK][工作天数（上A休B）]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "work",
    "dEFType" : 1,
    "dataType" : "INT",
    "importOrder" : 1000,
    "logicName" : "工作天数（上A休B）",
    "name" : "WORK",
    "orderValue" : 280,
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "WORK"
    },
    "serviceCodeName" : "work",
    "stdDataType" : 9,
    "valueFormat" : "%1$s"
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "REST",
      "dBType" : "MYSQL5",
      "name" : "REST",
      "queryCodeExp" : "t1.`REST`",
      "standardColumnName" : "`REST`"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[REST][休息天数（上A休B）]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "TEXTBOX",
        "name" : "[REST][休息天数（上A休B）]",
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[REST][休息天数（上A休B）]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBTEXT",
        "name" : "[REST][休息天数（上A休B）]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "rest",
    "dEFType" : 1,
    "dataType" : "INT",
    "importOrder" : 1000,
    "logicName" : "休息天数（上A休B）",
    "name" : "REST",
    "orderValue" : 290,
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "REST"
    },
    "serviceCodeName" : "rest",
    "stdDataType" : 9,
    "valueFormat" : "%1$s"
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "SAME_RESTDAY",
      "dBType" : "MYSQL5",
      "name" : "SAME_RESTDAY",
      "queryCodeExp" : "t1.`SAME_RESTDAY`",
      "standardColumnName" : "`SAME_RESTDAY`"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[SAME_RESTDAY][是否休息日相同]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBTEXT",
        "name" : "[SAME_RESTDAY][是否休息日相同]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[SAME_RESTDAY][是否休息日相同]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "TEXTBOX",
        "name" : "[SAME_RESTDAY][是否休息日相同]",
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "same_restday",
    "dEFType" : 1,
    "dataType" : "INT",
    "importOrder" : 1000,
    "length" : 100,
    "logicName" : "是否休息日相同",
    "name" : "SAME_RESTDAY",
    "orderValue" : 300,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSCODELISTS/same_restday.json"
    },
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "SAME_RESTDAY"
    },
    "serviceCodeName" : "same_restday",
    "stdDataType" : 9,
    "valueFormat" : "%1$s"
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "INVERSION_COUNT",
      "dBType" : "MYSQL5",
      "name" : "INVERSION_COUNT",
      "queryCodeExp" : "t1.`INVERSION_COUNT`",
      "standardColumnName" : "`INVERSION_COUNT`"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[INVERSION_COUNT][倒班数]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "TEXTBOX",
        "name" : "[INVERSION_COUNT][倒班数]",
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[INVERSION_COUNT][倒班数]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBTEXT",
        "name" : "[INVERSION_COUNT][倒班数]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "inversion_count",
    "dEFType" : 1,
    "dataType" : "INT",
    "importOrder" : 1000,
    "logicName" : "倒班数",
    "name" : "INVERSION_COUNT",
    "orderValue" : 310,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSCODELISTS/inversion_count.json"
    },
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "INVERSION_COUNT"
    },
    "serviceCodeName" : "inversion_count",
    "stdDataType" : 9,
    "valueFormat" : "%1$s"
  }, {
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[DEFAULT_SHIFT][默认班次标识]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBTEXT",
        "name" : "[DEFAULT_SHIFT][默认班次标识]移动端默认",
        "stringLength" : 100,
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[DEFAULT_SHIFT][默认班次标识]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "TEXTBOX",
        "name" : "[DEFAULT_SHIFT][默认班次标识]",
        "stringLength" : 100,
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "DEFAULT_SHIFT",
          "maxValue" : 100,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[100]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[100]"
      },
      "ruleInfo" : "内容长度必须小于等于[100]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "default_shift",
    "dEFType" : 5,
    "dataType" : "TEXT",
    "importOrder" : 1000,
    "length" : 100,
    "logicName" : "默认班次标识",
    "name" : "DEFAULT_SHIFT",
    "orderValue" : 320,
    "serviceCodeName" : "default_shift",
    "stdDataType" : 25,
    "stringLength" : 100,
    "valueFormat" : "%1$s",
    "viewLevel" : 0,
    "phisicalDEField" : false,
    "uIAssistDEField" : true
  }, {
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[JUDGE_RESULT][智能匹配判断结果]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBTEXT",
        "name" : "[JUDGE_RESULT][智能匹配判断结果]移动端默认",
        "stringLength" : 100,
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[JUDGE_RESULT][智能匹配判断结果]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "TEXTBOX",
        "name" : "[JUDGE_RESULT][智能匹配判断结果]",
        "stringLength" : 100,
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "JUDGE_RESULT",
          "maxValue" : 100,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[100]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[100]"
      },
      "ruleInfo" : "内容长度必须小于等于[100]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "judge_result",
    "dEFType" : 5,
    "dataType" : "TEXT",
    "importOrder" : 1000,
    "length" : 100,
    "logicName" : "智能匹配判断结果",
    "name" : "JUDGE_RESULT",
    "orderValue" : 330,
    "serviceCodeName" : "judge_result",
    "stdDataType" : 25,
    "stringLength" : 100,
    "valueFormat" : "%1$s",
    "viewLevel" : 0,
    "phisicalDEField" : false,
    "uIAssistDEField" : true
  }, {
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[TOTAL_MEMBERS][成员总数]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "TEXTBOX",
        "name" : "[TOTAL_MEMBERS][成员总数]",
        "stringLength" : 100,
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[TOTAL_MEMBERS][成员总数]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBTEXT",
        "name" : "[TOTAL_MEMBERS][成员总数]移动端默认",
        "stringLength" : 100,
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "TOTAL_MEMBERS",
          "maxValue" : 100,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[100]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[100]"
      },
      "ruleInfo" : "内容长度必须小于等于[100]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "total_members",
    "dEFType" : 5,
    "dataType" : "TEXT",
    "importOrder" : 1000,
    "length" : 100,
    "logicName" : "成员总数",
    "name" : "TOTAL_MEMBERS",
    "orderValue" : 340,
    "serviceCodeName" : "total_members",
    "stdDataType" : 25,
    "stringLength" : 100,
    "valueFormat" : "%1$s",
    "viewLevel" : 0,
    "phisicalDEField" : false,
    "uIAssistDEField" : true
  }, {
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[SHIFT_NUM][班次数量]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "TEXTBOX",
        "name" : "[SHIFT_NUM][班次数量]",
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[SHIFT_NUM][班次数量]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBTEXT",
        "name" : "[SHIFT_NUM][班次数量]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "shift_num",
    "dEFType" : 5,
    "dataType" : "INT",
    "importOrder" : 1000,
    "logicName" : "班次数量",
    "name" : "SHIFT_NUM",
    "orderValue" : 350,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSCODELISTS/ShiftNum.json"
    },
    "serviceCodeName" : "shift_num",
    "stdDataType" : 9,
    "valueFormat" : "%1$s",
    "viewLevel" : 0,
    "phisicalDEField" : false,
    "uIAssistDEField" : true
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "IS_ACTIVATE",
      "dBType" : "MYSQL5",
      "name" : "IS_ACTIVATE",
      "queryCodeExp" : "t1.`IS_ACTIVATE`",
      "standardColumnName" : "`IS_ACTIVATE`",
      "valueAutoGen" : true
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[IS_ACTIVATE][是否激活]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBSWITCH",
        "name" : "[IS_ACTIVATE][是否激活]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true,
        "needCodeListConfig" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[IS_ACTIVATE][是否激活]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "DROPDOWNLIST_100",
        "name" : "[IS_ACTIVATE][是否激活]",
        "uIMode" : "DEFAULT",
        "needCodeListConfig" : true
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "is_activate",
    "dEFType" : 1,
    "dataType" : "YESNO",
    "defaultValue" : "0",
    "importOrder" : 1000,
    "logicName" : "是否激活",
    "name" : "IS_ACTIVATE",
    "orderValue" : 360,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSCODELISTS/YesNo.json"
    },
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "IS_ACTIVATE"
    },
    "serviceCodeName" : "is_activate",
    "stdDataType" : 9,
    "valueFormat" : "%1$s"
  }, {
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[GROUP_NUM][组排班数]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "TEXTBOX",
        "name" : "[GROUP_NUM][组排班数]",
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[GROUP_NUM][组排班数]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBTEXT",
        "name" : "[GROUP_NUM][组排班数]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "group_num",
    "dEFType" : 5,
    "dataType" : "INT",
    "defaultValue" : "2",
    "importOrder" : 1000,
    "logicName" : "组排班数",
    "name" : "GROUP_NUM",
    "orderValue" : 390,
    "serviceCodeName" : "group_num",
    "stdDataType" : 9,
    "valueFormat" : "%1$s",
    "viewLevel" : 0,
    "phisicalDEField" : false,
    "uIAssistDEField" : true
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "HOLIDAY",
      "dBType" : "MYSQL5",
      "name" : "HOLIDAY",
      "queryCodeExp" : "t1.`HOLIDAY`",
      "standardColumnName" : "`HOLIDAY`"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[HOLIDAY][节假日配置]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "CHECKBOXLIST",
        "name" : "[HOLIDAY][节假日配置]",
        "stringLength" : 2000,
        "uIMode" : "DEFAULT",
        "needCodeListConfig" : true
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[HOLIDAY][节假日配置]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBCHECKLIST",
        "name" : "[HOLIDAY][节假日配置]移动端默认",
        "stringLength" : 2000,
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true,
        "needCodeListConfig" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "HOLIDAY",
          "maxValue" : 2000,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[2000]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[2000]"
      },
      "ruleInfo" : "内容长度必须小于等于[2000]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "holiday",
    "dEFType" : 1,
    "dataType" : "SMCODELIST",
    "importOrder" : 1000,
    "length" : 2000,
    "logicName" : "节假日配置",
    "name" : "HOLIDAY",
    "orderValue" : 410,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSMODULES/resource/PSCODELISTS/holiday_dyna.json"
    },
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "HOLIDAY"
    },
    "serviceCodeName" : "holiday",
    "stdDataType" : 25,
    "stringLength" : 2000,
    "valueFormat" : "%1$s"
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "FREE_RATIO",
      "dBType" : "MYSQL5",
      "name" : "FREE_RATIO",
      "queryCodeExp" : "t1.`FREE_RATIO`",
      "standardColumnName" : "`FREE_RATIO`"
    } ],
    "getAllPSDEFUIModes" : [ {
      "name" : "默认",
      "getPSDEFFormItem" : {
        "editorType" : "TEXTBOX",
        "name" : "默认",
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    }, {
      "name" : "移动端默认",
      "getPSDEFFormItem" : {
        "editorType" : "MOBTEXT",
        "name" : "移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "free_ratio",
    "dEFType" : 1,
    "dataType" : "INT",
    "importOrder" : 1000,
    "logicName" : "实际出勤次数",
    "name" : "FREE_RATIO",
    "orderValue" : 420,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSCODELISTS/checkin_frequency.json"
    },
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "FREE_RATIO"
    },
    "serviceCodeName" : "free_ratio",
    "stdDataType" : 9,
    "valueFormat" : "%1$s"
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "FREE_MIN_MINUTES",
      "dBType" : "MYSQL5",
      "name" : "FREE_MIN_MINUTES",
      "queryCodeExp" : "t1.`FREE_MIN_MINUTES`",
      "standardColumnName" : "`FREE_MIN_MINUTES`"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[FREE_MIN_MINUTES][实际最少出勤时长]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBTEXT",
        "name" : "[FREE_MIN_MINUTES][实际最少出勤时长]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[FREE_MIN_MINUTES][实际最少出勤时长]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "TEXTBOX",
        "name" : "[FREE_MIN_MINUTES][实际最少出勤时长]",
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "free_min_minutes",
    "dEFType" : 1,
    "dataType" : "INT",
    "importOrder" : 1000,
    "logicName" : "实际最少出勤时长",
    "name" : "FREE_MIN_MINUTES",
    "orderValue" : 430,
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "FREE_MIN_MINUTES"
    },
    "serviceCodeName" : "free_min_minutes",
    "stdDataType" : 9,
    "valueFormat" : "%1$s"
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "DEFAULT_FLAG",
      "dBType" : "MYSQL5",
      "name" : "DEFAULT_FLAG",
      "queryCodeExp" : "t1.`DEFAULT_FLAG`",
      "standardColumnName" : "`DEFAULT_FLAG`",
      "valueAutoGen" : true
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[DEFAULT_FLAG][默认免考勤]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBSWITCH",
        "name" : "[DEFAULT_FLAG][默认免考勤]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true,
        "needCodeListConfig" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[DEFAULT_FLAG][默认免考勤]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "DROPDOWNLIST_100",
        "name" : "[DEFAULT_FLAG][默认免考勤]",
        "uIMode" : "DEFAULT",
        "needCodeListConfig" : true
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "default_flag",
    "dEFType" : 1,
    "dataType" : "YESNO",
    "defaultValue" : "0",
    "importOrder" : 1000,
    "logicName" : "默认免考勤",
    "name" : "DEFAULT_FLAG",
    "orderValue" : 440,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSCODELISTS/YesNo.json"
    },
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "DEFAULT_FLAG"
    },
    "serviceCodeName" : "default_flag",
    "stdDataType" : 9,
    "valueFormat" : "%1$s"
  }, {
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[WORK_TIMES][工作时段]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "HIDDEN",
        "name" : "[WORK_TIMES][工作时段]移动端默认",
        "stringLength" : 1048576,
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[WORK_TIMES][工作时段]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "HIDDEN",
        "name" : "[WORK_TIMES][工作时段]",
        "stringLength" : 1048576,
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "WORK_TIMES",
          "maxValue" : 1048576,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[1048576]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[1048576]"
      },
      "ruleInfo" : "内容长度必须小于等于[1048576]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "work_times",
    "dEFType" : 5,
    "dataType" : "ONE2MANYOBJ",
    "importOrder" : 1000,
    "length" : 1048576,
    "logicName" : "工作时段",
    "name" : "WORK_TIMES",
    "orderValue" : 450,
    "serviceCodeName" : "work_times",
    "stdDataType" : 21,
    "stringLength" : 1048576,
    "valueFormat" : "%1$s",
    "viewLevel" : 0,
    "phisicalDEField" : false,
    "queryColumn" : false,
    "uIAssistDEField" : true
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "NAME",
      "dBType" : "MYSQL5",
      "name" : "NAME",
      "queryCodeExp" : "t1.`NAME`",
      "standardColumnName" : "`NAME`"
    } ],
    "getAllPSDEFSearchModes" : [ {
      "codeName" : "N_NAME_LIKE",
      "name" : "N_NAME_LIKE",
      "stdDataType" : 25,
      "valueOP" : "LIKE"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[NAME][规则名称]移动端默认",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.NAME"
        },
        "codeName" : "MobileDefault",
        "editorType" : "MOBTEXT",
        "name" : "[NAME][规则名称]移动端默认",
        "stringLength" : 255,
        "uIMode" : "MOBILEDEFAULT",
        "allowEmpty" : false,
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[NAME][规则名称]",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.NAME"
        },
        "codeName" : "Default",
        "editorType" : "TEXTBOX",
        "name" : "[NAME][规则名称]",
        "stringLength" : 255,
        "uIMode" : "DEFAULT",
        "allowEmpty" : false
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "NAME",
          "maxValue" : 255,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[255]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[255]"
      },
      "ruleInfo" : "内容长度必须小于等于[255]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "name",
    "dEFType" : 1,
    "dataType" : "TEXT",
    "importOrder" : 1000,
    "getLNPSLanguageRes" : {
      "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.NAME"
    },
    "length" : 255,
    "logicName" : "规则名称",
    "name" : "NAME",
    "orderValue" : 1000,
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "NAME"
    },
    "serviceCodeName" : "name",
    "stdDataType" : 25,
    "stringLength" : 255,
    "valueFormat" : "%1$s",
    "allowEmpty" : false,
    "enableQuickSearch" : true,
    "majorDEField" : true
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "ID",
      "dBType" : "MYSQL5",
      "name" : "ID",
      "queryCodeExp" : "t1.`ID`",
      "standardColumnName" : "`ID`"
    } ],
    "getAllPSDEFSearchModes" : [ {
      "codeName" : "N_ID_EQ",
      "name" : "N_ID_EQ",
      "stdDataType" : 25,
      "valueOP" : "EQ"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[ID][主键]移动端默认",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.ID"
        },
        "codeName" : "MobileDefault",
        "editorType" : "SPAN",
        "name" : "[ID][主键]移动端默认",
        "stringLength" : 60,
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[ID][主键]",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.ID"
        },
        "codeName" : "Default",
        "editorType" : "SPAN",
        "name" : "[ID][主键]",
        "stringLength" : 60,
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "ID",
          "maxValue" : 60,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[60]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[60]"
      },
      "ruleInfo" : "内容长度必须小于等于[60]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "id",
    "dEFType" : 1,
    "dataType" : "GUID",
    "importOrder" : 1000,
    "getLNPSLanguageRes" : {
      "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.ID"
    },
    "length" : 60,
    "logicName" : "主键",
    "name" : "ID",
    "orderValue" : 1000,
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "ID"
    },
    "serviceCodeName" : "id",
    "stdDataType" : 25,
    "stringLength" : 60,
    "valueFormat" : "%1$s",
    "keyDEField" : true,
    "pasteReset" : true
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "SCHEDULE_TYPE",
      "dBType" : "MYSQL5",
      "name" : "SCHEDULE_TYPE",
      "queryCodeExp" : "t1.`SCHEDULE_TYPE`",
      "standardColumnName" : "`SCHEDULE_TYPE`",
      "valueAutoGen" : true
    } ],
    "getAllPSDEFSearchModes" : [ {
      "codeName" : "N_SCHEDULE_TYPE_EQ",
      "name" : "N_SCHEDULE_TYPE_EQ",
      "stdDataType" : 25,
      "valueOP" : "EQ"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[SCHEDULE_TYPE][班次类型]移动端默认",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.SCHEDULE_TYPE"
        },
        "codeName" : "MobileDefault",
        "editorType" : "MOBDROPDOWNLIST",
        "name" : "[SCHEDULE_TYPE][班次类型]移动端默认",
        "stringLength" : 60,
        "uIMode" : "MOBILEDEFAULT",
        "allowEmpty" : false,
        "mobileMode" : true,
        "needCodeListConfig" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[SCHEDULE_TYPE][班次类型]",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.SCHEDULE_TYPE"
        },
        "codeName" : "Default",
        "editorType" : "DROPDOWNLIST",
        "name" : "[SCHEDULE_TYPE][班次类型]",
        "stringLength" : 60,
        "uIMode" : "DEFAULT",
        "allowEmpty" : false,
        "needCodeListConfig" : true
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "SCHEDULE_TYPE",
          "maxValue" : 60,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[60]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[60]"
      },
      "ruleInfo" : "内容长度必须小于等于[60]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "schedule_type",
    "dEFType" : 1,
    "dataType" : "SSCODELIST",
    "defaultValue" : "fixed",
    "importOrder" : 1000,
    "getLNPSLanguageRes" : {
      "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.SCHEDULE_TYPE"
    },
    "length" : 60,
    "logicName" : "班次类型",
    "name" : "SCHEDULE_TYPE",
    "orderValue" : 1000,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSCODELISTS/schedule_type.json"
    },
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "SCHEDULE_TYPE"
    },
    "serviceCodeName" : "schedule_type",
    "stdDataType" : 25,
    "stringLength" : 60,
    "valueFormat" : "%1$s",
    "allowEmpty" : false
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "CREATE_UID",
      "dBType" : "MYSQL5",
      "name" : "CREATE_UID",
      "queryCodeExp" : "t1.`CREATE_UID`",
      "standardColumnName" : "`CREATE_UID`"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[CREATE_UID][创建人]移动端默认",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.CREATE_UID"
        },
        "codeName" : "MobileDefault",
        "editorType" : "SPAN",
        "name" : "[CREATE_UID][创建人]移动端默认",
        "stringLength" : 100,
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[CREATE_UID][创建人]",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.CREATE_UID"
        },
        "codeName" : "Default",
        "editorType" : "SPAN",
        "name" : "[CREATE_UID][创建人]",
        "stringLength" : 100,
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "CREATE_UID",
          "maxValue" : 100,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[100]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[100]"
      },
      "ruleInfo" : "内容长度必须小于等于[100]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "create_uid",
    "dEFType" : 1,
    "dataType" : "TEXT",
    "importOrder" : 1000,
    "getLNPSLanguageRes" : {
      "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.CREATE_UID"
    },
    "length" : 100,
    "logicName" : "创建人",
    "name" : "CREATE_UID",
    "orderValue" : 1000,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSCODELISTS/SysOperator.json"
    },
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "CREATE_UID"
    },
    "predefinedType" : "CREATEMAN",
    "serviceCodeName" : "create_uid",
    "stdDataType" : 25,
    "stringLength" : 100,
    "valueFormat" : "%1$s",
    "systemReserver" : true
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "CREATE_DATE",
      "dBType" : "MYSQL5",
      "name" : "CREATE_DATE",
      "queryCodeExp" : "t1.`CREATE_DATE`",
      "standardColumnName" : "`CREATE_DATE`"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[CREATE_DATE][创建时间]",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.CREATE_DATE"
        },
        "codeName" : "Default",
        "editorType" : "SPAN",
        "name" : "[CREATE_DATE][创建时间]",
        "uIMode" : "DEFAULT",
        "valueFormat" : "%1$tY-%1$tm-%1$td %1$tH:%1$tM:%1$tS"
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[CREATE_DATE][创建时间]移动端默认",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.CREATE_DATE"
        },
        "codeName" : "MobileDefault",
        "editorType" : "SPAN",
        "name" : "[CREATE_DATE][创建时间]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "valueFormat" : "%1$tY-%1$tm-%1$td %1$tH:%1$tM:%1$tS",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "create_date",
    "dEFType" : 1,
    "dataType" : "DATETIME",
    "importOrder" : 1000,
    "jsonFormat" : "yyyy-MM-dd HH:mm:ss",
    "getLNPSLanguageRes" : {
      "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.CREATE_DATE"
    },
    "logicName" : "创建时间",
    "name" : "CREATE_DATE",
    "orderValue" : 1000,
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "CREATE_DATE"
    },
    "predefinedType" : "CREATEDATE",
    "serviceCodeName" : "create_date",
    "stdDataType" : 5,
    "valueFormat" : "%1$tY-%1$tm-%1$td %1$tH:%1$tM:%1$tS",
    "systemReserver" : true
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "WRITE_UID",
      "dBType" : "MYSQL5",
      "name" : "WRITE_UID",
      "queryCodeExp" : "t1.`WRITE_UID`",
      "standardColumnName" : "`WRITE_UID`"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[WRITE_UID][更新人]",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.WRITE_UID"
        },
        "codeName" : "Default",
        "editorType" : "SPAN",
        "name" : "[WRITE_UID][更新人]",
        "stringLength" : 100,
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[WRITE_UID][更新人]移动端默认",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.WRITE_UID"
        },
        "codeName" : "MobileDefault",
        "editorType" : "SPAN",
        "name" : "[WRITE_UID][更新人]移动端默认",
        "stringLength" : 100,
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "WRITE_UID",
          "maxValue" : 100,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[100]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[100]"
      },
      "ruleInfo" : "内容长度必须小于等于[100]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "write_uid",
    "dEFType" : 1,
    "dataType" : "TEXT",
    "importOrder" : 1000,
    "getLNPSLanguageRes" : {
      "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.WRITE_UID"
    },
    "length" : 100,
    "logicName" : "更新人",
    "name" : "WRITE_UID",
    "orderValue" : 1000,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSCODELISTS/SysOperator.json"
    },
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "WRITE_UID"
    },
    "predefinedType" : "UPDATEMANNAME",
    "serviceCodeName" : "write_uid",
    "stdDataType" : 25,
    "stringLength" : 100,
    "valueFormat" : "%1$s",
    "systemReserver" : true
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "WRITE_DATE",
      "dBType" : "MYSQL5",
      "name" : "WRITE_DATE",
      "queryCodeExp" : "t1.`WRITE_DATE`",
      "standardColumnName" : "`WRITE_DATE`"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[WRITE_DATE][更新时间]",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.WRITE_DATE"
        },
        "codeName" : "Default",
        "editorType" : "SPAN",
        "name" : "[WRITE_DATE][更新时间]",
        "uIMode" : "DEFAULT",
        "valueFormat" : "%1$tY-%1$tm-%1$td %1$tH:%1$tM:%1$tS"
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[WRITE_DATE][更新时间]移动端默认",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.WRITE_DATE"
        },
        "codeName" : "MobileDefault",
        "editorType" : "SPAN",
        "name" : "[WRITE_DATE][更新时间]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "valueFormat" : "%1$tY-%1$tm-%1$td %1$tH:%1$tM:%1$tS",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "write_date",
    "dEFType" : 1,
    "dataType" : "DATETIME",
    "importOrder" : 1000,
    "jsonFormat" : "yyyy-MM-dd HH:mm:ss",
    "getLNPSLanguageRes" : {
      "lanResTag" : "DEF.LNAME.ATTENDANCE_RULE.WRITE_DATE"
    },
    "logicName" : "更新时间",
    "name" : "WRITE_DATE",
    "orderValue" : 1000,
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "WRITE_DATE"
    },
    "predefinedType" : "UPDATEDATE",
    "serviceCodeName" : "write_date",
    "stdDataType" : 5,
    "valueFormat" : "%1$tY-%1$tm-%1$td %1$tH:%1$tM:%1$tS",
    "systemReserver" : true
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "CHECKIN_METHOD",
      "dBType" : "MYSQL5",
      "name" : "CHECKIN_METHOD",
      "queryCodeExp" : "t1.`CHECKIN_METHOD`",
      "standardColumnName" : "`CHECKIN_METHOD`",
      "valueAutoGen" : true
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[CHECKIN_METHOD][考勤方式]",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.CHECKIN_TYPE.CHECKIN_METHOD"
        },
        "codeName" : "Default",
        "editorType" : "CHECKBOXLIST",
        "name" : "[CHECKIN_METHOD][考勤方式]",
        "stringLength" : 60,
        "uIMode" : "DEFAULT",
        "needCodeListConfig" : true
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[CHECKIN_METHOD][考勤方式]移动端默认",
      "getPSDEFFormItem" : {
        "getCapPSLanguageRes" : {
          "lanResTag" : "DEF.LNAME.CHECKIN_TYPE.CHECKIN_METHOD"
        },
        "codeName" : "MobileDefault",
        "editorType" : "MOBCHECKLIST",
        "name" : "[CHECKIN_METHOD][考勤方式]移动端默认",
        "stringLength" : 60,
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true,
        "needCodeListConfig" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组",
        "getPSDEFVRConditions" : [ {
          "condType" : "STRINGLENGTH",
          "dEFName" : "CHECKIN_METHOD",
          "maxValue" : 60,
          "name" : "默认字符串长度",
          "ruleInfo" : "内容长度必须小于等于[60]",
          "includeMaxValue" : true,
          "includeMinValue" : false,
          "keyCond" : true
        } ],
        "ruleInfo" : "内容长度必须小于等于[60]"
      },
      "ruleInfo" : "内容长度必须小于等于[60]",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "checkin_method",
    "dEFType" : 1,
    "dataType" : "SMCODELIST",
    "defaultValue" : "device",
    "importOrder" : 1000,
    "getLNPSLanguageRes" : {
      "lanResTag" : "DEF.LNAME.CHECKIN_TYPE.CHECKIN_METHOD"
    },
    "length" : 60,
    "logicName" : "考勤方式",
    "name" : "CHECKIN_METHOD",
    "orderValue" : 1000,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSCODELISTS/checkin_method_type.json"
    },
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "CHECKIN_METHOD"
    },
    "serviceCodeName" : "checkin_method",
    "stdDataType" : 25,
    "stringLength" : 60,
    "valueFormat" : "%1$s"
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "ELASTIC_MINUTES",
      "dBType" : "MYSQL5",
      "name" : "ELASTIC_MINUTES",
      "queryCodeExp" : "t1.`ELASTIC_MINUTES`",
      "standardColumnName" : "`ELASTIC_MINUTES`"
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[ELASTIC_MINUTES][弹性分钟数]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBTEXT",
        "name" : "[ELASTIC_MINUTES][弹性分钟数]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[ELASTIC_MINUTES][弹性分钟数]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "TEXTBOX",
        "name" : "[ELASTIC_MINUTES][弹性分钟数]",
        "uIMode" : "DEFAULT"
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "elastic_minutes",
    "dEFType" : 1,
    "dataType" : "INT",
    "importOrder" : 1000,
    "logicName" : "弹性分钟数",
    "name" : "ELASTIC_MINUTES",
    "orderValue" : 1000,
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "ELASTIC_MINUTES"
    },
    "serviceCodeName" : "elastic_minutes",
    "stdDataType" : 9,
    "valueFormat" : "%1$s"
  }, {
    "getAllPSDEFDTColumns" : [ {
      "columnName" : "ELASTIC_VALID",
      "dBType" : "MYSQL5",
      "name" : "ELASTIC_VALID",
      "queryCodeExp" : "t1.`ELASTIC_VALID`",
      "standardColumnName" : "`ELASTIC_VALID`",
      "valueAutoGen" : true
    } ],
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[ELASTIC_VALID][是否启用弹性打卡]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBSWITCH",
        "name" : "[ELASTIC_VALID][是否启用弹性打卡]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "mobileMode" : true,
        "needCodeListConfig" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[ELASTIC_VALID][是否启用弹性打卡]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "DROPDOWNLIST_100",
        "name" : "[ELASTIC_VALID][是否启用弹性打卡]",
        "uIMode" : "DEFAULT",
        "needCodeListConfig" : true
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "elastic_valid",
    "dEFType" : 1,
    "dataType" : "TRUEFALSE",
    "defaultValue" : "0",
    "importOrder" : 1000,
    "logicName" : "是否启用弹性打卡",
    "name" : "ELASTIC_VALID",
    "orderValue" : 1000,
    "getPSCodeList" : {
      "modelref" : true,
      "path" : "PSCODELISTS/YesNo.json"
    },
    "getPSDEDBTable" : {
      "modelref" : true,
      "id" : "Table"
    },
    "getPSSysDBColumn" : {
      "modelref" : true,
      "id" : "ELASTIC_VALID"
    },
    "serviceCodeName" : "elastic_valid",
    "stdDataType" : 9,
    "valueFormat" : "%1$s"
  }, {
    "getAllPSDEFUIModes" : [ {
      "codeName" : "Default",
      "name" : "[FREE_END][结束时间]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "DATEPICKEREX_NODAY",
        "name" : "[FREE_END][结束时间]",
        "uIMode" : "DEFAULT",
        "valueFormat" : "%1$tH:%1$tM:%1$tS"
      },
      "type" : "DEFAULT"
    }, {
      "codeName" : "MobileDefault",
      "name" : "[FREE_END][结束时间]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBDATE",
        "name" : "[FREE_END][结束时间]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "valueFormat" : "%1$tH:%1$tM:%1$tS",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "free_end",
    "dEFType" : 5,
    "dataType" : "TIME",
    "importOrder" : 1000,
    "jsonFormat" : "HH:mm:ss",
    "logicName" : "结束时间",
    "name" : "FREE_END",
    "orderValue" : 1000,
    "serviceCodeName" : "free_end",
    "stdDataType" : 5,
    "valueFormat" : "%1$tH:%1$tM:%1$tS",
    "viewLevel" : 0,
    "phisicalDEField" : false,
    "uIAssistDEField" : true
  }, {
    "getAllPSDEFUIModes" : [ {
      "codeName" : "MobileDefault",
      "name" : "[FREE_START][开始时间]移动端默认",
      "getPSDEFFormItem" : {
        "codeName" : "MobileDefault",
        "editorType" : "MOBDATE",
        "name" : "[FREE_START][开始时间]移动端默认",
        "uIMode" : "MOBILEDEFAULT",
        "valueFormat" : "%1$tH:%1$tM:%1$tS",
        "mobileMode" : true
      },
      "type" : "MOBILEDEFAULT",
      "mobileMode" : true
    }, {
      "codeName" : "Default",
      "name" : "[FREE_START][开始时间]",
      "getPSDEFFormItem" : {
        "codeName" : "Default",
        "editorType" : "DATEPICKEREX_NODAY",
        "name" : "[FREE_START][开始时间]",
        "uIMode" : "DEFAULT",
        "valueFormat" : "%1$tH:%1$tM:%1$tS"
      },
      "type" : "DEFAULT"
    } ],
    "getAllPSDEFValueRules" : [ {
      "codeName" : "Default",
      "name" : "默认规则",
      "getPSDEFVRGroupCondition" : {
        "condOp" : "AND",
        "condType" : "GROUP",
        "name" : "默认组"
      },
      "ruleInfo" : "默认规则",
      "checkDefault" : true,
      "defaultMode" : true,
      "enableBackend" : true,
      "enableFront" : true
    } ],
    "codeName" : "free_start",
    "dEFType" : 5,
    "dataType" : "TIME",
    "importOrder" : 1000,
    "jsonFormat" : "HH:mm:ss",
    "logicName" : "开始时间",
    "name" : "FREE_START",
    "orderValue" : 1000,
    "serviceCodeName" : "free_start",
    "stdDataType" : 5,
    "valueFormat" : "%1$tH:%1$tM:%1$tS",
    "viewLevel" : 0,
    "phisicalDEField" : false,
    "uIAssistDEField" : true
  } ],
  "getAllPSDELogics" : [ {
    "codeName" : "activeRule",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/activeRule.json",
    "logicName" : "激活规则",
    "name" : "激活规则",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : 1106,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_017"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : -470,
      "parallelOutput" : true
    }, {
      "codeName" : "RAWSQLCALL8",
      "leftPos" : 656,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "删除当前旧激活班次",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL8"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "name" : "activeRule[ID]",
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "activeRule"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "sql" : "DELETE FROM attendance_activate_shift WHERE rule_id = ?",
      "topPos" : 20
    }, {
      "codeName" : "RAWSQLCALL_01",
      "leftPos" : 850,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "删除当前规则旧排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM9"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "size",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "group_shifts"
            },
            "logicType" : "SINGLE",
            "name" : "group_shifts[size] 不等于(<>) 0",
            "paramValue" : "0"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_01"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "EFFECT_TIME",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "sql" : "DELETE FROM attendance_schedule WHERE rule_id = ? AND checkin_date >= ?",
      "topPos" : 100,
      "parallelOutput" : true
    }, {
      "codeName" : "RAWSQLCALL_06",
      "leftPos" : 1066,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "删除当前规则区间旧排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM9"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "size",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "group_shifts"
            },
            "logicType" : "SINGLE",
            "name" : "group_shifts[size] 不等于(<>) 0",
            "paramValue" : "0"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_06"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "limitTime",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "sql" : "DELETE FROM attendance_schedule WHERE rule_id = ? AND checkin_date >= ?",
      "topPos" : 100,
      "parallelOutput" : true
    }, {
      "codeName" : "RENEWPARAM_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "activeShift"
      },
      "leftPos" : 544,
      "logicNodeType" : "RENEWPARAM",
      "name" : "重新建立参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_03"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RENEWPARAM_01"
        }
      } ],
      "topPos" : 230,
      "parallelOutput" : true
    }, {
      "codeName" : "LOOPSUBCALL_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "temp"
      },
      "leftPos" : 754,
      "logicNodeType" : "LOOPSUBCALL",
      "name" : "遍历班次",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RENEWPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        },
        "subCallLink" : true
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION_03"
        },
        "name" : "无限制区间",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "size",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "activeShifts"
            },
            "logicType" : "SINGLE",
            "name" : "activeShifts[size] 不等于(<>) 0",
            "paramValue" : "0"
          }, {
            "condOP" : "ISNULL",
            "dstFieldName" : "limitTime",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[limitTime] 值为空(Nil)"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_013"
        },
        "name" : "有限制区间",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "ISNOTNULL",
            "dstFieldName" : "limitTime",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[limitTime] 值不为空(NotNil)"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        }
      } ],
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "shifts"
      },
      "topPos" : 230,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM9",
      "leftPos" : 1066,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "衔接",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        },
        "name" : "非免考勤规则",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 不等于(<>) no_required",
            "paramValue" : "no_required"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM9"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_016"
        },
        "name" : "免考勤规则",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) no_required",
            "paramValue" : "no_required"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM9"
        }
      } ],
      "topPos" : 240,
      "parallelOutput" : true
    }, {
      "codeName" : "DEACTION_03",
      "getDstPSDEAction" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_shift/PSDEACTIONS/Save.json"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "activeShifts"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_shift.json"
      },
      "leftPos" : 970,
      "logicNodeType" : "DEACTION",
      "name" : "激活班次",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_013"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION_03"
        }
      } ],
      "topPos" : 354,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_03",
      "leftPos" : 544,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_03"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_03"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "SHIFT_DATA",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "activeShift"
        },
        "paramAction" : "SETPARAMVALUE",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "temp"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "RULE_ID",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "activeShift"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "RULE_ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "temp"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "ID",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "activeShift"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "temp"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "NAME",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "activeShift"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "NAME",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "temp"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 360,
      "parallelOutput" : true
    }, {
      "code" : "def _default = logic.param('Default').getReal()\r\nCalendar cal = Calendar.getInstance()\r\nint currentYear = cal.get(Calendar.YEAR)\r\ndef dateFormat = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\n\r\n// 设置开始日期为当年第一天\r\ncal.set(currentYear, Calendar.JANUARY, 1, 0, 0, 0)\r\ncal.set(Calendar.MILLISECOND, 0)\r\nDate startOfYear = cal.getTime()\r\n\r\n// 设置结束日期为当年最后一天\r\ncal.set(currentYear, Calendar.DECEMBER, 31, 23, 59, 59)\r\ncal.set(Calendar.MILLISECOND, 999)\r\nDate endOfYear = cal.getTime()\r\n\r\n// 设置过滤条件（格式化为yyyy-MM-dd）\r\n\r\n_default.set(\"N_DATE_FROM_LTANDEQ\", dateFormat.format(endOfYear))\r\n_default.set(\"N_DATE_TO_GTANDEQ\", dateFormat.format(startOfYear))",
      "codeName" : "RAWSFCODE_013",
      "codeType" : "Groovy",
      "leftPos" : 754,
      "logicNodeType" : "RAWSFCODE",
      "name" : "设置日历参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_07"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_013"
        }
      } ],
      "topPos" : 414,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_05",
      "leftPos" : 1501,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "重新建立参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "BINDPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_05"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "members"
        },
        "paramAction" : "RENEWPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "changes"
        },
        "name" : " ==> changes",
        "paramAction" : "RENEWPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "lastSchedules"
        },
        "paramAction" : "RENEWPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "newSchedules"
        },
        "paramAction" : "RENEWPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "depts"
        },
        "paramAction" : "RENEWPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "group_members"
        },
        "paramAction" : "RENEWPARAM"
      } ],
      "topPos" : 460,
      "parallelOutput" : true
    }, {
      "codeName" : "APPENDPARAM_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "activeShifts"
      },
      "leftPos" : 316,
      "logicNodeType" : "APPENDPARAM",
      "name" : "附加到数组参数",
      "srcIndex" : 0,
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "activeShift"
      },
      "topPos" : 474,
      "parallelOutput" : true
    }, {
      "code" : "def activeShift = logic.param('activeShift').getReal()\r\ndef shift = activeShift.shift_data\r\n\r\n// 计算总工时\r\nint totalWorkLoad = 0\r\nshift.scopes.each { workPeriod ->\r\n    // 安全校验时间格式\r\n    if (workPeriod?.start_base_time && workPeriod?.end_base_time) {\r\n        def timeToMinutes = { time ->\r\n        if (time instanceof java.sql.Timestamp) {\r\n            String timeStr = time.toString().split(' ')[1]\r\n            def parts = timeStr.split(':')[0..1]\r\n            return (parts[0].toInteger() * 60) + parts[1].toInteger()\r\n        }\r\n        def parts = time.split(':')\r\n        (parts[0].toInteger() * 60) + parts[1].toInteger()\r\n    }\r\n        def start = timeToMinutes(workPeriod.start_base_time)\r\n        def end = timeToMinutes(workPeriod.end_base_time)\r\n        if (start >= end) {\r\n            totalWorkLoad += (24 * 60 - start + end);\r\n        }else {\r\n            totalWorkLoad += (end - start);\r\n        }\r\n    }\r\n}\r\n\r\nshift.work_load = totalWorkLoad\r\n// shift.scopes = null\r\nshift.set(\"work_times\",shift.scopes)\r\n",
      "codeName" : "RAWSFCODE_03",
      "codeType" : "Groovy",
      "leftPos" : 544,
      "logicNodeType" : "RAWSFCODE",
      "name" : "计算工时",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "APPENDPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_03"
        }
      } ],
      "topPos" : 474,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_07",
      "leftPos" : 754,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_03"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_07"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "N_DATE_FROM_LTANDEQ",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "calendarFilter"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "N_DATE_FROM_LTANDEQ",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "N_DATE_TO_GTANDEQ",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "calendarFilter"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "N_DATE_TO_GTANDEQ",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "size",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "calendarFilter"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValue" : "1000",
        "srcValueType" : "SRCVALUE"
      } ],
      "topPos" : 510,
      "parallelOutput" : true
    }, {
      "codeName" : "BINDPARAM_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "group_members"
      },
      "leftPos" : 1501,
      "logicNodeType" : "BINDPARAM",
      "name" : "绑定参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_011"
        },
        "name" : "休息日不同",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) class_inversion",
            "paramValue" : "class_inversion"
          }, {
            "condOP" : "EQ",
            "dstFieldName" : "SAME_RESTDAY",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SAME_RESTDAY] 等于(=) 0",
            "paramValue" : "0"
          }, {
            "condOP" : "ISNOTNULL",
            "dstFieldName" : "WORKDAYS",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "group_shift"
            },
            "logicType" : "SINGLE",
            "name" : "group_shift[WORKDAYS] 值不为空(NotNil)"
          }, {
            "condOP" : "NOTEQ",
            "dstFieldName" : "size",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "group_members"
            },
            "logicType" : "SINGLE",
            "name" : "group_members[size] 不等于(<>) 0",
            "paramValue" : "0"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "BINDPARAM_01"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_010"
        },
        "name" : "休息日相同",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) class_inversion",
            "paramValue" : "class_inversion"
          }, {
            "condOP" : "ISNOTNULL",
            "dstFieldName" : "WORKDAYS",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "group_shift"
            },
            "logicType" : "SINGLE",
            "name" : "group_shift[WORKDAYS] 值不为空(NotNil)"
          }, {
            "condOP" : "EQ",
            "dstFieldName" : "SAME_RESTDAY",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SAME_RESTDAY] 等于(=) 1",
            "paramValue" : "1"
          }, {
            "condOP" : "NOTEQ",
            "dstFieldName" : "size",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "group_members"
            },
            "logicType" : "SINGLE",
            "name" : "group_members[size] 不等于(<>) 0",
            "paramValue" : "0"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "BINDPARAM_01"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_05"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) work_rest",
            "paramValue" : "work_rest"
          }, {
            "condOP" : "ISNOTNULL",
            "dstFieldName" : "WORKDAYS",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "group_shift"
            },
            "logicType" : "SINGLE",
            "name" : "group_shift[WORKDAYS] 值不为空(NotNil)"
          }, {
            "condOP" : "NOTEQ",
            "dstFieldName" : "size",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "group_members"
            },
            "logicType" : "SINGLE",
            "name" : "group_members[size] 不等于(<>) 0",
            "paramValue" : "0"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "BINDPARAM_01"
        }
      } ],
      "srcFieldName" : "MEMBERS",
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "group_shift"
      },
      "topPos" : 570,
      "parallelOutput" : true
    }, {
      "codeName" : "DEDATASET_03",
      "getDstPSDEDataSet" : {
        "modelref" : true,
        "id" : "public"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "calendarFilter"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar_leaves.json"
      },
      "leftPos" : 754,
      "logicNodeType" : "DEDATASET",
      "name" : "获取节假日配置",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_018"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_03"
        }
      } ],
      "getRetPSDELogicParam" : {
        "modelref" : true,
        "id" : "curRldata"
      },
      "topPos" : 590,
      "parallelOutput" : true
    }, {
      "code" : "def curRldata = logic.param('curRldata').getReal()\r\n\r\ndef lastRldata = logic.param('lastRldata').getReal()\r\n\r\nif(curRldata){\r\n    // 添加日期格式化工具\r\n    def sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\n\r\n    // 获取当前年份的第一天和最后一天\r\n    def currentYear = java.time.Year.now().value\r\n    def firstDayOfYear = java.time.LocalDate.of(currentYear, 1, 1)\r\n    def lastDayOfYear = java.time.LocalDate.of(currentYear, 12, 31)\r\n\r\n    curRldata.each{ i ->\r\n        // 解析日期范围\r\n        def startDate = i.get(\"date_from\")\r\n        def endDate = i.get(\"date_to\")\r\n\r\n        if (startDate && endDate) {\r\n            // 日期范围截断逻辑\r\n            if(startDate && !startDate.toInstant().atZone(java.time.ZoneId.systemDefault()).toLocalDate().isAfter(firstDayOfYear)){\r\n                startDate = java.sql.Timestamp.valueOf(firstDayOfYear.atStartOfDay())\r\n            }\r\n            if(endDate && endDate.toInstant().atZone(java.time.ZoneId.systemDefault()).toLocalDate().isAfter(lastDayOfYear)){\r\n                endDate = java.sql.Timestamp.valueOf(lastDayOfYear.atTime(23,59,59))\r\n            }\r\n\r\n            // 将Timestamp转换为LocalDate\r\n            java.time.LocalDate start = startDate.toInstant()\r\n                .atZone(java.time.ZoneId.systemDefault())\r\n                .toLocalDate()\r\n\r\n            java.time.LocalDate end = endDate.toInstant()\r\n                .atZone(java.time.ZoneId.systemDefault())\r\n                .toLocalDate()\r\n\r\n            // 使用循环逐日增加\r\n            while (!start.isAfter(end)) {\r\n                def restday = sys.entity('resource_calendar_leaves')\r\n                restday.set(\"date\", sdf.format(Date.from(start.atStartOfDay(java.time.ZoneId.systemDefault()).toInstant())))\r\n                restday.set(\"name\", i.get(\"name\"))\r\n                lastRldata.add(restday)\r\n                // 增加一天\r\n                start = start.plusDays(1)\r\n            }\r\n        }\r\n    }\r\n}",
      "codeName" : "RAWSFCODE_018",
      "codeType" : "Groovy",
      "leftPos" : 754,
      "logicNodeType" : "RAWSFCODE",
      "name" : "构造节假日",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_02"
        },
        "name" : "固定排班/灵活打卡",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "groupOP" : "OR",
            "logicType" : "GROUP",
            "name" : "OR",
            "getPSDELogicLinkConds" : [ {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) fixed",
              "paramValue" : "fixed"
            }, {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) flexible",
              "paramValue" : "flexible"
            } ]
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_018"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_06"
        },
        "name" : "手动排班",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) manual",
            "paramValue" : "manual"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_018"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        },
        "name" : "自由班",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) free",
            "paramValue" : "free"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_018"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_08"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) alternate_week",
            "paramValue" : "alternate_week"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_018"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_03"
        },
        "name" : "N班倒/上A休B",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "groupOP" : "OR",
            "logicType" : "GROUP",
            "name" : "OR",
            "getPSDELogicLinkConds" : [ {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) class_inversion",
              "paramValue" : "class_inversion"
            }, {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) work_rest",
              "paramValue" : "work_rest"
            } ]
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_018"
        }
      } ],
      "topPos" : 700,
      "parallelOutput" : true
    }, {
      "codeName" : "DEBUGPARAM_05",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "activeRule"
      },
      "leftPos" : 1066,
      "logicNodeType" : "DEBUGPARAM",
      "name" : "调试逻辑参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION_02"
        },
        "name" : "无限制区间",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "ISNULL",
            "dstFieldName" : "limitTime",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[limitTime] 值为空(Nil)"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_05"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_06"
        },
        "name" : "有限制区间",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "ISNOTNULL",
            "dstFieldName" : "limitTime",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[limitTime] 值不为空(NotNil)"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_05"
        }
      } ],
      "topPos" : -40,
      "parallelOutput" : true
    }, {
      "code" : "def _default = logic.param('Default').getReal()\r\ndef effect_time = _default.get(\"effect_time\")\r\nif (effect_time instanceof String) {\r\n    def sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd 00:00:00\")\r\n    _default.set(\"effect_time\", sdf.parse(effect_time))\r\n}",
      "codeName" : "RAWSFCODE_017",
      "codeType" : "Groovy",
      "leftPos" : 1066,
      "logicNodeType" : "RAWSFCODE",
      "name" : "生效日期转换",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_017"
        }
      } ],
      "topPos" : -322,
      "parallelOutput" : true
    }, {
      "code" : "def activeShifts = logic.param('activeShifts').getReal()\r\ndef activeRule = logic.param('activeRule').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\ndef _default = logic.param('Default').getReal()\r\ndef effect_time = _default.get(\"effect_time\")\r\ndef inversion_days = _default.get(\"inversion_days\")\r\n\r\ndef group_shift = logic.param('group_shift').getReal()\r\ndef workdays = group_shift.get(\"workdays\")\r\n\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ndef endCal = Calendar.getInstance()\r\nendCal.add(Calendar.MONTH, 1)\r\nendCal.set(Calendar.DAY_OF_MONTH, endCal.getActualMaximum(Calendar.DAY_OF_MONTH))\r\n\r\n //限制生成区间\r\ndef limitTime = _default.get(\"limitTime\")\r\ndef limitCal = Calendar.getInstance()\r\nif(limitTime ){\r\n    if (limitTime instanceof String) {\r\n        limitCal.setTime(sdf.parse(limitTime))\r\n    } else {\r\n        limitCal.setTime(limitTime)\r\n    }\r\n}\r\n\r\ndef startCal = Calendar.getInstance()\r\nstartCal.setTime(effect_time)\r\nstartCal.set(Calendar.HOUR_OF_DAY, 0)\r\nstartCal.set(Calendar.MINUTE, 0)\r\nstartCal.set(Calendar.SECOND, 0)\r\nstartCal.set(Calendar.MILLISECOND, 0)\r\n\r\ndef cycleMap = [:]\r\nworkdays.eachWithIndex { workday, index ->\r\n    if (index + 1 <= inversion_days) {\r\n        cycleMap[(index + 1)] = workday\r\n    }\r\n}\r\n\r\nDate baseDate = startCal.getTime()\r\nwhile (!startCal.after(endCal)) {\r\n\r\n    if(limitTime && startCal.before(limitCal)){\r\n        startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n        continue \r\n    }\r\n\r\n    Date checkinDate = startCal.getTime()\r\n    long offsetMillis = checkinDate.time - baseDate.time\r\n    int offsetDays = (offsetMillis / (24 * 60 * 60 * 1000)) as int\r\n    int dayInCycle = (offsetDays % inversion_days) + 1\r\n\r\n    def workdayConfig = cycleMap[dayInCycle]\r\n    if (workdayConfig) {\r\n        def shift = activeShifts.find { it.id == workdayConfig.shift_id }\r\n        def shiftData = shift?.shift_data ?: [:]\r\n        def workTime = shiftData?.get(\"work_times\") ?: []\r\n\r\n        def schedule = sys.entity('attendance_schedule')\r\n        schedule.rule_data = activeRule.rule_data\r\n        schedule.rule_name = activeRule.name\r\n        schedule.rule_id = activeRule.id\r\n        schedule.checkin_date = sdf.format(checkinDate)\r\n        schedule.shift_data = shiftData\r\n        schedule.work_time = workTime\r\n        schedule.workday = shiftData ? 1 : 0\r\n        newSchedules.add(schedule)\r\n    }\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}",
      "codeName" : "RAWSFCODE_011",
      "codeType" : "Groovy",
      "leftPos" : 1501,
      "logicNodeType" : "RAWSFCODE",
      "name" : "N班倒构造新排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_014"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_011"
        }
      } ],
      "topPos" : 790,
      "parallelOutput" : true
    }, {
      "code" : "//1、排班日期区间为五个月，即[ 前三个月 - 当前月 - 下个月]\r\n//2、生成新排班时需要生成生效日期起到排班日期区间止的所有排班\r\ndef activeShifts  = logic.param('activeShifts').getReal()\r\ndef activeRule = logic.param('activeRule').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\ndef _default = logic.param('Default').getReal()\r\ndef effect_time = _default.get(\"effect_time\")\r\ndef inversion_cycle = _default.get(\"inversion_cycle\")\r\n\r\n//获取workdays\r\ndef group_shift = logic.param('group_shift').getReal()\r\ndef workdays = group_shift.get(\"workdays\")\r\n\r\n// 获取当前日期\r\ndef now = new Date()\r\ndef calendar = Calendar.getInstance()\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ncalendar.setTime(now)\r\n \r\n  //限制生成区间\r\ndef limitTime = _default.get(\"limitTime\")\r\ndef limitCal = Calendar.getInstance()\r\nif(limitTime ){\r\n    if (limitTime instanceof String) {\r\n        limitCal.setTime(sdf.parse(limitTime))\r\n    } else {\r\n        limitCal.setTime(limitTime)\r\n    }\r\n}\r\n\r\n// 跳转到下个月\r\ncalendar.add(Calendar.MONTH, 1)\r\n// 设置为下个月最后一天\r\ncalendar.set(Calendar.DAY_OF_MONTH, calendar.getActualMaximum(Calendar.DAY_OF_MONTH))\r\n    \r\n// 排班结束日期\r\ndef endDate = sdf.format(calendar.getTime())\r\n\r\n\r\n// 排班生成\r\ndef startCal = Calendar.getInstance()\r\nstartCal.setTime(effect_time)\r\n    \r\n// 解析结束日期\r\ndef endCal = Calendar.getInstance()\r\nendCal.setTime(sdf.parse(endDate))\r\n\r\n// 计算周期天数（N班倒*7天）\r\nint cycleDays = inversion_cycle * 7\r\n\r\n// 预处理工作日数据：建立周期映射表（仅保留1~cycleDays的配置）\r\ndef validWorkdays = workdays.findAll { it.day_number <= cycleDays }\r\ndef cycleMap = [:]\r\nvalidWorkdays.each { \r\n    cycleMap[it.day_number] = it \r\n}\r\n\r\n// 计算生效日期对应的周期基准日（最近的前序周一）\r\nCalendar baseDateCal = Calendar.getInstance()\r\nbaseDateCal.setTime(effect_time)\r\n// 计算需要回退的天数（1=周日,2=周一,...,7=周六）\r\nint daysToSubtract = (baseDateCal.get(Calendar.DAY_OF_WEEK) - 2 + 7) % 7\r\n\r\nif (daysToSubtract > 0) {\r\n    baseDateCal.add(Calendar.DAY_OF_MONTH, -daysToSubtract)\r\n}\r\nDate baseDate = baseDateCal.getTime()\r\n\r\n// 遍历当月每一天\r\nwhile (!startCal.after(endCal)) {\r\n    \r\n    if(limitTime && startCal.before(limitCal)){\r\n        startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n        continue \r\n    }\r\n\r\n    Date checkinDate = startCal.getTime()\r\n    \r\n    // 计算相对于基准日的天数偏移\r\n    long offsetMillis = checkinDate.getTime() - baseDate.getTime()\r\n    int offsetDays = (offsetMillis / (24 * 60 * 60 * 1000)) as int\r\n    \r\n    // 计算周期位置（1-based）\r\n    int dayInCycle = (offsetDays % cycleDays) + 1\r\n    \r\n    // 查找工作配置\r\n    def workdayConfig = cycleMap[dayInCycle]\r\n\r\n    if(workdayConfig!=null){\r\n          //查找对应的班次信息\r\n        def shift = activeShifts.find { it.id == workdayConfig.shift_id }\r\n        def shift_data =  shift?.shift_data?:null\r\n        def workTime = shift_data?.get(\"work_times\") ?: null\r\n\r\n        def schedule = sys.entity('attendance_schedule')\r\n        schedule.rule_data = activeRule.get(\"rule_data\")\r\n        schedule.rule_name = activeRule.get(\"name\")\r\n        schedule.rule_id = activeRule.get(\"id\")\r\n        schedule.checkin_date =  sdf.format(checkinDate)\r\n        schedule.shift_data = shift_data\r\n        schedule.work_time = workTime\r\n        schedule.workday = shift_data != null ? 1 : 0 \r\n        newSchedules.add(schedule)\r\n\r\n    }\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}\r\n\r\n\r\n",
      "codeName" : "RAWSFCODE_010",
      "codeType" : "Groovy",
      "leftPos" : 1300,
      "logicNodeType" : "RAWSFCODE",
      "name" : "N班倒构造新排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_014"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_010"
        }
      } ],
      "topPos" : 800,
      "parallelOutput" : true
    }, {
      "code" : "//1、排班日期区间为五个月，即[ 前三个月 - 当前月 - 下个月]\r\n//2、生成新排班时需要生成生效日期起到排班日期区间止的所有排班\r\ndef activeShifts  = logic.param('activeShifts').getReal()\r\ndef activeRule = logic.param('activeRule').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\ndef _default = logic.param('Default').getReal()\r\ndef effect_time = _default.get(\"effect_time\")\r\ndef workdays = _default.get(\"workdays\")\r\n//大小周\r\ndef biweekly_cycle = _default.get(\"biweekly_cycle\")\r\n\r\n// 获取当前日期\r\ndef now = new Date()\r\ndef calendar = Calendar.getInstance()\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ncalendar.setTime(now)\r\n\r\n //限制生成区间\r\ndef limitTime = _default.get(\"limitTime\")\r\ndef limitCal = Calendar.getInstance()\r\nif(limitTime ){\r\n    if (limitTime instanceof String) {\r\n        limitCal.setTime(sdf.parse(limitTime))\r\n    } else {\r\n        limitCal.setTime(limitTime)\r\n    }\r\n}\r\n \r\n// 跳转到下个月\r\ncalendar.add(Calendar.MONTH, 1)\r\n// 设置为下个月最后一天\r\ncalendar.set(Calendar.DAY_OF_MONTH, calendar.getActualMaximum(Calendar.DAY_OF_MONTH))\r\n    \r\n// 排班结束日期\r\ndef endDate = sdf.format(calendar.getTime())\r\n\r\n// 计算当天排班班次\r\ndef generateShiftData = { Date checkinDate, List workdaysParam, List activeShiftsParam ->\r\n    // 1. 确定当前日期是周几（1-7对应周一到周日）\r\n    def calendarInner = Calendar.getInstance()\r\n    calendarInner.setTime(checkinDate)\r\n    int dayOfWeek = calendarInner.get(Calendar.DAY_OF_WEEK)\r\n    int dayNumber = (dayOfWeek == Calendar.SUNDAY) ? 7 : dayOfWeek - 1\r\n\r\n    // 新增大/小周计算逻辑\r\n    // 计算生效日期所在周的第一天（周一）\r\n    def effectCal = Calendar.getInstance()\r\n    effectCal.setTime(effect_time)\r\n    effectCal.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY)\r\n\r\n    // 计算检查日期所在周的第一天（周一）\r\n    def checkinCal = Calendar.getInstance()\r\n    checkinCal.setTime(checkinDate)\r\n    checkinCal.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY)\r\n\r\n    // 计算周数差（生效日期所在周为第1周）\r\n    long diffMillis = checkinCal.getTimeInMillis() - effectCal.getTimeInMillis()\r\n    int weekNumber = (int)(diffMillis / (7 * 24 * 60 * 60 * 1000)) + 1\r\n\r\n    // 判断当前是大周还是小周\r\n    boolean isBigWeek = false\r\n    if (biweekly_cycle == \"big_small\") {\r\n    isBigWeek = (weekNumber % 2 == 1)  // 奇数周为大周\r\n} else if (biweekly_cycle == \"small_big\") {\r\n    isBigWeek = (weekNumber % 2 == 0)  // 偶数周为大周\r\n}\r\n\r\n// 调整day_number（小周时+7）\r\nint adjustedDayNumber = isBigWeek ? dayNumber : dayNumber + 7\r\n\r\n// 2. 查找匹配的工作日配置（直接匹配调整后的day_number）\r\ndef workdayConfig = workdaysParam.find {\r\n    it.day_number == adjustedDayNumber\r\n}\r\n\r\n// 3. 未找到工作日配置时返回空班次\r\nif (!workdayConfig || !workdayConfig.shift_id) {\r\n    return null\r\n}\r\n\r\n// 4. 查找对应的班次信息\r\ndef shift = activeShiftsParam.find { it.id == workdayConfig.shift_id }\r\n\r\n// 5. 未找到班次时返回空班次\r\nif (!shift || !shift.shift_data) {\r\n    return null\r\n}\r\n\r\n// 6. 返回班次数据\r\nreturn shift.shift_data\r\n}\r\n\r\n// 排班生成\r\ndef startCal = Calendar.getInstance()\r\nstartCal.setTime(effect_time)\r\n    \r\n// 解析结束日期\r\ndef endCal = Calendar.getInstance()\r\nendCal.setTime(sdf.parse(endDate))\r\n\r\n// 遍历日期区间\r\nwhile (!startCal.after(endCal)) {\r\n    if(limitTime && startCal.before(limitCal)){\r\n        startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n        continue \r\n    }\r\n    def checkinDate = startCal.getTime()\r\n    def shift_data = generateShiftData(checkinDate, workdays, activeShifts)\r\n    def workTime = shift_data?.get(\"work_times\") ?: null\r\n\r\n    def schedule = sys.entity('attendance_schedule')\r\n    schedule.rule_data = activeRule.get(\"rule_data\")\r\n    schedule.rule_name = activeRule.get(\"name\")\r\n    schedule.rule_id = activeRule.get(\"id\")\r\n    schedule.checkin_date =  sdf.format(checkinDate)\r\n    if(shift_data){\r\n        shift_data.name = \"白班\"\r\n    }\r\n    schedule.shift_data = shift_data\r\n    schedule.work_time = workTime\r\n    schedule.workday = shift_data != null ? 1 : 0 \r\n    // schedule.id = UUID.randomUUID().toString() \r\n\r\n    newSchedules.add(schedule)\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}",
      "codeName" : "RAWSFCODE_08",
      "codeType" : "Groovy",
      "leftPos" : 316,
      "logicNodeType" : "RAWSFCODE",
      "name" : "大小周构造新排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_015"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_08"
        }
      } ],
      "topPos" : 860,
      "parallelOutput" : true
    }, {
      "code" : "//1、排班日期区间为五个月，即[ 前三个月 - 当前月 - 下个月]\r\n//2、生成新排班时需要生成生效日期起到排班日期区间止的所有排班\r\ndef activeShifts  = logic.param('activeShifts').getReal()\r\ndef activeRule = logic.param('activeRule').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\ndef _default = logic.param('Default').getReal()\r\ndef effect_time = _default.get(\"effect_time\")\r\n\r\n// 获取当前日期\r\ndef now = new Date()\r\ndef calendar = Calendar.getInstance()\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ncalendar.setTime(now)\r\n\r\n //限制生成区间\r\ndef limitTime = _default.get(\"limitTime\")\r\ndef limitCal = Calendar.getInstance()\r\nif(limitTime ){\r\n    if (limitTime instanceof String) {\r\n        limitCal.setTime(sdf.parse(limitTime))\r\n    } else {\r\n        limitCal.setTime(limitTime)\r\n    }\r\n}\r\n \r\n// 跳转到下个月\r\ncalendar.add(Calendar.MONTH, 1)\r\n// 设置为下个月最后一天\r\ncalendar.set(Calendar.DAY_OF_MONTH, calendar.getActualMaximum(Calendar.DAY_OF_MONTH))\r\n    \r\n// 排班结束日期\r\ndef endDate = sdf.format(calendar.getTime())\r\n\r\n\r\n// 排班生成\r\ndef startCal = Calendar.getInstance()\r\nstartCal.setTime(effect_time)\r\n    \r\n// 解析结束日期\r\ndef endCal = Calendar.getInstance()\r\nendCal.setTime(sdf.parse(endDate))\r\n\r\n// 遍历日期区间\r\nwhile (!startCal.after(endCal)) {\r\n    \r\n    if(limitTime && startCal.before(limitCal)){\r\n        startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n        continue \r\n    }\r\n        \r\n    def checkinDate = startCal.getTime()\r\n    def shift_data = activeShifts[0].shift_data\r\n    def workTime = shift_data?.get(\"work_times\") ?: null\r\n\r\n    def schedule = sys.entity('attendance_schedule')\r\n    schedule.rule_data = activeRule.get(\"rule_data\")\r\n    schedule.rule_name = activeRule.get(\"name\")\r\n    schedule.rule_id = activeRule.get(\"id\")\r\n    schedule.checkin_date =  sdf.format(checkinDate)\r\n    schedule.shift_data = shift_data\r\n    schedule.work_time = workTime\r\n    schedule.workday = shift_data != null ? 1 : 0 \r\n    // schedule.id = UUID.randomUUID().toString() \r\n\r\n    newSchedules.add(schedule)\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}",
      "codeName" : "RAWSFCODE_01",
      "codeType" : "Groovy",
      "leftPos" : 956,
      "logicNodeType" : "RAWSFCODE",
      "name" : "自由班构造新排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_015"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        }
      } ],
      "topPos" : 860,
      "parallelOutput" : true
    }, {
      "codeName" : "LOOPSUBCALL_02",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "deptTemp"
      },
      "leftPos" : 1395,
      "logicNodeType" : "LOOPSUBCALL",
      "name" : "循环子调用",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_02"
        },
        "subCallLink" : true
      } ],
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "depts"
      },
      "topPos" : 1150,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_04",
      "leftPos" : 754,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_04"
        },
        "name" : "非全公司",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "ALL_COMPANY",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "group_shift"
            },
            "logicType" : "SINGLE",
            "name" : "group_shift[ALL_COMPANY] 等于(=) false",
            "paramValue" : "false"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_04"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_02"
        },
        "name" : "全公司",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_04"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "group_shift"
        },
        "paramAction" : "BINDPARAM",
        "srcFieldName" : "0",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "group_shifts"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "size",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "empFilter"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValue" : "9999",
        "srcValueType" : "SRCVALUE"
      } ],
      "topPos" : 1190
    }, {
      "codeName" : "DEACTION_02",
      "getDstPSDEAction" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_rule/PSDEACTIONS/Save.json"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "activeRule"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_rule.json"
      },
      "leftPos" : 850,
      "logicNodeType" : "DEACTION",
      "name" : "激活规则",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL8"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION_02"
        }
      } ],
      "topPos" : -40,
      "parallelOutput" : true
    }, {
      "codeName" : "RAWSQLCALL_07",
      "leftPos" : 850,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "删除人员旧排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_03"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_07"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "limitTime",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "USER_ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "memberTemp"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "sql" : "DELETE FROM attendance_schedule WHERE  checkin_date >= ? AND member_id = ?",
      "topPos" : 1770,
      "parallelOutput" : true
    }, {
      "codeName" : "END_01",
      "leftPos" : 890,
      "logicNodeType" : "END",
      "name" : "结束",
      "getReturnParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "returnType" : "LOGICPARAM",
      "topPos" : -200,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_02",
      "leftPos" : 1066,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_05"
        },
        "name" : "立即激活",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "LTANDEQ",
            "dstFieldName" : "EFFECT_TIME",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[EFFECT_TIME] 小于等于(<=) 1",
            "paramType" : "CURTIME",
            "paramValue" : "1"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "未到生效时间",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "GT",
            "dstFieldName" : "EFFECT_TIME",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[EFFECT_TIME] 大于(>) 1",
            "paramType" : "CURTIME",
            "paramValue" : "1"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "RULE_DATA",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "activeRule"
        },
        "paramAction" : "SETPARAMVALUE",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "ID",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "activeRule"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "NAME",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "activeRule"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "NAME",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "shifts"
        },
        "paramAction" : "BINDPARAM",
        "srcFieldName" : "shifts",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "SCHEDULE_TYPE",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "activeRule"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "SCHEDULE_TYPE",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "group_shifts"
        },
        "paramAction" : "BINDPARAM",
        "srcFieldName" : "group_shifts",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : -202,
      "parallelOutput" : true
    }, {
      "codeName" : "LOOPSUBCALL_03",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "group_shift"
      },
      "leftPos" : 1220,
      "logicNodeType" : "LOOPSUBCALL",
      "name" : "循环子调用",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_05"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_03"
        },
        "subCallLink" : true
      } ],
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "group_shifts"
      },
      "topPos" : 460,
      "parallelOutput" : true
    }, {
      "code" : "//1、排班日期区间为五个月，即[ 前三个月 - 当前月 - 下个月]\r\n//2、生成新排班时需要生成生效日期起到排班日期区间止的所有排班\r\ndef activeRule = logic.param('activeRule').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\ndef _default = logic.param('Default').getReal()\r\ndef effect_time = _default.get(\"effect_time\")\r\n\r\n// 获取当前日期\r\ndef now = new Date()\r\ndef calendar = Calendar.getInstance()\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ncalendar.setTime(now)\r\n\r\n //限制生成区间\r\ndef limitTime = _default.get(\"limitTime\")\r\ndef limitCal = Calendar.getInstance()\r\nif(limitTime ){\r\n    if (limitTime instanceof String) {\r\n        limitCal.setTime(sdf.parse(limitTime))\r\n    } else {\r\n        limitCal.setTime(limitTime)\r\n    }\r\n}\r\n \r\n// 跳转到下个月\r\ncalendar.add(Calendar.MONTH, 1)\r\n// 设置为下个月最后一天\r\ncalendar.set(Calendar.DAY_OF_MONTH, calendar.getActualMaximum(Calendar.DAY_OF_MONTH))\r\n    \r\n// 排班结束日期\r\ndef endDate = sdf.format(calendar.getTime())\r\n\r\n\r\n// 排班生成\r\ndef startCal = Calendar.getInstance()\r\nstartCal.setTime(effect_time)\r\n    \r\n// 解析结束日期\r\ndef endCal = Calendar.getInstance()\r\nendCal.setTime(sdf.parse(endDate))\r\n\r\n// 遍历日期区间\r\nwhile (!startCal.after(endCal)) {\r\n    \r\n    if(limitTime && startCal.before(limitCal)){\r\n        startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n        continue \r\n    }\r\n\r\n    def checkinDate = startCal.getTime()\r\n\r\n    def schedule = sys.entity('attendance_schedule')\r\n    schedule.rule_name = activeRule.get(\"name\")\r\n    schedule.rule_id = activeRule.get(\"id\")\r\n    schedule.checkin_date =  sdf.format(checkinDate)\r\n    schedule.workday = 0\r\n\r\n    newSchedules.add(schedule)\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}",
      "codeName" : "RAWSFCODE_016",
      "codeType" : "Groovy",
      "leftPos" : 1066,
      "logicNodeType" : "RAWSFCODE",
      "name" : "免考勤",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_04"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_016"
        }
      } ],
      "topPos" : 710,
      "parallelOutput" : true
    }, {
      "code" : "def activeShifts = logic.param('activeShifts').getReal()\r\ndef activeRule = logic.param('activeRule').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\ndef _default = logic.param('Default').getReal()\r\ndef effect_time = _default.get(\"effect_time\")\r\n\r\ndef rest = _default.get(\"rest\")\r\ndef work = _default.get(\"work\")\r\n\r\ndef group_shift = logic.param('group_shift').getReal()\r\ndef workdays = group_shift.get(\"workdays\")\r\n\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ndef endCal = Calendar.getInstance()\r\nendCal.add(Calendar.MONTH, 1)\r\nendCal.set(Calendar.DAY_OF_MONTH, endCal.getActualMaximum(Calendar.DAY_OF_MONTH))\r\n\r\n //限制生成区间\r\ndef limitTime = _default.get(\"limitTime\")\r\ndef limitCal = Calendar.getInstance()\r\nif(limitTime ){\r\n    if (limitTime instanceof String) {\r\n        limitCal.setTime(sdf.parse(limitTime))\r\n    } else {\r\n        limitCal.setTime(limitTime)\r\n    }\r\n}\r\n\r\ndef startCal = Calendar.getInstance()\r\nstartCal.setTime(effect_time)\r\nstartCal.set(Calendar.HOUR_OF_DAY, 0)\r\nstartCal.set(Calendar.MINUTE, 0)\r\nstartCal.set(Calendar.SECOND, 0)\r\nstartCal.set(Calendar.MILLISECOND, 0)\r\n\r\n// 核心逻辑：构建天数循环映射\r\ndef workdayNum = rest+work;\r\ndef cycleMap = [:]\r\nworkdays.eachWithIndex { workday, index ->\r\n    if (index + 1 <= workdayNum) {\r\n        cycleMap[(index + 1)] = workday\r\n    }\r\n}\r\n\r\n// 基准日设置\r\nDate baseDate = startCal.getTime()\r\nwhile (!startCal.after(endCal)) {\r\n\r\n    if(limitTime && startCal.before(limitCal)){\r\n        startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n        continue \r\n    }\r\n\r\n    Date checkinDate = startCal.getTime()\r\n    long offsetMillis = checkinDate.time - baseDate.time\r\n    int offsetDays = (offsetMillis / (24 * 60 * 60 * 1000)) as int\r\n    int dayInCycle = (offsetDays % workdayNum) + 1\r\n\r\n    def workdayConfig = cycleMap[dayInCycle]\r\n    if (workdayConfig) {\r\n        def shift = workdayConfig.get(\"is_work\") == 1 ? activeShifts[0] : null\r\n        def shiftData = shift?.shift_data ?: [:]\r\n        def workTime = shiftData?.get(\"work_times\") ?: []\r\n\r\n        def schedule = sys.entity('attendance_schedule')\r\n        schedule.rule_data = activeRule.rule_data\r\n        schedule.rule_name = activeRule.name\r\n        schedule.rule_id = activeRule.id\r\n        schedule.checkin_date = sdf.format(checkinDate)\r\n        schedule.shift_data = shiftData\r\n        schedule.work_time = workTime\r\n        schedule.workday = shiftData ? 1 : 0\r\n        newSchedules.add(schedule)\r\n    }\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}",
      "codeName" : "RAWSFCODE_05",
      "codeType" : "Groovy",
      "leftPos" : 1718,
      "logicNodeType" : "RAWSFCODE",
      "name" : "上A休B构造新排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_014"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_05"
        }
      } ],
      "topPos" : 800,
      "parallelOutput" : true
    }, {
      "code" : "//1、排班日期区间为五个月，即[ 前三个月 - 当前月 - 下个月]\r\n//2、生成新排班时需要生成生效日期起到排班日期区间止的所有排班\r\n\r\ndef activeShifts  = logic.param('activeShifts').getReal()\r\ndef activeRule = logic.param('activeRule').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\ndef _default = logic.param('Default').getReal()\r\n\r\ndef effect_time = _default.get(\"effect_time\")\r\ndef workdays = _default.get(\"workdays\")\r\n\r\n// 获取当前日期\r\ndef now = new Date()\r\ndef calendar = Calendar.getInstance()\r\n\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ncalendar.setTime(now)\r\n\r\n //限制生成区间\r\ndef limitTime = _default.get(\"limitTime\")\r\ndef limitCal = Calendar.getInstance()\r\nif(limitTime != null && limitTime !=\"\"){\r\n    println(\"limitTime\"+limitTime)\r\n    if (limitTime instanceof String) {\r\n        limitCal.setTime(sdf.parse(limitTime))\r\n    } else {\r\n        limitCal.setTime(limitTime)\r\n    }\r\n}\r\n// 跳转到下个月\r\ncalendar.add(Calendar.MONTH, 1)\r\n// 设置为下个月最后一天\r\ncalendar.set(Calendar.DAY_OF_MONTH, calendar.getActualMaximum(Calendar.DAY_OF_MONTH))\r\n\r\n// 排班结束日期\r\ndef endDate = sdf.format(calendar.getTime())\r\n\r\n// 计算当天排班班次\r\ndef generateShiftData = { Date checkinDate, List workdaysParam, List activeShiftsParam ->\r\n    // 1. 确定当前日期是周几（1-7对应周一到周日）\r\n    def calendarInner = Calendar.getInstance()\r\n    calendarInner.setTime(checkinDate)\r\n    int dayOfWeek = calendarInner.get(Calendar.DAY_OF_WEEK)\r\n    int dayNumber = (dayOfWeek == Calendar.SUNDAY) ? 7 : dayOfWeek - 1\r\n\r\n    // 2. 查找匹配的工作日配置\r\n    def workdayConfig = workdaysParam.find { it.day_number == dayNumber }\r\n\r\n    // 3. 未找到工作日配置时返回空班次\r\n    if (!workdayConfig || !workdayConfig.shift_id) {\r\n        // print \"未找到工作日配置时返回空班次, ${workdayConfig}!\"\r\n        return null\r\n    }\r\n\r\n    // 4. 查找对应的班次信息\r\n    def shift = activeShiftsParam.find { it.id == workdayConfig.shift_id }\r\n\r\n    // 5. 未找到班次时返回空班次\r\n    if (!shift || !shift.shift_data) {\r\n        // print \"未找到班次时返回空班次, ${shift}!\"\r\n        return null\r\n    }\r\n\r\n    // 6. 返回班次数据\r\n    // print \"返回班次数据, ${shift}!\"\r\n    return shift.shift_data\r\n}\r\n\r\n// 排班生成\r\ndef startCal = Calendar.getInstance()\r\nstartCal.setTime(effect_time)\r\n\r\n// 解析结束日期\r\ndef endCal = Calendar.getInstance()\r\nendCal.setTime(sdf.parse(endDate))\r\n\r\n// 遍历日期区间\r\nwhile (!startCal.after(endCal)) {\r\n\r\n    if(limitTime && startCal.before(limitCal)){\r\n        startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n        continue\r\n    }\r\n    def checkinDate = startCal.getTime()\r\n    def shift_data = generateShiftData(checkinDate, workdays, activeShifts)\r\n    def workTime = shift_data?.get(\"work_times\") ?: null\r\n\r\n    def schedule = sys.entity('attendance_schedule')\r\n    schedule.rule_data = activeRule.get(\"rule_data\")\r\n    schedule.rule_name = activeRule.get(\"name\")\r\n    schedule.rule_id = activeRule.get(\"id\")\r\n    schedule.checkin_date =  sdf.format(checkinDate)\r\n    schedule.shift_data = shift_data\r\n    schedule.work_time = workTime\r\n    schedule.workday = shift_data != null ? 1 : 0\r\n    // schedule.id = UUID.randomUUID().toString()\r\n\r\n    newSchedules.add(schedule)\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n\r\n}",
      "codeName" : "RAWSFCODE_02",
      "codeType" : "Groovy",
      "leftPos" : 530,
      "logicNodeType" : "RAWSFCODE",
      "name" : "固定排班/灵活打卡构造新排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_015"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_02"
        }
      } ],
      "topPos" : 860,
      "parallelOutput" : true
    }, {
      "code" : "//1、排班日期区间为五个月，即[ 前三个月 - 当前月 - 下个月]\r\n//2、生成新排班时需要生成生效日期起到排班日期区间止的所有排班\r\ndef activeRule = logic.param('activeRule').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\ndef _default = logic.param('Default').getReal()\r\ndef effect_time = _default.get(\"effect_time\")\r\ndef workdays = _default.get(\"workdays\")\r\n\r\n// 获取当前日期\r\ndef now = new Date()\r\ndef calendar = Calendar.getInstance()\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ncalendar.setTime(now)\r\n\r\n  //限制生成区间\r\ndef limitTime = _default.get(\"limitTime\")\r\ndef limitCal = Calendar.getInstance()\r\nif(limitTime ){\r\n    if (limitTime instanceof String) {\r\n        limitCal.setTime(sdf.parse(limitTime))\r\n    } else {\r\n        limitCal.setTime(limitTime)\r\n    }\r\n}\r\n\r\n// 跳转到下个月\r\ncalendar.add(Calendar.MONTH, 1)\r\n// 设置为下个月最后一天\r\ncalendar.set(Calendar.DAY_OF_MONTH, calendar.getActualMaximum(Calendar.DAY_OF_MONTH))\r\n    \r\n// 排班结束日期\r\ndef endDate = sdf.format(calendar.getTime())\r\n\r\n// 排班生成\r\ndef startCal = Calendar.getInstance()\r\nstartCal.setTime(effect_time)\r\n    \r\n// 解析结束日期\r\ndef endCal = Calendar.getInstance()\r\nendCal.setTime(sdf.parse(endDate))\r\n\r\n// 遍历日期区间\r\nwhile (!startCal.after(endCal)) {\r\n\r\n    if(limitTime && startCal.before(limitCal)){\r\n        startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n        continue \r\n    }    \r\n    \r\n    def checkinDate = startCal.getTime()\r\n\r\n    def schedule = sys.entity('attendance_schedule')\r\n    schedule.rule_data = activeRule.get(\"rule_data\")\r\n    schedule.rule_name = activeRule.get(\"name\")\r\n    schedule.rule_id = activeRule.get(\"id\")\r\n    schedule.checkin_date =  sdf.format(checkinDate)\r\n    // schedule.id = UUID.randomUUID().toString() \r\n\r\n    newSchedules.add(schedule)\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}",
      "codeName" : "RAWSFCODE_06",
      "codeType" : "Groovy",
      "leftPos" : 754,
      "logicNodeType" : "RAWSFCODE",
      "name" : "手动排班构造新排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_015"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_06"
        }
      } ],
      "topPos" : 860,
      "parallelOutput" : true
    }, {
      "code" : "def group_shifts = logic.param('group_shifts').getReal()\r\ndef members = logic.param('members').getReal()\r\ndef depts = logic.param('depts').getReal()\r\n\r\ndef uniqueMemberIdMap = new HashMap()\r\ndef uniqueDeptIdMap = new HashMap()\r\n\r\ndef _default = logic.param('Default').getReal()\r\nif(group_shifts!=null && _default.schedule_type != \"class_inversion\" && _default.schedule_type != \"work_rest\" ){\r\n    group_shifts.each{ group_shift ->\r\n        if (group_shift.members != null) {\r\n            group_shift.members.each { member ->\r\n                if(member.type == \"person\"){\r\n                    uniqueMemberIdMap.put(member.user_id, member)\r\n                }\r\n                if(member.type == \"dept\"){\r\n                    uniqueDeptIdMap.put(member.user_id, member)\r\n                }\r\n            }\r\n        }\r\n    }\r\n}else{\r\n    def group_members = logic.param('group_members').getReal()\r\n    group_members.each { member ->\r\n        if(member.type == \"person\"){\r\n            uniqueMemberIdMap.put(member.user_id, member)\r\n        }\r\n        if(member.type == \"dept\"){\r\n            uniqueDeptIdMap.put(member.user_id, member)\r\n        }\r\n    }\r\n}\r\n\r\nmembers.addAll(uniqueMemberIdMap.values())\r\ndepts.addAll(uniqueDeptIdMap.values())\r\n\r\n\r\n// def memberIds = uniqueMemberIdMap.keySet().collect { \"'$it'\" }.join(',')\r\n// def deptIds = uniqueDeptIdMap.keySet().collect { \"'$it'\" }.join(',')\r\n\r\n// _default.set(\"memberIds\",memberIds)\r\n\r\n\r\n\r\n",
      "codeName" : "RAWSFCODE_04",
      "codeType" : "Groovy",
      "leftPos" : 1066,
      "logicNodeType" : "RAWSFCODE",
      "name" : "计算规则成员",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_05"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_04"
        }
      } ],
      "topPos" : 960
    }, {
      "code" : "def newSchedules = logic.param('newSchedules').getReal()\r\ndef holidays = logic.param('lastRldata').getReal()\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\n\r\nif (newSchedules && newSchedules.size() > 0 && holidays && holidays.size() > 0){\r\n    newSchedules.each { schedule ->\r\n        def checkin_date = sdf.format(schedule.checkin_date)\r\n        def holiday = holidays.find { it.get(\"date\") == checkin_date }\r\n        if(holiday != null ){\r\n            schedule.shift_data = null\r\n            schedule.work_time = null\r\n            schedule.workday = 0\r\n        }\r\n    }\r\n}\r\n",
      "codeName" : "RAWSFCODE_014",
      "codeType" : "Groovy",
      "leftPos" : 1501,
      "logicNodeType" : "RAWSFCODE",
      "name" : "判断节假日",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_04"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_014"
        }
      } ],
      "topPos" : 960,
      "parallelOutput" : true
    }, {
      "code" : "def newSchedules = logic.param('newSchedules').getReal()\r\ndef holidays = logic.param('lastRldata').getReal()\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\n\r\nif (newSchedules && newSchedules.size() > 0 && holidays && holidays.size() > 0){\r\n    newSchedules.each { schedule ->\r\n        def checkin_date = sdf.format(schedule.checkin_date)\r\n        def holiday = holidays.find { it.get(\"date\") == checkin_date }\r\n        if(holiday != null ){\r\n            schedule.shift_data = null\r\n            schedule.work_time = null\r\n            schedule.workday = 0\r\n        }\r\n    }\r\n}\r\n",
      "codeName" : "RAWSFCODE_015",
      "codeType" : "Groovy",
      "leftPos" : 754,
      "logicNodeType" : "RAWSFCODE",
      "name" : "判断节假日",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_04"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_015"
        }
      } ],
      "topPos" : 1040,
      "parallelOutput" : true
    }, {
      "codeName" : "RAWSQLCALL_05",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "curActiveMember"
      },
      "leftPos" : 1066,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "查询当前生效规则成员",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_02"
        },
        "name" : "depts不为空",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "size",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "depts"
            },
            "logicType" : "SINGLE",
            "name" : "depts[size] 不等于(<>) 0",
            "paramValue" : "0"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_05"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_08"
        },
        "name" : "depts为空",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_05"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "sql" : "select MEMBER_ID,MEMBER_NAME,RULE_ID FROM attendance_schedule s WHERE  rule_id != ? and checkin_date >= CURDATE()\n AND EXISTS (\n    SELECT 1 \n    FROM attendance_activate_rule rule  \n    WHERE \n      rule.id = s.rule_id \n  )\n\tGROUP BY s.MEMBER_ID",
      "topPos" : 1150,
      "fillDstLogicParam" : true,
      "ignoreResetDstLogicParam" : false,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_01",
      "leftPos" : 1618,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "N_DEPT_ID_EQ",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "empFilter"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "USER_ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "deptTemp"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "employees"
        },
        "paramAction" : "RENEWPARAM"
      } ],
      "topPos" : 1150,
      "parallelOutput" : true
    }, {
      "codeName" : "DEDATASET_01",
      "getDstPSDEDataSet" : {
        "modelref" : true,
        "id" : "deptall"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "empFilter"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/employee_management/PSDATAENTITIES/employee.json"
      },
      "leftPos" : 1854,
      "logicNodeType" : "DEDATASET",
      "name" : "查询部门下所有人员",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_09"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_01"
        }
      } ],
      "getRetPSDELogicParam" : {
        "modelref" : true,
        "id" : "employees"
      },
      "topPos" : 1150,
      "parallelOutput" : true
    }, {
      "code" : "def employees = logic.param('employees').getReal()\r\ndef allDeptEmp = logic.param('allDeptEmp').getReal()\r\ndef curActiveMember = logic.param('curActiveMember').getReal()\r\ndef members = logic.param('members').getReal()\r\n\r\nallDeptEmp.addAll(employees)\r\n\r\ndef uniqueMemberIdMap = new HashMap()\r\n// 先将原始 members 放入Map\r\nmembers.each { member ->\r\n    uniqueMemberIdMap.put(member.user_id, member)\r\n}\r\n\r\nallDeptEmp.each { emp ->\r\n    def isAlreadyActive = curActiveMember.find { it.get(\"member_id\") == emp.id }\r\n    if (isAlreadyActive) {\r\n        return\r\n    }\r\n\r\n    def member = sys.entity('Attendance_group_shift_member')\r\n    member.set(\"user_id\",emp.id)\r\n    member.set(\"name\",emp.name)\r\n    uniqueMemberIdMap.put(member.user_id, member)\r\n}\r\n\r\nmembers.clear()\r\nmembers.addAll(uniqueMemberIdMap.values())\r\n",
      "codeName" : "RAWSFCODE_09",
      "codeType" : "Groovy",
      "leftPos" : 2088,
      "logicNodeType" : "RAWSFCODE",
      "name" : "过滤出不在其他生效规则内的人员",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_04"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_09"
        }
      } ],
      "topPos" : 1150,
      "parallelOutput" : true
    }, {
      "codeName" : "RAWSQLCALL_04",
      "leftPos" : 2288,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "将该部门在其他生效规则内移除",
      "getPSDELogicNodeParams" : [ {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "USER_ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "deptTemp"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "sql" : "DELETE FROM attendance_group_shift_member WHERE  user_id = ? and  rule_id != ?\n AND EXISTS (\n    SELECT 1 \n    FROM attendance_rule rule  \n    WHERE \n      rule.id = attendance_group_shift_member.rule_id \n      AND rule.IS_ACTIVATE  = 1\n  )",
      "topPos" : 1150,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_08",
      "leftPos" : 1066,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_04"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_08"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "members",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "paramAction" : "SETPARAMVALUE",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "members"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 1312,
      "parallelOutput" : true
    }, {
      "codeName" : "DEBUGPARAM_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "lastSchedules"
      },
      "leftPos" : 1453,
      "logicNodeType" : "DEBUGPARAM",
      "name" : "生成后的新排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION_04"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        }
      } ],
      "topPos" : 1312,
      "parallelOutput" : true
    }, {
      "codeName" : "DEDATASET_02",
      "getDstPSDEDataSet" : {
        "modelref" : true,
        "id" : "user"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "empFilter"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/employee_management/PSDATAENTITIES/employee.json"
      },
      "leftPos" : 754,
      "logicNodeType" : "DEDATASET",
      "name" : "获取所有人员",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_012"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_02"
        }
      } ],
      "getRetPSDELogicParam" : {
        "modelref" : true,
        "id" : "employees"
      },
      "topPos" : 1372,
      "parallelOutput" : true
    }, {
      "codeName" : "LOOPSUBCALL_04",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "memberTemp"
      },
      "leftPos" : 1066,
      "logicNodeType" : "LOOPSUBCALL",
      "name" : "遍历规则人员",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_07"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_04"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_06"
        },
        "name" : "删除旧数据",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_04"
        },
        "subCallLink" : true
      } ],
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "members"
      },
      "topPos" : 1432,
      "parallelOutput" : true
    }, {
      "code" : "def members = logic.param('members').getReal()\r\ndef lastSchedules = logic.param('lastSchedules').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\n\r\nmembers.each { member ->\r\n    if (member == null) return\r\n    newSchedules.each { schedule ->\r\n        def newSchedule = sys.entity('attendance_schedule')\r\n        schedule.copyTo(newSchedule)\r\n        newSchedule.member_id = member.user_id\r\n        newSchedule.member_name = member.name\r\n        lastSchedules.add(newSchedule)\r\n    }\r\n}",
      "codeName" : "RAWSFCODE_07",
      "codeType" : "Groovy",
      "leftPos" : 1280,
      "logicNodeType" : "RAWSFCODE",
      "name" : "为规则人员生成新排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_07"
        }
      } ],
      "topPos" : 1432,
      "parallelOutput" : true
    }, {
      "codeName" : "DEACTION_04",
      "getDstPSDEAction" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_schedule/PSDEACTIONS/Create.json"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "lastSchedules"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_schedule.json"
      },
      "leftPos" : 1482,
      "logicNodeType" : "DEACTION",
      "name" : "保存排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RESETPARAM_01"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "ISNULL",
            "dstFieldName" : "limitTime",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[limitTime] 值为空(Nil)"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION_04"
        }
      } ],
      "topPos" : 1432,
      "parallelOutput" : true
    }, {
      "codeName" : "RESETPARAM_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "group_shift"
      },
      "leftPos" : 1718,
      "logicNodeType" : "RESETPARAM",
      "name" : "重置参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE18"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RESETPARAM_01"
        }
      } ],
      "topPos" : 1432,
      "parallelOutput" : true
    }, {
      "code" : "def employees = logic.param('employees').getReal()\r\ndef members = logic.param('members').getReal()\r\n\r\n\r\ndef uniqueMemberIdMap = new HashMap()\r\n\r\nemployees.each { emp ->\r\n    def member = sys.entity('Attendance_group_shift_member')\r\n    member.set(\"user_id\",emp.id)\r\n    member.set(\"name\",emp.name)\r\n    uniqueMemberIdMap.put(member.user_id, member)\r\n}\r\n\r\nmembers.clear()\r\nmembers.addAll(uniqueMemberIdMap.values())\r\n",
      "codeName" : "RAWSFCODE_012",
      "codeType" : "Groovy",
      "leftPos" : 754,
      "logicNodeType" : "RAWSFCODE",
      "name" : "人员转换",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_05"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_012"
        }
      } ],
      "topPos" : 1500,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_06",
      "leftPos" : 1066,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_07"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "ISNOTNULL",
            "dstFieldName" : "limitTime",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[limitTime] 值不为空(NotNil)"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_06"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_02"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "ISNULL",
            "dstFieldName" : "limitTime",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[limitTime] 值为空(Nil)"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_06"
        }
      } ],
      "topPos" : 1600,
      "parallelOutput" : true
    }, {
      "code" : "def curActiveMember = logic.param('curActiveMember').getReal()\r\ndef members = logic.param('members').getReal()\r\ndef changes = logic.param('changes').getReal()\r\n\r\ndef ruleIdSet = members.collect { member ->\r\n    curActiveMember.findResult(null) { it.get(\"member_id\") == member.user_id ? it.get(\"rule_id\") : null }\r\n}.findAll { it != null }.toSet()\r\n\r\nruleIdSet.each { ruleId ->\r\n    def newRule = sys.entity('attendance_activate_rule')\r\n    newRule.set('id', ruleId)\r\n    changes.add(newRule)\r\n}",
      "codeName" : "RAWSFCODE18",
      "codeType" : "Groovy",
      "leftPos" : 1482,
      "logicNodeType" : "RAWSFCODE",
      "name" : "查找需更新的activeRule",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL5"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE18"
        }
      } ],
      "topPos" : 1600
    }, {
      "codeName" : "LOOPSUBCALL5",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "tempRule"
      },
      "leftPos" : 1482,
      "logicNodeType" : "LOOPSUBCALL",
      "name" : "遍历需需更新规则",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM7"
        },
        "name" : "更新激活规则",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL5"
        },
        "subCallLink" : true
      } ],
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "changes"
      },
      "topPos" : 1720,
      "parallelOutput" : true
    }, {
      "codeName" : "RAWSQLCALL_02",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "members"
      },
      "leftPos" : 1066,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "删除人员旧排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_03"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_02"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "EFFECT_TIME",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "USER_ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "memberTemp"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "sql" : "DELETE FROM attendance_schedule WHERE  checkin_date >= ? AND member_id = ?",
      "topPos" : 1770,
      "fillDstLogicParam" : true,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM7",
      "leftPos" : 1482,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION4"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM7"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "changeRule"
        },
        "name" : " ==> changeRule",
        "paramAction" : "RENEWPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "ret"
        },
        "name" : " ==> ret",
        "paramAction" : "RENEWPARAM"
      } ],
      "topPos" : 1840,
      "parallelOutput" : true
    }, {
      "codeName" : "RAWSQLCALL_03",
      "leftPos" : 1066,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "将该人员在其他生效规则内移除",
      "getPSDELogicNodeParams" : [ {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "USER_ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "memberTemp"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "sql" : "DELETE FROM attendance_group_shift_member WHERE  user_id = ? and  rule_id != ?\n AND EXISTS (\n    SELECT 1 \n    FROM attendance_rule rule  \n    WHERE \n      rule.id = attendance_group_shift_member.rule_id \n      AND rule.IS_ACTIVATE  = 1\n  )",
      "topPos" : 1932,
      "parallelOutput" : true
    }, {
      "codeName" : "DEACTION4",
      "getDstPSDEAction" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/Get.json"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "tempRule"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "leftPos" : 1482,
      "logicNodeType" : "DEACTION",
      "name" : "实体行为",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM8"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "ISNOTNULL",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "ret"
            },
            "logicType" : "SINGLE",
            "name" : "ret 值不为空(NotNil)"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION4"
        }
      } ],
      "getRetPSDELogicParam" : {
        "modelref" : true,
        "id" : "ret"
      },
      "topPos" : 1950
    }, {
      "codeName" : "PREPAREPARAM8",
      "leftPos" : 1482,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION5"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM8"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "RULE_DATA",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "changeRule"
        },
        "name" : "ret ==> changeRule[RULE_DATA]",
        "paramAction" : "SETPARAMVALUE",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "ret"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "ID",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "changeRule"
        },
        "name" : "ret[ID] ==> changeRule[ID]",
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "ret"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "NAME",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "changeRule"
        },
        "name" : "ret[NAME] ==> changeRule[NAME]",
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "NAME",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "ret"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "SCHEDULE_TYPE",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "changeRule"
        },
        "name" : "ret[SCHEDULE_TYPE] ==> changeRule[SCHEDULE_TYPE]",
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "SCHEDULE_TYPE",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "ret"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 2072,
      "parallelOutput" : true
    }, {
      "codeName" : "DEACTION5",
      "getDstPSDEAction" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_rule/PSDEACTIONS/Save.json"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "changeRule"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_rule.json"
      },
      "leftPos" : 1482,
      "logicNodeType" : "DEACTION",
      "name" : "更新rule_data",
      "topPos" : 2212
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "entityParam" : true
    }, {
      "codeName" : "CurRuleSchedules",
      "logicName" : "当前规则下的排班",
      "name" : "当前规则下的排班",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_schedule.json"
      },
      "entityPageParam" : true
    }, {
      "codeName" : "activeRule",
      "logicName" : "激活规则",
      "name" : "激活规则",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_rule.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "activeShift",
      "logicName" : "activeShift",
      "name" : "activeShift",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_shift.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "activeShifts",
      "logicName" : "activeShifts",
      "name" : "activeShifts",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_shift.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "allDeptEmp",
      "logicName" : "allDeptEmp",
      "name" : "allDeptEmp",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "allmembers",
      "logicName" : "allmembers",
      "name" : "allmembers",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "calendarFilter",
      "logicName" : "calendarFilter",
      "name" : "calendarFilter",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar_leaves.json"
      },
      "filterParam" : true
    }, {
      "codeName" : "changeMembers",
      "logicName" : "changeMembers",
      "name" : "changeMembers",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "changeRule",
      "logicName" : "changeRule",
      "name" : "changeRule",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_rule.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "changes",
      "logicName" : "changes",
      "memo" : "需要更新的ruleids",
      "name" : "changes",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_rule.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "curActiveMember",
      "logicName" : "curActiveMember",
      "name" : "curActiveMember",
      "entityListParam" : true
    }, {
      "codeName" : "curRldata",
      "logicName" : "curRldata",
      "name" : "curRldata",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar_leaves.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "deptTemp",
      "logicName" : "deptTemp",
      "name" : "deptTemp",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "depts",
      "logicName" : "depts",
      "name" : "depts",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "effect_time",
      "logicName" : "effect_time",
      "name" : "effect_time",
      "entityParam" : true
    }, {
      "codeName" : "empFilter",
      "logicName" : "empFilter",
      "name" : "empFilter",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/employee_management/PSDATAENTITIES/employee.json"
      },
      "filterParam" : true
    }, {
      "codeName" : "employees",
      "logicName" : "employees",
      "name" : "employees",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/employee_management/PSDATAENTITIES/employee.json"
      },
      "entityPageParam" : true
    }, {
      "codeName" : "group_members",
      "logicName" : "group_members",
      "name" : "group_members",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "group_shift",
      "logicName" : "group_shift",
      "name" : "group_shift",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "group_shifts",
      "logicName" : "组排班",
      "name" : "组排班",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "holidays",
      "logicName" : "holidays",
      "name" : "holidays",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar_leaves.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "lastRldata",
      "logicName" : "lastRldata",
      "name" : "lastRldata",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar_leaves.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "lastSchedules",
      "logicName" : "新排班",
      "name" : "新排班",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_schedule.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "memberTemp",
      "logicName" : "memberTemp",
      "name" : "memberTemp",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "members",
      "logicName" : "members",
      "name" : "members",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "newSchedules",
      "logicName" : "newSchedules",
      "name" : "newSchedules",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_schedule.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "ret",
      "logicName" : "ret",
      "name" : "ret",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "scheduleFilter",
      "logicName" : "scheduleFilter",
      "name" : "scheduleFilter",
      "filterParam" : true
    }, {
      "codeName" : "scheduleTemp",
      "logicName" : "scheduleTemp",
      "name" : "scheduleTemp",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_schedule.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "scheduleTemps",
      "logicName" : "scheduleTemps",
      "name" : "scheduleTemps",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_schedule.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "shifts",
      "logicName" : "shifts",
      "name" : "shifts",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_shift.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "srfactionparam",
      "logicName" : "srfactionparam",
      "name" : "srfactionparam",
      "entityListParam" : true
    }, {
      "codeName" : "temp",
      "logicName" : "temp",
      "name" : "temp",
      "entityParam" : true
    }, {
      "codeName" : "tempRule",
      "logicName" : "tempRule",
      "name" : "tempRule",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_rule.json"
      },
      "entityParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "all",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/all.json",
    "logicName" : "完整规则",
    "name" : "完整规则",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : 200,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET1"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : 200,
      "parallelOutput" : true
    }, {
      "codeName" : "DEDATASET1",
      "getDstPSDEDataSet" : {
        "modelref" : true,
        "id" : "ALL"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "leftPos" : 384,
      "logicNodeType" : "DEDATASET",
      "name" : "实体数据集",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL1"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET1"
        }
      } ],
      "getRetPSDELogicParam" : {
        "modelref" : true,
        "id" : "rules"
      },
      "topPos" : 208
    }, {
      "codeName" : "RAWSQLCALL1",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "total_members"
      },
      "leftPos" : 662,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "直接SQL调用",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE1"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL1"
        }
      } ],
      "sql" : "SELECT \r\n    RULE_ID,\r\n    COUNT(DISTINCT MEMBER_ID) AS total_members\r\nFROM attendance_schedule\r\nWHERE checkin_date >= CURDATE()\r\nGROUP BY RULE_ID",
      "topPos" : 208,
      "fillDstLogicParam" : true,
      "ignoreResetDstLogicParam" : false
    }, {
      "code" : "def rules = logic.param('rules').getReal()\r\ndef total_members = logic.param('total_members').getReal()\r\n\r\nif(rules){\r\n    if (!total_members){\r\n        // 创建rule_id到total_members的映射\r\n        def memberMap = total_members.collectEntries { member ->\r\n            [(member.get(\"rule_id\")): member.get(\"total_members\")]\r\n        }\r\n        // 遍历rules并赋值\r\n        rules.each { rule ->\r\n            if(rule.get(\"is_activate\") == 0){\r\n                rule.set(\"total_members\",\"未生效\")\r\n            }\r\n            if(rule.get(\"is_activate\") == 1){\r\n                def memberCount = memberMap.get(rule.get(\"id\"))\r\n                rule.set(\"total_members\",memberCount?memberCount:0)\r\n            }\r\n        }\r\n    }\r\n    \r\n}",
      "codeName" : "RAWSFCODE1",
      "codeType" : "Groovy",
      "leftPos" : 662,
      "logicNodeType" : "RAWSFCODE",
      "name" : "执行脚本代码",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END1"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE1"
        }
      } ],
      "topPos" : 378
    }, {
      "codeName" : "END1",
      "leftPos" : 702,
      "logicNodeType" : "END",
      "name" : "结束",
      "getReturnParam" : {
        "modelref" : true,
        "id" : "rules"
      },
      "returnType" : "LOGICPARAM",
      "topPos" : 560,
      "parallelOutput" : true
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "filterParam" : true
    }, {
      "codeName" : "rules",
      "logicName" : "rules",
      "name" : "rules",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "entityPageParam" : true
    }, {
      "codeName" : "total_members",
      "logicName" : "total_members",
      "name" : "total_members",
      "entityListParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "attendance_scheduleCalendar",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/attendance_scheduleCalendar.json",
    "logicName" : "计算日历排班",
    "name" : "计算日历排班",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : 890,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_07"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "ISNOTNULL",
            "dstFieldName" : "rq",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[rq] 值不为空(NotNil)"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : -350,
      "parallelOutput" : true
    }, {
      "codeName" : "DEDATASET_01",
      "getDstPSDEDataSet" : {
        "modelref" : true,
        "id" : "public"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "Filter"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar_leaves.json"
      },
      "leftPos" : 850,
      "logicNodeType" : "DEDATASET",
      "name" : "实体数据集",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_05"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_01"
        }
      } ],
      "getRetPSDELogicParam" : {
        "modelref" : true,
        "id" : "leaves"
      },
      "topPos" : 90
    }, {
      "codeName" : "DEBUGPARAM_02",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "lastRldata"
      },
      "leftPos" : 850,
      "logicNodeType" : "DEBUGPARAM",
      "name" : "调试逻辑参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "上A休B/N班倒-休息日不同",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "groupOP" : "OR",
            "logicType" : "GROUP",
            "name" : "OR",
            "getPSDELogicLinkConds" : [ {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) work_rest",
              "paramValue" : "work_rest"
            }, {
              "groupOP" : "OR",
              "logicType" : "GROUP",
              "name" : "OR",
              "getPSDELogicLinkConds" : [ {
                "condOP" : "EQ",
                "dstFieldName" : "SCHEDULE_TYPE",
                "getDstLogicParam" : {
                  "modelref" : true,
                  "id" : "Default"
                },
                "logicType" : "SINGLE",
                "name" : "Default[SCHEDULE_TYPE] 等于(=) class_inversion",
                "paramValue" : "class_inversion"
              }, {
                "condOP" : "EQ",
                "dstFieldName" : "SAME_RESTDAY",
                "getDstLogicParam" : {
                  "modelref" : true,
                  "id" : "Default"
                },
                "logicType" : "SINGLE",
                "name" : "Default[SAME_RESTDAY] 等于(=) 0",
                "paramValue" : "0"
              } ]
            } ]
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_02"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_04"
        },
        "name" : "大小周",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) alternate_week",
            "paramValue" : "alternate_week"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_02"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_06"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) class_inversion",
            "paramValue" : "class_inversion"
          }, {
            "condOP" : "EQ",
            "dstFieldName" : "SAME_RESTDAY",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SAME_RESTDAY] 等于(=) 1",
            "paramValue" : "1"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_02"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_03"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "groupOP" : "OR",
            "logicType" : "GROUP",
            "name" : "OR",
            "getPSDELogicLinkConds" : [ {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) fixed",
              "paramValue" : "fixed"
            }, {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) flexible",
              "paramValue" : "flexible"
            } ]
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_02"
        }
      } ],
      "topPos" : 380,
      "parallelOutput" : true
    }, {
      "code" : "//计算排班\r\ndef _default = logic.param('Default').getReal()\r\ndef schedule_type = _default.get(\"schedule_type\")\r\ndef workdays = _default.get(\"workdays\")\r\ndef shifts = _default.get(\"shifts\")\r\ndef inversion_cycle = _default.get(\"inversion_cycle\")\r\ndef inversion_count = _default.get(\"inversion_count\")\r\ndef same_restday = _default.get(\"same_restday\")\r\ndef inversion_days = _default.get(\"inversion_days\")\r\ndef rest = _default.get(\"rest\")\r\ndef work = _default.get(\"reworkst\")\r\ndef biweekly_cycle = _default.get(\"biweekly_cycle\")\r\ndef rq = _default.get(\"rq\")\r\n\r\ndef lastRldata = logic.param('lastRldata').getReal()\r\n\r\n// 解析传入月份并计算起止时间\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ndef rqDateFormat = new java.text.SimpleDateFormat(\"yyyy-MM\")\r\ndef rqDate = rqDateFormat.parse(rq)\r\n\r\nCalendar cal = Calendar.getInstance()\r\ncal.setTime(rqDate)\r\n\r\n// 设置当月第一天\r\ncal.set(Calendar.DAY_OF_MONTH, 1)\r\nDate startOfMonth = cal.getTime()\r\n\r\n// 设置下个月第一天并回退一天得到当月最后一天\r\ncal.add(Calendar.MONTH, 1)\r\ncal.set(Calendar.DAY_OF_MONTH, 1)\r\ncal.add(Calendar.DAY_OF_MONTH, -1)\r\nDate endOfMonth = cal.getTime()\r\n\r\ndef startCal = Calendar.getInstance()\r\nstartCal.setTime(startOfMonth)\r\n\r\ndef endCal = Calendar.getInstance()\r\nendCal.setTime(endOfMonth)\r\n\r\n\r\n// 判断是否工作日\r\ndef judgeWork = { Date checkinDate, List workdaysParam, List activeShiftsParam ->\r\n        // 1. 确定当前日期是周几（1-7对应周一到周日）\r\n        def calendarInner = Calendar.getInstance()\r\n    calendarInner.setTime(checkinDate)\r\n    int dayOfWeek = calendarInner.get(Calendar.DAY_OF_WEEK)\r\n    int dayNumber = (dayOfWeek == Calendar.SUNDAY) ? 7 : dayOfWeek - 1\r\n    // print \"班次数据, ${activeShiftsParam}!\"\r\n    // print \"工作日数据, ${workdaysParam}!\"\r\n    // print \"日期数据, ${checkinDate}!\"\r\n\r\n    // 2. 查找匹配的工作日配置\r\n    def workdayConfig = workdaysParam.find { it.day_number == dayNumber }\r\n\r\n// 3. 未找到工作日配置时返回空班次\r\nif (!workdayConfig || !workdayConfig.shift_id) {\r\n    return 0\r\n}\r\n\r\n// 4. 查找对应的班次信息\r\ndef shift = activeShiftsParam.find { it.id == workdayConfig.shift_id }\r\n\r\n// 5. 未找到班次时返回空班次\r\nif (!shift) {\r\n    return 0\r\n\r\n}\r\n\r\nreturn 1;\r\n}\r\n\r\n// 遍历日期区间\r\nwhile (!startCal.after(endCal)) {\r\n    def checkinDate = startCal.getTime()\r\n    def day = lastRldata.find { it.date_to >= checkinDate && it.date_from <= checkinDate }\r\n\r\n    if(day == null){\r\n        def res = judgeWork(checkinDate, workdays, shifts)\r\n        if(res==0){\r\n            def restday = sys.entity('resource_calendar_leaves')\r\n            restday.set(\"date\",sdf.format(checkinDate))\r\n            restday.set(\"iswork\",0)\r\n            lastRldata.add(restday)\r\n        }\r\n    }\r\n\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}\r\n",
      "codeName" : "RAWSFCODE_03",
      "codeType" : "Groovy",
      "leftPos" : 469,
      "logicNodeType" : "RAWSFCODE",
      "name" : "固定排班/灵活打卡",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_03"
        }
      } ],
      "topPos" : 540,
      "parallelOutput" : true
    }, {
      "code" : "def _default = logic.param('Default').getReal()\r\ndef schedule_type = _default.get(\"schedule_type\")\r\ndef workdays = _default.get(\"workdays\")\r\ndef shifts = _default.get(\"shifts\")\r\ndef inversion_cycle = _default.get(\"inversion_cycle\")\r\ndef inversion_count = _default.get(\"inversion_count\")\r\ndef same_restday = _default.get(\"same_restday\")\r\ndef inversion_days = _default.get(\"inversion_days\")\r\ndef rest = _default.get(\"rest\")\r\ndef work = _default.get(\"reworkst\")\r\ndef biweekly_cycle = _default.get(\"biweekly_cycle\")\r\ndef rq = _default.get(\"rq\")\r\n\r\ndef lastRldata = logic.param('lastRldata').getReal()\r\n\r\n// 解析传入月份并计算起止时间\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ndef rqDateFormat = new java.text.SimpleDateFormat(\"yyyy-MM\")\r\ndef rqDate = rqDateFormat.parse(rq)\r\n\r\nCalendar cal = Calendar.getInstance()\r\ncal.setTime(rqDate)\r\n\r\n// 设置当月第一天\r\ncal.set(Calendar.DAY_OF_MONTH, 1)\r\nDate startOfMonth = cal.getTime()\r\n\r\n// 设置下个月第一天并回退一天得到当月最后一天\r\ncal.add(Calendar.MONTH, 1)\r\ncal.set(Calendar.DAY_OF_MONTH, 1)\r\ncal.add(Calendar.DAY_OF_MONTH, -1)\r\nDate endOfMonth = cal.getTime()\r\n\r\ndef startCal = Calendar.getInstance()\r\nstartCal.setTime(startOfMonth)\r\n\r\ndef endCal = Calendar.getInstance()\r\nendCal.setTime(endOfMonth)\r\n\r\n// 计算周期天数（N班倒*7天）\r\nint cycleDays = inversion_cycle * 7\r\n\r\n// 预处理工作日数据：建立周期映射表（仅保留1~cycleDays的配置）\r\ndef validWorkdays = workdays.findAll { it.day_number <= cycleDays }\r\ndef cycleMap = [:]\r\nvalidWorkdays.each { \r\n    cycleMap[it.day_number] = it \r\n}\r\n\r\n// 计算当月第一天对应的周期基准日（最近的前序周一）\r\nCalendar baseDateCal = Calendar.getInstance()\r\nbaseDateCal.setTime(startOfMonth)\r\n// 计算需要回退的天数（1=周日,2=周一,...,7=周六）\r\nint daysToSubtract = (baseDateCal.get(Calendar.DAY_OF_WEEK) - 2 + 7) % 7\r\nif (daysToSubtract > 0) {\r\n    baseDateCal.add(Calendar.DAY_OF_MONTH, -daysToSubtract)\r\n}\r\nDate baseDate = baseDateCal.getTime()\r\n\r\n// 遍历当月每一天\r\nwhile (!startCal.after(endCal)) {\r\n    Date checkinDate = startCal.getTime()\r\n    \r\n    // 计算相对于基准日的天数偏移\r\n    long offsetMillis = checkinDate.getTime() - baseDate.getTime()\r\n    int offsetDays = (offsetMillis / (24 * 60 * 60 * 1000)) as int\r\n    \r\n    // 计算周期位置（1-based）\r\n    int dayInCycle = (offsetDays % cycleDays) + 1\r\n\r\n    // 查找工作配置\r\n    def workdayConfig = cycleMap[dayInCycle]\r\n    \r\n    // 判断是否为休息日\r\n    boolean isRestDay = (workdayConfig == null) || \r\n                       (workdayConfig.title == \"休息\")\r\n    \r\n    // 如果是休息日且未记录，则添加到结果集\r\n    if (isRestDay) {\r\n        def day = lastRldata.find { it.date_to >= checkinDate && it.date_from <= checkinDate }\r\n        if (day == null) {\r\n            def restday = sys.entity('resource_calendar_leaves')\r\n            restday.set(\"date\",sdf.format(checkinDate))\r\n            restday.set(\"iswork\",0)\r\n            lastRldata.add(restday)\r\n        }\r\n    }\r\n    \r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}",
      "codeName" : "RAWSFCODE_06",
      "codeType" : "Groovy",
      "leftPos" : 685,
      "logicNodeType" : "RAWSFCODE",
      "name" : "N班倒-休息日相同",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_06"
        }
      } ],
      "topPos" : 540,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_01",
      "leftPos" : 850,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "N_DATE_FROM_LTANDEQ",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "Filter"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "N_DATE_FROM_LTANDEQ",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "N_DATE_TO_GTANDEQ",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "Filter"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "N_DATE_TO_GTANDEQ",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "size",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "Filter"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValue" : "1000",
        "srcValueType" : "SRCVALUE"
      } ],
      "topPos" : -74,
      "parallelOutput" : true
    }, {
      "code" : "def curRldata = logic.param('leaves').getReal()\r\ndef lastRldata = logic.param('lastRldata').getReal()\r\ndef _default = logic.param('Default').getReal()\r\ndef holiday = _default.get(\"holiday\")\r\ndef startOfMonth = _default.get(\"startOfMonth\")\r\n\r\nif(curRldata && holiday && startOfMonth){\r\n    def sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\n    \r\n    curRldata.each{ i ->\r\n        def holiday_type = i.get(\"holiday_type\")?: \"\"\r\n        \r\n        if(holiday.contains(holiday_type)){\r\n            def startDate = i.get(\"date_from\")\r\n            def endDate = i.get(\"date_to\")\r\n\r\n            if (startDate && endDate) {\r\n                // 日期范围调整逻辑\r\n                if(startOfMonth.after(startDate)){\r\n                    startDate = startOfMonth\r\n                }\r\n                \r\n                // 确保结束日期不小于开始日期\r\n                if(endDate.before(startDate)) return\r\n\r\n                // 使用Calendar进行日期遍历\r\n                Calendar cal = Calendar.getInstance()\r\n                cal.setTime(startDate)\r\n                \r\n                while (!cal.getTime().after(endDate)) {  \r\n                    def restday = sys.entity('resource_calendar_leaves')\r\n                    restday.set(\"date\", sdf.format(cal.getTime()))\r\n                    restday.set(\"iswork\", 0)\r\n                    restday.set(\"name\", i.get(\"name\"))\r\n                    lastRldata.add(restday)\r\n                    \r\n                    cal.add(Calendar.DATE, 1) \r\n                }\r\n            }\r\n        }\r\n    }\r\n}",
      "codeName" : "RAWSFCODE_05",
      "codeType" : "Groovy",
      "leftPos" : 850,
      "logicNodeType" : "RAWSFCODE",
      "name" : "根据holiday配置确定lastRldata",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_02"
        },
        "name" : "返回指定月份",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "ISNOTNULL",
            "dstFieldName" : "rq",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[rq] 值不为空(NotNil)"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_05"
        }
      } ],
      "topPos" : 220,
      "parallelOutput" : true
    }, {
      "code" : "def _filter = logic.param('Filter').getReal()\r\n\r\ndef dateFormat = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\n\r\ndef _default = logic.param('Default').getReal()\r\ndef rqStr = _default.get(\"rq\")\r\n\r\ndef yearMonthStr = rqStr.substring(0, 7)\r\n_default.set(\"rq\", yearMonthStr)\r\ndef rqDateFormat = new java.text.SimpleDateFormat(\"yyyy-MM\")\r\ndef rqDate = rqDateFormat.parse(yearMonthStr)\r\n\r\nCalendar cal = Calendar.getInstance()\r\ncal.setTime(rqDate)\r\n\r\n// 设置当月第一天\r\ncal.set(Calendar.DAY_OF_MONTH, 1)\r\nDate startOfMonth = cal.getTime()\r\n\r\n// 设置下个月第一天并回退一天得到当月最后一天\r\ncal.add(Calendar.MONTH, 1)\r\ncal.set(Calendar.DAY_OF_MONTH, 1)\r\ncal.add(Calendar.DAY_OF_MONTH, -1)\r\nDate endOfMonth = cal.getTime()\r\n\r\n// 设置过滤条件（格式化为yyyy-MM-dd）\r\n_default.set(\"N_DATE_FROM_LTANDEQ\", dateFormat.format(endOfMonth))\r\n_default.set(\"N_DATE_TO_GTANDEQ\", dateFormat.format(startOfMonth))\r\n_default.set(\"startOfMonth\",startOfMonth)",
      "codeName" : "RAWSFCODE_07",
      "codeType" : "Groovy",
      "leftPos" : 850,
      "logicNodeType" : "RAWSFCODE",
      "name" : "获取当月法定节假日",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_07"
        }
      } ],
      "topPos" : -194,
      "parallelOutput" : true
    }, {
      "code" : "//计算排班\r\ndef _default = logic.param('Default').getReal()\r\ndef schedule_type = _default.get(\"schedule_type\")\r\ndef workdays = _default.get(\"workdays\")\r\ndef shifts = _default.get(\"shifts\")\r\ndef inversion_cycle = _default.get(\"inversion_cycle\")\r\ndef inversion_count = _default.get(\"inversion_count\")\r\ndef same_restday = _default.get(\"same_restday\")\r\ndef inversion_days = _default.get(\"inversion_days\")\r\ndef rest = _default.get(\"rest\")\r\ndef work = _default.get(\"reworkst\")\r\ndef biweekly_cycle = _default.get(\"biweekly_cycle\")\r\ndef rq = _default.get(\"rq\")\r\n\r\ndef lastRldata = logic.param('lastRldata').getReal()\r\n\r\n\r\n\r\n// 解析传入月份并计算起止时间\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ndef rqDateFormat = new java.text.SimpleDateFormat(\"yyyy-MM\")\r\ndef rqDate = rqDateFormat.parse(rq)\r\n\r\nCalendar cal = Calendar.getInstance()\r\ncal.setTime(rqDate)\r\n\r\n// 设置当月第一天\r\ncal.set(Calendar.DAY_OF_MONTH, 1)\r\nDate startOfMonth = cal.getTime()\r\n\r\n// 设置下个月第一天并回退一天得到当月最后一天\r\ncal.add(Calendar.MONTH, 1)\r\ncal.set(Calendar.DAY_OF_MONTH, 1)\r\ncal.add(Calendar.DAY_OF_MONTH, -1)\r\nDate endOfMonth = cal.getTime()\r\n\r\ndef startCal = Calendar.getInstance()\r\nstartCal.setTime(startOfMonth)\r\n\r\n\r\ndef endCal = Calendar.getInstance()\r\nendCal.setTime(endOfMonth)\r\n\r\n// 判断是否工作日\r\ndef judgeWork = { Date checkinDate, List workdaysParam, List activeShiftsParam ->\r\n        // 1. 确定当前日期是周几（1-7对应周一到周日）\r\n        def calendarInner = Calendar.getInstance()\r\n    calendarInner.setTime(checkinDate)\r\n    int dayOfWeek = calendarInner.get(Calendar.DAY_OF_WEEK)\r\n    int dayNumber = (dayOfWeek == Calendar.SUNDAY) ? 7 : dayOfWeek - 1\r\n    // print \"所在周的第一天, ${startOfMonth}!\"\r\n    // print \"日期数据, ${checkinDate}!\"\r\n    // 大/小周计算逻辑\r\n    // 计算起始日期所在周的第一天（周一）\r\n    def effectCal = Calendar.getInstance()\r\n    effectCal.setTime(startOfMonth)\r\n    effectCal.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY)\r\n\r\n    // 计算检查日期所在周的第一天（周一）\r\n    def checkinCal = Calendar.getInstance()\r\n    checkinCal.setTime(checkinDate)\r\n    checkinCal.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY)\r\n\r\n    // 计算周数差（生效日期所在周为第1周）\r\n    long diffMillis = checkinCal.getTimeInMillis() - effectCal.getTimeInMillis()\r\n    int weekNumber = (int)(diffMillis / (7 * 24 * 60 * 60 * 1000)) + 1\r\n\r\n    // 判断当前是大周还是小周\r\n    boolean isBigWeek = false\r\n    if (biweekly_cycle == \"big_small\") {\r\n    isBigWeek = (weekNumber % 2 == 1)  // 奇数周为大周\r\n} else if (biweekly_cycle == \"small_big\") {\r\n    isBigWeek = (weekNumber % 2 == 0)  // 偶数周为大周\r\n}\r\n\r\n// 调整day_number（小周时+7）\r\nint adjustedDayNumber = isBigWeek ? dayNumber : dayNumber + 7\r\n\r\n// 2. 查找匹配的工作日配置（直接匹配调整后的day_number）\r\ndef workdayConfig = workdaysParam.find {\r\n    it.day_number == adjustedDayNumber\r\n}\r\n\r\n// 3. 未找到工作日配置时返回空班次\r\nif (!workdayConfig || !workdayConfig.shift_id) {\r\n    // print \"未找到工作日配置时返回空班次, ${workdayConfig}!\"\r\n    return 0\r\n}\r\n\r\n// 4. 查找对应的班次信息\r\ndef shift = activeShiftsParam.find { it.id == workdayConfig.shift_id }\r\n\r\n// 5. 未找到班次时返回空班次\r\nif (!shift) {\r\n    // print \"未找到班次时返回空班次, ${shift}!\"\r\n    return 0\r\n}\r\n\r\n// 6. 返回班次数据\r\n// print \"返回班次数据, ${shift}!\"\r\nreturn 1\r\n}\r\n\r\n\r\n// 遍历日期区间\r\nwhile (!startCal.after(endCal)) {\r\n    def checkinDate = startCal.getTime()\r\n    def day = lastRldata.find { it.date_to >= checkinDate && it.date_from <= checkinDate }\r\n    if (day == null) {\r\n        def res = judgeWork(checkinDate, workdays, shifts)\r\n        if(res==0){\r\n            def restday = sys.entity('resource_calendar_leaves')\r\n            restday.set(\"date\",sdf.format(checkinDate))\r\n            restday.set(\"iswork\",0)\r\n            lastRldata.add(restday)\r\n        }\r\n    }\r\n\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}\r\n",
      "codeName" : "RAWSFCODE_04",
      "codeType" : "Groovy",
      "leftPos" : 1120,
      "logicNodeType" : "RAWSFCODE",
      "name" : "大小周",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_04"
        }
      } ],
      "topPos" : 540,
      "parallelOutput" : true
    }, {
      "codeName" : "END_01",
      "leftPos" : 1004,
      "logicNodeType" : "END",
      "name" : "结束",
      "getReturnParam" : {
        "modelref" : true,
        "id" : "lastRldata"
      },
      "returnType" : "LOGICPARAM",
      "topPos" : 700,
      "parallelOutput" : true
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "filterParam" : true
    }, {
      "codeName" : "Filter",
      "logicName" : "Filter",
      "name" : "Filter",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar_leaves.json"
      },
      "filterParam" : true
    }, {
      "codeName" : "lastRldata",
      "logicName" : "lastRldata",
      "name" : "lastRldata",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar_leaves.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "leaves",
      "logicName" : "leaves",
      "name" : "leaves",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar_leaves.json"
      },
      "entityListParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "calcGroupNum",
    "defaultParamName" : "DEFAULT",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEFLOGICS/calcGroupNum.json",
    "logicName" : "计算组排班数量",
    "logicSubType" : "DEFIELD",
    "name" : "计算组排班数量",
    "scriptCode" : "if (data.group_num == null && (data.schedule_type == \"class_inversion\" || data.schedule_type == \"work_rest\") && data.attendance_group_shifts != null ) {\n    console.log(\"计算组排班数\")\n    // var attendance_group_shifts = data.attendance_group_shifts;\n    // data.group_num = attendance_group_shifts.length;\n}",
    "customCode" : true,
    "enableBackend" : false,
    "enableFront" : true
  }, {
    "codeName" : "calcOther",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/calcOther.json",
    "logicName" : "计算其他信息",
    "memo" : "班次数量、自由班时间范围",
    "name" : "计算其他信息",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : 40,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_03"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 不等于(<>) free",
            "paramValue" : "free"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_02"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) free",
            "paramValue" : "free"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : 272,
      "parallelOutput" : true
    }, {
      "code" : "def _default = logic.param('Default').getReal()\r\ndef shifts  = _default.get(\"shifts\")\r\ndef schedule_type = _default.get(\"schedule_type\")\r\nif ([\"alternate_week\", \"fixed\", \"flexible\", \"work_rest\", \"free\"].contains(schedule_type) && shifts) {\r\n    def shift = shifts.find { it.get(\"default_flag\") == 1 }\r\n    def scopes = shift.get(\"scopes\")\r\n    if (scopes) {\r\n        def worktimeParts = []\r\n        def timeFormat = new java.text.SimpleDateFormat(\"HH:mm\")\r\n        scopes.forEach { scope ->\r\n            def next_tag = scope.get(\"next_tag\")\r\n            def start_base_time = scope.get(\"start_base_time\")\r\n            def end_base_time = scope.get(\"end_base_time\")\r\n\r\n            def formatTime = { time ->\r\n                timeFormat.format(time instanceof Date ? time : new Date(time.time))\r\n            }\r\n            def start = formatTime(start_base_time)\r\n            if (next_tag && next_tag in [\"1,0\", \"1,1\"]) {\r\n                start = \"次日\" + start\r\n            }\r\n\r\n            def end = formatTime(end_base_time)\r\n            if (next_tag && next_tag in [\"0,1\", \"1,1\"]) {\r\n                end = \"次日\" + end\r\n            }\r\n            worktimeParts << \"${start}-${end}\"\r\n\r\n        }\r\n\r\n        _default.set(\"work_time\", worktimeParts.join('/'))\r\n    }\r\n}\r\n",
      "codeName" : "RAWSFCODE_01",
      "codeType" : "Groovy",
      "leftPos" : 860,
      "logicNodeType" : "RAWSFCODE",
      "name" : "计算上下班时间",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE4"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        }
      } ],
      "topPos" : 270,
      "parallelOutput" : true
    }, {
      "code" : "def _default = logic.param('Default').getReal()\r\ndef shifts = _default.get(\"shifts\")\r\nif(shifts){\r\n    def shift = shifts.find { it.default_flag == 1 }\r\n    if(shift){\r\n        _default.set(\"default_shift\",shift.get(\"id\"))\r\n    }\r\n}\r\n\r\n",
      "codeName" : "RAWSFCODE_03",
      "codeType" : "Groovy",
      "leftPos" : 600,
      "logicNodeType" : "RAWSFCODE",
      "name" : "填充默认班次标识",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_03"
        }
      } ],
      "topPos" : 272,
      "parallelOutput" : true
    }, {
      "codeName" : "END_01",
      "leftPos" : 1110,
      "logicNodeType" : "END",
      "name" : "结束",
      "getReturnParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "returnType" : "LOGICPARAM",
      "topPos" : 272,
      "parallelOutput" : true
    }, {
      "code" : "var _default = logic.getParam('Default');\r\nvar shifts = _default.get(\"shifts\");\r\nif(shifts!=null && shifts.size()>0){\r\n    var shift = shifts.get(0);\r\n    var scopes = shift.get(\"scopes\")\r\n    var scope = scopes.get(0);\r\n    _default.set(\"free_start\",scope.get(\"start_base_time\"))\r\n    _default.set(\"free_end\",scope.get(\"end_base_time\"))\r\n}\r\n",
      "codeName" : "RAWSFCODE_02",
      "codeType" : "JavaScript",
      "leftPos" : 291,
      "logicNodeType" : "RAWSFCODE",
      "name" : "填充自由班上下班时间",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_03"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_02"
        }
      } ],
      "topPos" : 368,
      "parallelOutput" : true
    }, {
      "codeName" : "DEBUGPARAM_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "leftPos" : 1310,
      "logicNodeType" : "DEBUGPARAM",
      "name" : "调试逻辑参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        }
      } ],
      "topPos" : 400,
      "parallelOutput" : true
    }, {
      "code" : "def _default = logic.param('Default').getReal()\r\ndef schedule_type = _default.get('schedule_type')\r\ndef group_num = _default.get('group_num')\r\ndef group_shifts = _default.get('group_shifts')\r\nif (group_num == null && (schedule_type == \"class_inversion\" || schedule_type == \"work_rest\") && group_shifts != null ) {\r\n    _default.set(\"group_num\",group_shifts.size())\r\n}",
      "codeName" : "RAWSFCODE4",
      "codeType" : "Groovy",
      "leftPos" : 1070,
      "logicNodeType" : "RAWSFCODE",
      "name" : "计算组排班数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE4"
        }
      } ],
      "topPos" : 476
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "entityParam" : true
    }, {
      "codeName" : "attendance_shift",
      "logicName" : "attendance_shift",
      "name" : "attendance_shift",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_shift.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "shifts",
      "logicName" : "shifts",
      "name" : "shifts",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_shift.json"
      },
      "entityListParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "calcShiftNum",
    "defaultParamName" : "DEFAULT",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEFLOGICS/calcShiftNum.json",
    "logicName" : "计算班次数量",
    "logicSubType" : "DEFIELD",
    "name" : "计算班次数量",
    "scriptCode" : "if (data.shift_num == null && data.schedule_type == \"manual\" && data.shifts != null ) {\r\n    var shifts = data.shifts;\r\n    data.shift_num = shifts.length;\r\n}",
    "customCode" : true,
    "enableBackend" : false,
    "enableFront" : true
  }, {
    "codeName" : "cleanWorkdays",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/cleanWorkdays.json",
    "logicName" : "创建/更新时清理工作日",
    "name" : "创建/更新时清理工作日",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : 180,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_03"
        },
        "name" : "上A休B",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) work_rest",
            "paramValue" : "work_rest"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        },
        "name" : "固定排班/灵活打卡/大小周/N班倒",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "groupOP" : "OR",
            "logicType" : "GROUP",
            "name" : "OR",
            "getPSDELogicLinkConds" : [ {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) fixed",
              "paramValue" : "fixed"
            }, {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) flexible",
              "paramValue" : "flexible"
            }, {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) alternate_week",
              "paramValue" : "alternate_week"
            }, {
              "groupOP" : "AND",
              "logicType" : "GROUP",
              "name" : "AND",
              "getPSDELogicLinkConds" : [ {
                "condOP" : "EQ",
                "dstFieldName" : "SCHEDULE_TYPE",
                "getDstLogicParam" : {
                  "modelref" : true,
                  "id" : "Default"
                },
                "logicType" : "SINGLE",
                "name" : "Default[SCHEDULE_TYPE] 等于(=) class_inversion",
                "paramValue" : "class_inversion"
              }, {
                "condOP" : "EQ",
                "dstFieldName" : "SAME_RESTDAY",
                "getDstLogicParam" : {
                  "modelref" : true,
                  "id" : "Default"
                },
                "logicType" : "SINGLE",
                "name" : "Default[SAME_RESTDAY] 等于(=) 1",
                "paramValue" : "1"
              } ]
            } ]
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "N班倒-休息日不同",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) class_inversion",
            "paramValue" : "class_inversion"
          }, {
            "condOP" : "EQ",
            "dstFieldName" : "SAME_RESTDAY",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SAME_RESTDAY] 等于(=) 0",
            "paramValue" : "0"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : 104,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_01",
      "leftPos" : 140,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "workdays"
        },
        "paramAction" : "BINDPARAM",
        "srcFieldName" : "workdays",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 280,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_03",
      "leftPos" : 580,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_03"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "workdays",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValueType" : "NULLVALUE"
      } ],
      "topPos" : 280,
      "parallelOutput" : true
    }, {
      "code" : "def _default = logic.param('Default').getReal()\r\ndef schedule_type = _default.schedule_type ;\r\n//N班倒\r\nif(schedule_type == \"class_inversion\"){\r\n    _default.workday = \"\";\r\n    def inversion_cycle = _default.inversion_cycle ;\r\n\r\n    if(inversion_cycle== 1){\r\n        _default.week2 = \"\" ;\r\n        _default.week3 = \"\" ;\r\n        _default.week4 = \"\" ;\r\n    }\r\n    if(inversion_cycle== 2){\r\n        _default.week3 = \"\" ;\r\n        _default.week4 = \"\" ;\r\n    }\r\n    if(inversion_cycle== 3){\r\n        _default.week4 = \"\" ;\r\n    }\r\n}\r\n\r\n//固定排班/灵活打卡\r\nif(schedule_type == \"flexible\" || schedule_type == \"fixed\"){\r\n    _default.week1 = \"\" ;\r\n    _default.week2 = \"\" ;\r\n    _default.week3 = \"\" ;\r\n    _default.week4 = \"\" ;\r\n}\r\n\r\n//大小周\r\nif(schedule_type == \"alternate_week\" ){\r\n    _default.workday = \"\";\r\n    _default.week3 = \"\" ;\r\n    _default.week4 = \"\" ;\r\n}\r\n\r\ndef workdays = logic.param('workdays').getReal()\r\ndef lastDays = logic.param('lastDays').getReal()\r\n\r\ndef selection = [_default.week1, _default.week2, _default.week3, _default.week4,_default.workday].join(',').split(',')\r\n\r\n//遍历workdays\r\nfor(workday in workdays){\r\n    if(selection.contains(workday.get(\"name\"))){\r\n        //附加到数组\r\n        lastDays.add(workday)\r\n    }\r\n}",
      "codeName" : "RAWSFCODE_01",
      "codeType" : "Groovy",
      "leftPos" : 140,
      "logicNodeType" : "RAWSFCODE",
      "name" : "执行脚本代码",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        }
      } ],
      "topPos" : 380,
      "parallelOutput" : true
    }, {
      "codeName" : "DEBUGPARAM_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "leftPos" : -50,
      "logicNodeType" : "DEBUGPARAM",
      "name" : "调试逻辑参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        }
      } ],
      "topPos" : 440,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_02",
      "leftPos" : 370,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "workdays",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "paramAction" : "SETPARAMVALUE",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "lastDays"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 482,
      "parallelOutput" : true
    }, {
      "codeName" : "END_01",
      "leftPos" : 620,
      "logicNodeType" : "END",
      "name" : "结束",
      "getReturnParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "returnType" : "LOGICPARAM",
      "topPos" : 484,
      "parallelOutput" : true
    }, {
      "codeName" : "LOOPSUBCALL_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "temp"
      },
      "leftPos" : -100,
      "logicNodeType" : "LOOPSUBCALL",
      "name" : "循环子调用",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "APPENDPARAM_01"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "groupOP" : "OR",
            "logicType" : "GROUP",
            "name" : "OR",
            "getPSDELogicLinkConds" : [ {
              "condOP" : "LIKE",
              "dstFieldName" : "WORKDAY",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[WORKDAY] 文本包含(%) name",
              "paramType" : "SRCENTITYFIELD",
              "paramValue" : "name",
              "getSrcLogicParam" : {
                "modelref" : true,
                "id" : "temp"
              }
            }, {
              "condOP" : "LIKE",
              "dstFieldName" : "WEEK2",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[WEEK2] 文本包含(%) name",
              "paramType" : "SRCENTITYFIELD",
              "paramValue" : "name",
              "getSrcLogicParam" : {
                "modelref" : true,
                "id" : "temp"
              }
            }, {
              "condOP" : "LIKE",
              "dstFieldName" : "WEEK1",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[WEEK1] 文本包含(%) name",
              "paramType" : "SRCENTITYFIELD",
              "paramValue" : "name",
              "getSrcLogicParam" : {
                "modelref" : true,
                "id" : "temp"
              }
            }, {
              "condOP" : "LIKE",
              "dstFieldName" : "WEEK3",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[WEEK3] 文本包含(%) name",
              "paramType" : "SRCENTITYFIELD",
              "paramValue" : "name",
              "getSrcLogicParam" : {
                "modelref" : true,
                "id" : "temp"
              }
            }, {
              "condOP" : "LIKE",
              "dstFieldName" : "WEEK4",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[WEEK4] 文本包含(%) name",
              "paramType" : "SRCENTITYFIELD",
              "paramValue" : "name",
              "getSrcLogicParam" : {
                "modelref" : true,
                "id" : "temp"
              }
            } ]
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        },
        "subCallLink" : true
      } ],
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "workdays"
      },
      "topPos" : 570,
      "parallelOutput" : true
    }, {
      "codeName" : "APPENDPARAM_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "lastDays"
      },
      "leftPos" : 140,
      "logicNodeType" : "APPENDPARAM",
      "name" : "附加到数组参数",
      "srcIndex" : 0,
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "temp"
      },
      "topPos" : 630,
      "parallelOutput" : true
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "entityParam" : true
    }, {
      "codeName" : "lastDays",
      "logicName" : "lastDays",
      "name" : "lastDays",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_workday.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "temp",
      "logicName" : "temp",
      "name" : "temp",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_workday.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "workdays",
      "logicName" : "workdays",
      "name" : "workdays",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_workday.json"
      },
      "entityListParam" : true
    } ],
    "scriptCode" : "var selection = data.workday;\r\n//固定打卡、灵活排班\r\nif ((data.schedule_type == \"fixed\" || data.schedule_type == \"flexible\") && selection != null && selection != \"\") {\r\n  var workdays = data.workdays;\r\n  var last =  [];\r\n  for (var i = 0; i < workdays.length; i++){\r\n    var item = workdays[i];\r\n    if(selection.includes(item.name.toString())){\r\n      last.push(item)\r\n    }\r\n  }\r\n  data.workdays = last;\r\n}",
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "deleteOtherInfo",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/deleteOtherInfo.json",
    "logicName" : "删除激活信息",
    "name" : "删除激活信息",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : 190,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : 202,
      "parallelOutput" : true
    }, {
      "codeName" : "DEACTION_01",
      "getDstPSDEAction" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_rule/PSDEACTIONS/Remove.json"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_rule.json"
      },
      "leftPos" : 390,
      "logicNodeType" : "DEACTION",
      "name" : "实体行为",
      "topPos" : 198,
      "parallelOutput" : true
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "entityParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "executeActivate",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/executeActivate.json",
    "logicName" : "定时激活规则",
    "memo" : "每日0点执行",
    "name" : "定时激活规则",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : 200,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : 200,
      "parallelOutput" : true
    }, {
      "codeName" : "DEBUGPARAM_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "rule"
      },
      "leftPos" : 810,
      "logicNodeType" : "DEBUGPARAM",
      "name" : "调试逻辑参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        }
      } ],
      "topPos" : 60,
      "parallelOutput" : true
    }, {
      "codeName" : "DEDATASET_01",
      "getDstPSDEDataSet" : {
        "modelref" : true,
        "id" : "needActivate"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "Filter"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "leftPos" : 360,
      "logicNodeType" : "DEDATASET",
      "name" : "实体数据集",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "size",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "rules"
            },
            "logicType" : "SINGLE",
            "name" : "rules[size] 不等于(<>) 0",
            "paramValue" : "0"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_01"
        }
      } ],
      "getRetPSDELogicParam" : {
        "modelref" : true,
        "id" : "rules"
      },
      "topPos" : 198,
      "parallelOutput" : true
    }, {
      "codeName" : "LOOPSUBCALL_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "rule"
      },
      "leftPos" : 570,
      "logicNodeType" : "LOOPSUBCALL",
      "name" : "循环子调用",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        },
        "subCallLink" : true
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        }
      } ],
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "rules"
      },
      "topPos" : 198,
      "parallelOutput" : true
    }, {
      "codeName" : "DEACTION_01",
      "getDstPSDEAction" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEACTIONS/Update.json"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "rule"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "leftPos" : 810,
      "logicNodeType" : "DEACTION",
      "name" : "实体行为",
      "getRetPSDELogicParam" : {
        "modelref" : true,
        "id" : "rule"
      },
      "topPos" : 198,
      "parallelOutput" : true
    }, {
      "codeName" : "END_01",
      "leftPos" : 610,
      "logicNodeType" : "END",
      "name" : "结束",
      "topPos" : 350,
      "parallelOutput" : true
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "entityParam" : true
    }, {
      "codeName" : "Filter",
      "logicName" : "Filter",
      "name" : "Filter",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "filterParam" : true
    }, {
      "codeName" : "rule",
      "logicName" : "rule",
      "name" : "rule",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "rules",
      "logicName" : "应激活规则",
      "name" : "应激活规则",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "entityPageParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "executeCompletion",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/executeCompletion.json",
    "logicName" : "定时补充排班",
    "name" : "定时补充排班",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : 760,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_04"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : -462,
      "parallelOutput" : true
    }, {
      "codeName" : "DEDATASET_05",
      "getDstPSDEDataSet" : {
        "modelref" : true,
        "id" : "Default"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "shiftFilter"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_shift.json"
      },
      "leftPos" : 864,
      "logicNodeType" : "DEDATASET",
      "name" : "获取当前规则激活班次",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_013"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "size",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "activeShifts"
            },
            "logicType" : "SINGLE",
            "name" : "activeShifts[size] 不等于(<>) 0",
            "paramValue" : "0"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_05"
        }
      } ],
      "getRetPSDELogicParam" : {
        "modelref" : true,
        "id" : "activeShifts"
      },
      "topPos" : 290,
      "parallelOutput" : true
    }, {
      "code" : "def calendarFilter = logic.param('calendarFilter').getReal()\r\ndef _default = logic.param('Default').getReal()\r\n\r\n_default.copyTo(calendarFilter)\r\n",
      "codeName" : "RAWSFCODE_013",
      "codeType" : "Groovy",
      "leftPos" : 864,
      "logicNodeType" : "RAWSFCODE",
      "name" : "设置日历参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_03"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_013"
        }
      } ],
      "topPos" : 460,
      "parallelOutput" : true
    }, {
      "codeName" : "DEDATASET_03",
      "getDstPSDEDataSet" : {
        "modelref" : true,
        "id" : "Calendar"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "calendarFilter"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "leftPos" : 864,
      "logicNodeType" : "DEDATASET",
      "name" : "获取节假日配置",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_02"
        },
        "name" : "固定排班/灵活打卡",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "groupOP" : "OR",
            "logicType" : "GROUP",
            "name" : "OR",
            "getPSDELogicLinkConds" : [ {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) fixed",
              "paramValue" : "fixed"
            }, {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) flexible",
              "paramValue" : "flexible"
            } ]
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_03"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_06"
        },
        "name" : "手动排班",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) manual",
            "paramValue" : "manual"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_03"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        },
        "name" : "自由班",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) free",
            "paramValue" : "free"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_03"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_08"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) alternate_week",
            "paramValue" : "alternate_week"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_03"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_03"
        },
        "name" : "N班倒/上A休B",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "groupOP" : "OR",
            "logicType" : "GROUP",
            "name" : "OR",
            "getPSDELogicLinkConds" : [ {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) class_inversion",
              "paramValue" : "class_inversion"
            }, {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) work_rest",
              "paramValue" : "work_rest"
            } ]
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_03"
        }
      } ],
      "getRetPSDELogicParam" : {
        "modelref" : true,
        "id" : "calendarList"
      },
      "topPos" : 580,
      "parallelOutput" : true
    }, {
      "codeName" : "LOOPSUBCALL_05",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "activeRule"
      },
      "leftPos" : 970,
      "logicNodeType" : "LOOPSUBCALL",
      "name" : "循环子调用",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_017"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "ID",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "activeRule"
            },
            "logicType" : "SINGLE",
            "name" : "activeRule[ID] 等于(=) 00d0d586d1da1fa3151946037a982682",
            "paramValue" : "00d0d586d1da1fa3151946037a982682"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_05"
        },
        "subCallLink" : true
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_02"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_05"
        }
      } ],
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "waitRulePage"
      },
      "topPos" : -336,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_06",
      "leftPos" : 970,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_01"
        },
        "name" : "免考勤",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) no_required",
            "paramValue" : "no_required"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_06"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_05"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_06"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "n_rule_id_eq",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "shiftFilter"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "activeRule"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 70
    }, {
      "codeName" : "RAWSQLCALL_01",
      "leftPos" : 1066,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "删除当前规则旧排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_016"
        },
        "name" : "免考勤规则",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) no_required",
            "paramValue" : "no_required"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_01"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "activeRule"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "EFFECT_TIME",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "sql" : "DELETE FROM attendance_schedule WHERE rule_id = ? AND checkin_date >= ?",
      "topPos" : 290,
      "parallelOutput" : true
    }, {
      "code" : "//1、排班日期区间为五个月，即[ 前三个月 - 当前月 - 下个月]\r\n//2、生成新排班时需要生成生效日期起到排班日期区间止的所有排班\r\ndef activeShifts  = logic.param('activeShifts').getReal()\r\ndef activeRule = logic.param('activeRule').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\ndef _default = logic.param('Default').getReal()\r\ndef effect_time = _default.get(\"effect_time\")\r\ndef workdays =  logic.param('workdays').getReal()\r\n//大小周\r\ndef biweekly_cycle = _default.get(\"biweekly_cycle\")\r\n\r\n// 获取当前日期\r\ndef now = new Date()\r\ndef calendar = Calendar.getInstance()\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ncalendar.setTime(now)\r\n \r\n// 跳转到下个月\r\ncalendar.add(Calendar.MONTH, 1)\r\n// 设置为下个月最后一天\r\ncalendar.set(Calendar.DAY_OF_MONTH, calendar.getActualMaximum(Calendar.DAY_OF_MONTH))\r\n    \r\n// 排班结束日期\r\ndef endDate = sdf.format(calendar.getTime())\r\n\r\n// 计算当天排班班次\r\ndef generateShiftData = { Date checkinDate, List workdaysParam, List activeShiftsParam ->\r\n    // 1. 确定当前日期是周几（1-7对应周一到周日）\r\n    def calendarInner = Calendar.getInstance()\r\n    calendarInner.setTime(checkinDate)\r\n    int dayOfWeek = calendarInner.get(Calendar.DAY_OF_WEEK)\r\n    int dayNumber = (dayOfWeek == Calendar.SUNDAY) ? 7 : dayOfWeek - 1\r\n\r\n    // 新增大/小周计算逻辑\r\n    // 计算生效日期所在周的第一天（周一）\r\n    def effectCal = Calendar.getInstance()\r\n    effectCal.setTime(effect_time)\r\n    effectCal.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY)\r\n\r\n    // 计算检查日期所在周的第一天（周一）\r\n    def checkinCal = Calendar.getInstance()\r\n    checkinCal.setTime(checkinDate)\r\n    checkinCal.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY)\r\n\r\n    // 计算周数差（生效日期所在周为第1周）\r\n    long diffMillis = checkinCal.getTimeInMillis() - effectCal.getTimeInMillis()\r\n    int weekNumber = (int)(diffMillis / (7 * 24 * 60 * 60 * 1000)) + 1\r\n\r\n    // 判断当前是大周还是小周\r\n    boolean isBigWeek = false\r\n    if (biweekly_cycle == \"big_small\") {\r\n    isBigWeek = (weekNumber % 2 == 1)  // 奇数周为大周\r\n} else if (biweekly_cycle == \"small_big\") {\r\n    isBigWeek = (weekNumber % 2 == 0)  // 偶数周为大周\r\n}\r\n\r\n// 调整day_number（小周时+7）\r\nint adjustedDayNumber = isBigWeek ? dayNumber : dayNumber + 7\r\n\r\n// 2. 查找匹配的工作日配置（直接匹配调整后的day_number）\r\ndef workdayConfig = workdaysParam.find {\r\n    it.day_number == adjustedDayNumber\r\n}\r\n\r\n// 3. 未找到工作日配置时返回空班次\r\nif (!workdayConfig || !workdayConfig.shift_id) {\r\n    return null\r\n}\r\n\r\n// 4. 查找对应的班次信息\r\ndef shift = activeShiftsParam.find { it.id == workdayConfig.shift_id }\r\n\r\n// 5. 未找到班次时返回空班次\r\nif (!shift || !shift.shift_data) {\r\n    return null\r\n}\r\n\r\n// 6. 返回班次数据\r\nreturn shift.shift_data\r\n}\r\n\r\n// 排班生成\r\ndef startCal = Calendar.getInstance()\r\nstartCal.setTime(effect_time)\r\n    \r\n// 解析结束日期\r\ndef endCal = Calendar.getInstance()\r\nendCal.setTime(sdf.parse(endDate))\r\n\r\n// 遍历日期区间\r\nwhile (!startCal.after(endCal)) {\r\n    def checkinDate = startCal.getTime()\r\n    def shift_data = generateShiftData(checkinDate, workdays, activeShifts)\r\n    def workTime = shift_data?.work_times ?: null\r\n\r\n    def attendance_schedule = sys.entity('attendance_schedule')\r\n    attendance_schedule.rule_data = activeRule.get(\"rule_data\")\r\n    attendance_schedule.rule_name = activeRule.get(\"name\")\r\n    attendance_schedule.rule_id = activeRule.get(\"id\")\r\n    attendance_schedule.checkin_date =  sdf.format(checkinDate)\r\n    if(shift_data){\r\n        shift_data.name = \"白班\"\r\n    }\r\n    attendance_schedule.shift_data = shift_data\r\n    attendance_schedule.work_time = workTime\r\n    attendance_schedule.workday = shift_data != null ? 1 : 0 \r\n    // attendance_schedule.id = UUID.randomUUID().toString() \r\n\r\n    newSchedules.add(attendance_schedule)\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}",
      "codeName" : "RAWSFCODE_08",
      "codeType" : "Groovy",
      "leftPos" : 300,
      "logicNodeType" : "RAWSFCODE",
      "name" : "大小周构造新排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_015"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_08"
        }
      } ],
      "topPos" : 770,
      "parallelOutput" : true
    }, {
      "code" : "//1、排班日期区间为五个月，即[ 前三个月 - 当前月 - 下个月]\r\n//2、生成新排班时需要生成生效日期起到排班日期区间止的所有排班\r\ndef activeShifts  = logic.param('activeShifts').getReal()\r\ndef activeRule = logic.param('activeRule').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\ndef _default = logic.param('Default').getReal()\r\ndef effect_time = _default.get(\"fill_time\")\r\ndef workdays =  logic.param('workdays').getReal()\r\n\r\n// 获取当前日期\r\ndef now = new Date()\r\ndef calendar = Calendar.getInstance()\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ncalendar.setTime(now)\r\n \r\n// 跳转到下个月\r\ncalendar.add(Calendar.MONTH, 1)\r\n// 设置为下个月最后一天\r\ncalendar.set(Calendar.DAY_OF_MONTH, calendar.getActualMaximum(Calendar.DAY_OF_MONTH))\r\n    \r\n// 排班结束日期\r\ndef endDate = sdf.format(calendar.getTime())\r\n\r\n// 计算当天排班班次\r\ndef generateShiftData = { Date checkinDate, List workdaysParam, List activeShiftsParam ->\r\n    // 1. 确定当前日期是周几（1-7对应周一到周日）\r\n    def calendarInner = Calendar.getInstance()\r\n    calendarInner.setTime(checkinDate)\r\n    int dayOfWeek = calendarInner.get(Calendar.DAY_OF_WEEK)\r\n    int dayNumber = (dayOfWeek == Calendar.SUNDAY) ? 7 : dayOfWeek - 1\r\n\r\n    // 2. 查找匹配的工作日配置\r\n    def workdayConfig = workdaysParam.find { it.day_number == dayNumber }\r\n    \r\n    // 3. 未找到工作日配置时返回空班次\r\n    if (!workdayConfig || !workdayConfig.shift_id) {\r\n        // print \"未找到工作日配置时返回空班次, ${workdayConfig}!\"\r\n        return null\r\n    }\r\n\r\n    // 4. 查找对应的班次信息\r\n    def shift = activeShiftsParam.find { it.id == workdayConfig.shift_id }\r\n    \r\n    // 5. 未找到班次时返回空班次\r\n    if (!shift || !shift.shift_data) {\r\n        // print \"未找到班次时返回空班次, ${shift}!\"\r\n        return null \r\n    }\r\n\r\n    // 6. 返回班次数据\r\n    // print \"返回班次数据, ${shift}!\"\r\n    return shift.shift_data\r\n}\r\n\r\n// 排班生成\r\ndef startCal = Calendar.getInstance()\r\nif (effect_time instanceof String) {\r\n    startCal.setTime(sdf.parse(effect_time))\r\n} else {\r\n    startCal.setTime(effect_time)\r\n}       \r\n// 解析结束日期\r\ndef endCal = Calendar.getInstance()\r\nendCal.setTime(sdf.parse(endDate))\r\n\r\n// 遍历日期区间\r\nwhile (!startCal.after(endCal)) {\r\n    def checkinDate = startCal.getTime()\r\n    def shift_data = generateShiftData(checkinDate, workdays, activeShifts)\r\n    def workTime = shift_data?.work_times ?: null\r\n\r\n    def attendance_schedule = sys.entity('attendance_schedule')\r\n    attendance_schedule.rule_data = activeRule.get(\"rule_data\")\r\n    attendance_schedule.rule_name = activeRule.get(\"name\")\r\n    attendance_schedule.rule_id = activeRule.get(\"id\")\r\n    attendance_schedule.checkin_date =  sdf.format(checkinDate)\r\n    attendance_schedule.shift_data = shift_data\r\n    attendance_schedule.work_time = workTime\r\n    attendance_schedule.workday = shift_data != null ? 1 : 0 \r\n    // attendance_schedule.id = UUID.randomUUID().toString() \r\n\r\n    newSchedules.add(attendance_schedule)\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}",
      "codeName" : "RAWSFCODE_02",
      "codeType" : "Groovy",
      "leftPos" : 506,
      "logicNodeType" : "RAWSFCODE",
      "name" : "固定排班/灵活打卡构造新排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_015"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_02"
        }
      } ],
      "topPos" : 770,
      "parallelOutput" : true
    }, {
      "code" : "//1、排班日期区间为五个月，即[ 前三个月 - 当前月 - 下个月]\r\n//2、生成新排班时需要生成生效日期起到排班日期区间止的所有排班\r\ndef activeRule = logic.param('activeRule').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\ndef _default = logic.param('Default').getReal()\r\ndef effect_time = _default.get(\"fill_time\")\r\ndef workdays =  logic.param('workdays').getReal()\r\n\r\n// 获取当前日期\r\ndef now = new Date()\r\ndef calendar = Calendar.getInstance()\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ncalendar.setTime(now)\r\n \r\n// 跳转到下个月\r\ncalendar.add(Calendar.MONTH, 1)\r\n// 设置为下个月最后一天\r\ncalendar.set(Calendar.DAY_OF_MONTH, calendar.getActualMaximum(Calendar.DAY_OF_MONTH))\r\n    \r\n// 排班结束日期\r\ndef endDate = sdf.format(calendar.getTime())\r\n\r\n// 排班生成\r\ndef startCal = Calendar.getInstance()\r\nif (effect_time instanceof String) {\r\n    startCal.setTime(sdf.parse(effect_time))\r\n} else {\r\n    startCal.setTime(effect_time)\r\n}       \r\n// 解析结束日期\r\ndef endCal = Calendar.getInstance()\r\nendCal.setTime(sdf.parse(endDate))\r\n\r\n// 遍历日期区间\r\nwhile (!startCal.after(endCal)) {\r\n    def checkinDate = startCal.getTime()\r\n\r\n    def attendance_schedule = sys.entity('attendance_schedule')\r\n    attendance_schedule.rule_data = activeRule.get(\"rule_data\")\r\n    attendance_schedule.rule_name = activeRule.get(\"name\")\r\n    attendance_schedule.rule_id = activeRule.get(\"id\")\r\n    attendance_schedule.checkin_date =  sdf.format(checkinDate)\r\n    // attendance_schedule.id = UUID.randomUUID().toString() \r\n\r\n    newSchedules.add(attendance_schedule)\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}",
      "codeName" : "RAWSFCODE_06",
      "codeType" : "Groovy",
      "leftPos" : 680,
      "logicNodeType" : "RAWSFCODE",
      "name" : "手动排班构造新排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_015"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_06"
        }
      } ],
      "topPos" : 770,
      "parallelOutput" : true
    }, {
      "code" : "//1、排班日期区间为五个月，即[ 前三个月 - 当前月 - 下个月]\r\n//2、生成新排班时需要生成生效日期起到排班日期区间止的所有排班\r\ndef activeShifts  = logic.param('activeShifts').getReal()\r\ndef activeRule = logic.param('activeRule').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\ndef _default = logic.param('Default').getReal()\r\ndef effect_time = _default.get(\"fill_time\")\r\n\r\n// 获取当前日期\r\ndef now = new Date()\r\ndef calendar = Calendar.getInstance()\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ncalendar.setTime(now)\r\n \r\n// 跳转到下个月\r\ncalendar.add(Calendar.MONTH, 1)\r\n// 设置为下个月最后一天\r\ncalendar.set(Calendar.DAY_OF_MONTH, calendar.getActualMaximum(Calendar.DAY_OF_MONTH))\r\n    \r\n// 排班结束日期\r\ndef endDate = sdf.format(calendar.getTime())\r\n\r\n\r\n// 排班生成\r\ndef startCal = Calendar.getInstance()\r\nif (effect_time instanceof String) {\r\n    startCal.setTime(sdf.parse(effect_time))\r\n} else {\r\n    startCal.setTime(effect_time)\r\n}       \r\n// 解析结束日期\r\ndef endCal = Calendar.getInstance()\r\nendCal.setTime(sdf.parse(endDate))\r\n\r\n// 遍历日期区间\r\nwhile (!startCal.after(endCal)) {\r\n    def checkinDate = startCal.getTime()\r\n    def shift_data = activeShifts[0].shift_data\r\n    def workTime = shift_data?.work_times ?: null\r\n\r\n    def attendance_schedule = sys.entity('attendance_schedule')\r\n    attendance_schedule.rule_data = activeRule.get(\"rule_data\")\r\n    attendance_schedule.rule_name = activeRule.get(\"name\")\r\n    attendance_schedule.rule_id = activeRule.get(\"id\")\r\n    attendance_schedule.checkin_date =  sdf.format(checkinDate)\r\n    attendance_schedule.shift_data = shift_data\r\n    attendance_schedule.work_time = workTime\r\n    attendance_schedule.workday = shift_data != null ? 1 : 0 \r\n    // attendance_schedule.id = UUID.randomUUID().toString() \r\n\r\n    newSchedules.add(attendance_schedule)\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}",
      "codeName" : "RAWSFCODE_01",
      "codeType" : "Groovy",
      "leftPos" : 864,
      "logicNodeType" : "RAWSFCODE",
      "name" : "自由班构造新排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_015"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        }
      } ],
      "topPos" : 770,
      "parallelOutput" : true
    }, {
      "codeName" : "DEDATASET_04",
      "getDstPSDEDataSet" : {
        "modelref" : true,
        "id" : "Default"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "activeFilter"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_rule.json"
      },
      "leftPos" : 970,
      "logicNodeType" : "DEDATASET",
      "name" : "获取所有激活规则",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_03"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "size",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "waitRulePage"
            },
            "logicType" : "SINGLE",
            "name" : "waitRulePage[size] 不等于(<>) 0",
            "paramValue" : "0"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_04"
        }
      } ],
      "getRetPSDELogicParam" : {
        "modelref" : true,
        "id" : "waitRulePage"
      },
      "topPos" : -464,
      "parallelOutput" : true
    }, {
      "code" : "//1、排班日期区间为五个月，即[ 前三个月 - 当前月 - 下个月]\r\n//2、生成新排班时需要生成生效日期起到排班日期区间止的所有排班\r\ndef activeRule = logic.param('activeRule').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\ndef _default = logic.param('Default').getReal()\r\ndef effect_time = _default.get(\"fill_time\")\r\n\r\n// 获取当前日期\r\ndef now = new Date()\r\ndef calendar = Calendar.getInstance()\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ncalendar.setTime(now)\r\n \r\n// 跳转到下个月\r\ncalendar.add(Calendar.MONTH, 1)\r\n// 设置为下个月最后一天\r\ncalendar.set(Calendar.DAY_OF_MONTH, calendar.getActualMaximum(Calendar.DAY_OF_MONTH))\r\n    \r\n// 排班结束日期\r\ndef endDate = sdf.format(calendar.getTime())\r\n\r\n\r\n// 排班生成\r\ndef startCal = Calendar.getInstance()\r\nif (effect_time instanceof String) {\r\n    startCal.setTime(sdf.parse(effect_time))\r\n} else {\r\n    startCal.setTime(effect_time)\r\n}   \r\n// 解析结束日期\r\ndef endCal = Calendar.getInstance()\r\nendCal.setTime(sdf.parse(endDate))\r\n\r\n// 遍历日期区间\r\nwhile (!startCal.after(endCal)) {\r\n    def checkinDate = startCal.getTime()\r\n\r\n    def attendance_schedule = sys.entity('attendance_schedule')\r\n    attendance_schedule.rule_name = activeRule.get(\"name\")\r\n    attendance_schedule.rule_id = activeRule.get(\"id\")\r\n    attendance_schedule.checkin_date =  sdf.format(checkinDate)\r\n    attendance_schedule.workday = 0\r\n\r\n    newSchedules.add(attendance_schedule)\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}",
      "codeName" : "RAWSFCODE_016",
      "codeType" : "Groovy",
      "leftPos" : 1066,
      "logicNodeType" : "RAWSFCODE",
      "name" : "免考勤",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_04"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_016"
        }
      } ],
      "topPos" : 770,
      "parallelOutput" : true
    }, {
      "codeName" : "DEBUGPARAM_03",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "leftPos" : 1230,
      "logicNodeType" : "DEBUGPARAM",
      "name" : "调试逻辑参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_03"
        }
      } ],
      "topPos" : -140,
      "parallelOutput" : true
    }, {
      "codeName" : "LOOPSUBCALL_03",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "attendance_group_shift"
      },
      "leftPos" : 1270,
      "logicNodeType" : "LOOPSUBCALL",
      "name" : "循环子调用",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_05"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_03"
        },
        "subCallLink" : true
      } ],
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "attendance_group_shifts"
      },
      "topPos" : 580,
      "parallelOutput" : true
    }, {
      "code" : "//1、排班日期区间为五个月，即[ 前三个月 - 当前月 - 下个月]\r\n//2、生成新排班时需要生成生效日期起到排班日期区间止的所有排班\r\ndef activeShifts  = logic.param('activeShifts').getReal()\r\ndef activeRule = logic.param('activeRule').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\ndef _default = logic.param('Default').getReal()\r\ndef effect_time = _default.get(\"effect_time\")\r\ndef inversion_cycle = _default.get(\"inversion_cycle\")\r\n\r\n//获取workdays\r\ndef attendance_group_shift = logic.param('attendance_group_shift').getReal()\r\ndef workdays = attendance_group_shift.get(\"workdays\")\r\n\r\n// 获取当前日期\r\ndef now = new Date()\r\ndef calendar = Calendar.getInstance()\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ncalendar.setTime(now)\r\n \r\n// 跳转到下个月\r\ncalendar.add(Calendar.MONTH, 1)\r\n// 设置为下个月最后一天\r\ncalendar.set(Calendar.DAY_OF_MONTH, calendar.getActualMaximum(Calendar.DAY_OF_MONTH))\r\n    \r\n// 排班结束日期\r\ndef endDate = sdf.format(calendar.getTime())\r\n\r\n\r\n// 排班生成\r\ndef startCal = Calendar.getInstance()\r\nstartCal.setTime(effect_time)\r\n    \r\n// 解析结束日期\r\ndef endCal = Calendar.getInstance()\r\nendCal.setTime(sdf.parse(endDate))\r\n\r\n// 计算周期天数（N班倒*7天）\r\nint cycleDays = inversion_cycle * 7\r\n\r\n// 预处理工作日数据：建立周期映射表（仅保留1~cycleDays的配置）\r\ndef validWorkdays = workdays.findAll { it.day_number <= cycleDays }\r\ndef cycleMap = [:]\r\nvalidWorkdays.each { \r\n    cycleMap[it.day_number] = it \r\n}\r\n\r\n// 计算生效日期对应的周期基准日（最近的前序周一）\r\nCalendar baseDateCal = Calendar.getInstance()\r\nbaseDateCal.setTime(effect_time)\r\n// 计算需要回退的天数（1=周日,2=周一,...,7=周六）\r\nint daysToSubtract = (baseDateCal.get(Calendar.DAY_OF_WEEK) - 2 + 7) % 7\r\nif (daysToSubtract > 0) {\r\n    baseDateCal.add(Calendar.DAY_OF_MONTH, -daysToSubtract)\r\n}\r\nDate baseDate = baseDateCal.getTime()\r\n\r\n// 遍历当月每一天\r\nwhile (!startCal.after(endCal)) {\r\n    Date checkinDate = startCal.getTime()\r\n    \r\n    // 计算相对于基准日的天数偏移\r\n    long offsetMillis = checkinDate.getTime() - baseDate.getTime()\r\n    int offsetDays = (offsetMillis / (24 * 60 * 60 * 1000)) as int\r\n    \r\n    // 计算周期位置（1-based）\r\n    int dayInCycle = (offsetDays % cycleDays) + 1\r\n    \r\n    // 查找工作配置\r\n    def workdayConfig = cycleMap[dayInCycle]\r\n\r\n    if(workdayConfig!=null){\r\n          //查找对应的班次信息\r\n        def shift = activeShifts.find { it.id == workdayConfig.shift_id }\r\n        def shift_data =  shift?.shift_data?:null\r\n        def workTime = shift_data?.work_times ?: null\r\n\r\n        def attendance_schedule = sys.entity('attendance_schedule')\r\n        attendance_schedule.rule_data = activeRule.get(\"rule_data\")\r\n        attendance_schedule.rule_name = activeRule.get(\"name\")\r\n        attendance_schedule.rule_id = activeRule.get(\"id\")\r\n        attendance_schedule.checkin_date =  sdf.format(checkinDate)\r\n        attendance_schedule.shift_data = shift_data\r\n        attendance_schedule.work_time = workTime\r\n        attendance_schedule.workday = shift_data != null ? 1 : 0 \r\n        newSchedules.add(attendance_schedule)\r\n\r\n    }\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}\r\n\r\n\r\n",
      "codeName" : "RAWSFCODE_010",
      "codeType" : "Groovy",
      "leftPos" : 1326,
      "logicNodeType" : "RAWSFCODE",
      "name" : "N班倒构造新排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_014"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_010"
        }
      } ],
      "topPos" : 780,
      "parallelOutput" : true
    }, {
      "code" : "def newSchedules = logic.param('newSchedules').getReal()\r\ndef holidays = logic.param('calendarList').getReal()\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\n\r\nnewSchedules.each { attendance_schedule ->\r\n    def checkin_date = sdf.format(attendance_schedule.checkin_date)\r\n    def holiday = holidays.find { sdf.format(it.rq) == checkin_date }\r\n    if(holiday != null ){\r\n        attendance_schedule.shift_data = null\r\n        attendance_schedule.work_time = null\r\n        attendance_schedule.workday = 0\r\n    }\r\n}\r\n",
      "codeName" : "RAWSFCODE_015",
      "codeType" : "Groovy",
      "leftPos" : 762,
      "logicNodeType" : "RAWSFCODE",
      "name" : "判断节假日",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_04"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_015"
        }
      } ],
      "topPos" : 930,
      "parallelOutput" : true
    }, {
      "codeName" : "DEBUGPARAM_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "leftPos" : 1423,
      "logicNodeType" : "DEBUGPARAM",
      "name" : "调试逻辑参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_05"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        }
      } ],
      "topPos" : -464,
      "parallelOutput" : true
    }, {
      "code" : "def activeShifts = logic.param('activeShifts').getReal()\r\ndef activeRule = logic.param('activeRule').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\ndef _default = logic.param('Default').getReal()\r\ndef effect_time = _default.get(\"effect_time\")\r\ndef fill_time = _default.get(\"fill_time\")\r\n\r\ndef rest = _default.get(\"rest\")\r\ndef work = _default.get(\"work\")\r\n\r\ndef attendance_group_shift = logic.param('attendance_group_shift').getReal()\r\ndef workdays = attendance_group_shift.get(\"workdays\")\r\n\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ndef endCal = Calendar.getInstance()\r\nendCal.add(Calendar.MONTH, 1)\r\nendCal.set(Calendar.DAY_OF_MONTH, endCal.getActualMaximum(Calendar.DAY_OF_MONTH))\r\n\r\n// 修改点1：以fill_time作为排班生成起点（零点时间）\r\ndef startCal = Calendar.getInstance()\r\nif (fill_time instanceof String) {\r\n    startCal.setTime(sdf.parse(fill_time))\r\n} else {\r\n    startCal.setTime(fill_time)\r\n}\r\nstartCal.set(Calendar.HOUR_OF_DAY, 0)\r\nstartCal.set(Calendar.MINUTE, 0)\r\nstartCal.set(Calendar.SECOND, 0)\r\nstartCal.set(Calendar.MILLISECOND, 0)\r\n\r\n// 保持effect_time作为周期计算基准\r\n\r\nDate baseDate = effect_time\r\nCalendar effectCal = Calendar.getInstance()\r\nif (effect_time instanceof String) {\r\n    effectCal.setTime(sdf.parse(effect_time))\r\n} else {\r\n    effectCal.setTime(effect_time)\r\n}\r\n\r\n// 计算fill_time相对于effect_time的初始偏移天数\r\nlong effectMillis = effectCal.getTimeInMillis()\r\nlong fillMillis = startCal.getTimeInMillis()\r\nint initialOffsetDays = (fillMillis - effectMillis) / (24 * 60 * 60 * 1000)\r\n\r\n// 构建天数循环映射（保持原逻辑）\r\ndef workdayNum = rest + work\r\ndef cycleMap = [:]\r\nworkdays.eachWithIndex { workday, index ->\r\n    if (index + 1 <= workdayNum) {\r\n        cycleMap[(index + 1)] = workday\r\n    }\r\n}\r\n\r\n// 生成排班数据\r\nwhile (!startCal.after(endCal)) {\r\n    Date checkinDate = startCal.getTime()\r\n    \r\n    // 计算相对于effect_time的偏移天数（核心修改）\r\n    long offsetMillis = checkinDate.time - effectMillis\r\n    int offsetDays = (offsetMillis / (24 * 60 * 60 * 1000)) as int\r\n    int dayInCycle = (offsetDays % workdayNum) + 1  // 周期位置计算\r\n\r\n    def workdayConfig = cycleMap[dayInCycle]\r\n    if (workdayConfig) {\r\n        def shift = workdayConfig.get(\"is_work\") == 1 ? activeShifts[0] : null\r\n        def shiftData = shift?.shift_data ?: [:]\r\n        def workTime = shiftData?.work_times ?: []\r\n\r\n        def attendance_schedule = sys.entity('attendance_schedule')\r\n        attendance_schedule.rule_data = activeRule.rule_data\r\n        attendance_schedule.rule_name = activeRule.name\r\n        attendance_schedule.rule_id = activeRule.id\r\n        attendance_schedule.checkin_date = sdf.format(checkinDate)\r\n        attendance_schedule.shift_data = shiftData\r\n        attendance_schedule.work_time = workTime\r\n        attendance_schedule.workday = shiftData ? 1 : 0\r\n        newSchedules.add(attendance_schedule)\r\n    }\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}",
      "codeName" : "RAWSFCODE_05",
      "codeType" : "Groovy",
      "leftPos" : 1692,
      "logicNodeType" : "RAWSFCODE",
      "name" : "上A休B构造新排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_014"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_05"
        }
      } ],
      "topPos" : 780,
      "parallelOutput" : true
    }, {
      "code" : "def newSchedules = logic.param('newSchedules').getReal()\r\ndef holidays = logic.param('calendarList').getReal()\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\n\r\nnewSchedules.each { attendance_schedule ->\r\n    def checkin_date = sdf.format(attendance_schedule.checkin_date)\r\n    def holiday = holidays.find { sdf.format(it.rq) == checkin_date }\r\n    println(\"判断节假日attendance_schedule\"+attendance_schedule)\r\n    println(\"判断节假日\"+holiday)\r\n    if(holiday != null ){\r\n        attendance_schedule.shift_data = null\r\n        attendance_schedule.work_time = null\r\n        attendance_schedule.workday = 0\r\n    }\r\n}\r\n",
      "codeName" : "RAWSFCODE_014",
      "codeType" : "Groovy",
      "leftPos" : 1511,
      "logicNodeType" : "RAWSFCODE",
      "name" : "判断节假日",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_04"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_014"
        }
      } ],
      "topPos" : 1030,
      "parallelOutput" : true
    }, {
      "codeName" : "DEDATASET_02",
      "getDstPSDEDataSet" : {
        "modelref" : true,
        "id" : "user"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "empFilter"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/employee_management/PSDATAENTITIES/employee.json"
      },
      "leftPos" : 762,
      "logicNodeType" : "DEDATASET",
      "name" : "获取所有人员",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_012"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_02"
        }
      } ],
      "getRetPSDELogicParam" : {
        "modelref" : true,
        "id" : "employees"
      },
      "topPos" : 1202,
      "parallelOutput" : true
    }, {
      "codeName" : "DEBUGPARAM_02",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "depts"
      },
      "leftPos" : 1066,
      "logicNodeType" : "DEBUGPARAM",
      "name" : "输出deptids",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_05"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "size",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "depts"
            },
            "logicType" : "SINGLE",
            "name" : "depts[size] 不等于(<>) 0",
            "paramValue" : "0"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_02"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_04"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_02"
        }
      } ],
      "topPos" : 1202,
      "parallelOutput" : true
    }, {
      "codeName" : "DEDATASET_01",
      "getDstPSDEDataSet" : {
        "modelref" : true,
        "id" : "user"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "empFilter"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/employee_management/PSDATAENTITIES/employee.json"
      },
      "leftPos" : 1768,
      "logicNodeType" : "DEDATASET",
      "name" : "查询部门下人员",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_09"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_01"
        }
      } ],
      "getRetPSDELogicParam" : {
        "modelref" : true,
        "id" : "employees"
      },
      "topPos" : 1310,
      "parallelOutput" : true
    }, {
      "code" : "def employees = logic.param('employees').getReal()\r\ndef members = logic.param('members').getReal()\r\n\r\n\r\ndef uniqueMemberIdMap = new HashMap()\r\n\r\nemployees.each { emp ->\r\n    def member = sys.entity('Attendance_group_shift_member')\r\n    member.set(\"user_id\",emp.id)\r\n    member.set(\"name\",emp.name)\r\n    uniqueMemberIdMap.put(member.user_id, member)\r\n}\r\n\r\nmembers.clear()\r\nmembers.addAll(uniqueMemberIdMap.values())\r\n",
      "codeName" : "RAWSFCODE_012",
      "codeType" : "Groovy",
      "leftPos" : 762,
      "logicNodeType" : "RAWSFCODE",
      "name" : "人员转换",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_04"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_012"
        }
      } ],
      "topPos" : 1350,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_02",
      "leftPos" : 970,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_06"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "size",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "attendance_group_shifts"
            },
            "logicType" : "SINGLE",
            "name" : "attendance_group_shifts[size] 不等于(<>) 0",
            "paramValue" : "0"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "attendance_group_shifts"
        },
        "paramAction" : "BINDPARAM",
        "srcFieldName" : "attendance_group_shifts",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "workdays"
        },
        "paramAction" : "BINDPARAM",
        "srcFieldName" : "workdays",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : -80,
      "parallelOutput" : true
    }, {
      "code" : "def activeRule = logic.param('activeRule').getReal()\r\ndef rule_data = activeRule.get(\"rule_data\")\r\ndef _default = logic.param('Default').getReal()\r\n\r\nprint \"rule_data配置, ${rule_data}\"\r\n\r\n\r\nif (rule_data != null ) {\r\n    Map<String, Object> ruleData = rule_data as Map<String, Object>;\r\n    def workdays = ruleData.get(\"workdays\")\r\n    if (workdays) {\r\n        _default.set(\"workdays\",workdays)\r\n    }\r\n    _workdays = new ArrayList<>(workdays)\r\n\r\n    \r\n    def attendance_group_shifts = ruleData.get(\"attendance_group_shifts\")\r\n    if (attendance_group_shifts) {\r\n        _default.set(\"attendance_group_shifts\",attendance_group_shifts)\r\n    }\r\n\r\n    def effect_time = ruleData.get(\"effect_time\")\r\n    if(effect_time){\r\n        _default.set(\"effect_time\",effect_time)\r\n    } \r\n       \r\n    def rest = ruleData.get(\"rest\")\r\n    if(rest){\r\n        _default.set(\"rest\",rest)\r\n    }\r\n    def work = ruleData.get(\"work\")\r\n    if(work){\r\n        _default.set(\"work\",work)\r\n    }  \r\n\r\n    def inversion_cycle = ruleData.get(\"inversion_cycle\")\r\n    if(inversion_cycle){\r\n        _default.set(\"inversion_cycle\",inversion_cycle)\r\n    }  \r\n    \r\n    def schedule_type = ruleData.get(\"schedule_type\")\r\n    if(schedule_type){\r\n        _default.set(\"schedule_type\",schedule_type)\r\n    }\r\n}",
      "codeName" : "RAWSFCODE_017",
      "codeType" : "Groovy",
      "leftPos" : 970,
      "logicNodeType" : "RAWSFCODE",
      "name" : "获取激活信息",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_03"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_017"
        }
      } ],
      "topPos" : -190,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_05",
      "leftPos" : 1511,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "重新建立参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_011"
        },
        "name" : "休息日不同",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) class_inversion",
            "paramValue" : "class_inversion"
          }, {
            "condOP" : "EQ",
            "dstFieldName" : "SAME_RESTDAY",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SAME_RESTDAY] 等于(=) 0",
            "paramValue" : "0"
          }, {
            "condOP" : "ISNOTNULL",
            "dstFieldName" : "WORKDAYS",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "attendance_group_shift"
            },
            "logicType" : "SINGLE",
            "name" : "attendance_group_shift[WORKDAYS] 值不为空(NotNil)"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_05"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_010"
        },
        "name" : "休息日相同",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) class_inversion",
            "paramValue" : "class_inversion"
          }, {
            "condOP" : "ISNOTNULL",
            "dstFieldName" : "WORKDAYS",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "attendance_group_shift"
            },
            "logicType" : "SINGLE",
            "name" : "attendance_group_shift[WORKDAYS] 值不为空(NotNil)"
          }, {
            "condOP" : "EQ",
            "dstFieldName" : "SAME_RESTDAY",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SAME_RESTDAY] 等于(=) 1",
            "paramValue" : "1"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_05"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_05"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) work_rest",
            "paramValue" : "work_rest"
          }, {
            "condOP" : "ISNOTNULL",
            "dstFieldName" : "WORKDAYS",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "attendance_group_shift"
            },
            "logicType" : "SINGLE",
            "name" : "attendance_group_shift[WORKDAYS] 值不为空(NotNil)"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_05"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "members"
        },
        "paramAction" : "RENEWPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "lastSchedules"
        },
        "paramAction" : "RENEWPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "newSchedules"
        },
        "paramAction" : "RENEWPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "depts"
        },
        "paramAction" : "RENEWPARAM"
      } ],
      "topPos" : 580,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_04",
      "leftPos" : 762,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_04"
        },
        "name" : "非全公司",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "ALL_COMPANY",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "attendance_group_shift"
            },
            "logicType" : "SINGLE",
            "name" : "attendance_group_shift[ALL_COMPANY] 等于(=) false",
            "paramValue" : "false"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_04"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_02"
        },
        "name" : "全公司",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_04"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "attendance_group_shift"
        },
        "paramAction" : "BINDPARAM",
        "srcFieldName" : "0",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "attendance_group_shifts"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "size",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "empFilter"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValue" : "9999",
        "srcValueType" : "SRCVALUE"
      } ],
      "topPos" : 1030
    }, {
      "code" : "def attendance_group_shifts = logic.param('attendance_group_shifts').getReal()\r\ndef members = logic.param('members').getReal()\r\ndef depts = logic.param('depts').getReal()\r\n\r\ndef uniqueMemberIdMap = new HashMap()\r\ndef uniqueDeptIdMap = new HashMap()\r\n\r\ndef _default = logic.param('Default').getReal()\r\nif(attendance_group_shifts!=null){\r\n  attendance_group_shifts.each{ attendance_group_shift ->\r\n    if (attendance_group_shift.members != null) {\r\n      attendance_group_shift.members.each { member ->\r\n      if(member.type == \"person\"){\r\n        uniqueMemberIdMap.put(member.user_id, member) \r\n      }\r\n      if(member.type == \"dept\"){\r\n        uniqueDeptIdMap.put(member.user_id, member) \r\n      }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nmembers.addAll(uniqueMemberIdMap.values())\r\ndepts.addAll(uniqueDeptIdMap.values())\r\n\r\n\r\n// def memberIds = uniqueMemberIdMap.keySet().collect { \"'$it'\" }.join(',')\r\n// def deptIds = uniqueDeptIdMap.keySet().collect { \"'$it'\" }.join(',')\r\n\r\n// _default.set(\"memberIds\",memberIds)\r\n\r\n\r\n\r\n",
      "codeName" : "RAWSFCODE_04",
      "codeType" : "Groovy",
      "leftPos" : 1066,
      "logicNodeType" : "RAWSFCODE",
      "name" : "计算规则成员",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_02"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_04"
        }
      } ],
      "topPos" : 1030
    }, {
      "codeName" : "LOOPSUBCALL_04",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "memberTemp"
      },
      "leftPos" : 1066,
      "logicNodeType" : "LOOPSUBCALL",
      "name" : "遍历规则人员",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_07"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_04"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_02"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_04"
        },
        "subCallLink" : true
      } ],
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "members"
      },
      "topPos" : 1350,
      "parallelOutput" : true
    }, {
      "codeName" : "RAWSQLCALL_02",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "members"
      },
      "leftPos" : 1066,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "删除人员旧排班",
      "getPSDELogicNodeParams" : [ {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "fill_time",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "USER_ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "memberTemp"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "sql" : "DELETE FROM attendance_schedule WHERE  checkin_date >= ? AND member_id = ?",
      "topPos" : 1480,
      "fillDstLogicParam" : true,
      "parallelOutput" : true
    }, {
      "code" : "def _default = logic.param('Default').getReal()\r\ndef now = new Date()\r\n\r\n// 获取下个月第一天\r\ndef calendar = Calendar.getInstance()\r\ncalendar.setTime(now)\r\ncalendar.add(Calendar.MONTH, 1)  \r\ncalendar.set(Calendar.DAY_OF_MONTH, 1)\r\ncalendar.set(Calendar.HOUR_OF_DAY, 0)\r\ncalendar.set(Calendar.MINUTE, 0)\r\ncalendar.set(Calendar.SECOND, 0)\r\ncalendar.set(Calendar.MILLISECOND, 0)\r\n\r\ndef nextMonthFirstDay = calendar.getTime()\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\n _default.set(\"fill_time\",sdf.format(nextMonthFirstDay))\r\n",
      "codeName" : "RAWSFCODE_03",
      "codeType" : "Groovy",
      "leftPos" : 1240,
      "logicNodeType" : "RAWSFCODE",
      "name" : "设置时间",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_03"
        }
      } ],
      "topPos" : -464,
      "parallelOutput" : true
    }, {
      "codeName" : "LOOPSUBCALL_02",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "deptTemp"
      },
      "leftPos" : 1768,
      "logicNodeType" : "LOOPSUBCALL",
      "name" : "循环子调用",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_02"
        },
        "subCallLink" : true
      } ],
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "depts"
      },
      "topPos" : 1080,
      "parallelOutput" : true
    }, {
      "code" : "def employees = logic.param('employees').getReal()\r\ndef allDeptEmp = logic.param('allDeptEmp').getReal()\r\ndef curActiveMember = logic.param('curActiveMember').getReal()\r\ndef members = logic.param('members').getReal()\r\n\r\nallDeptEmp.addAll(employees)\r\n\r\ndef uniqueMemberIdMap = new HashMap()\r\n// 先将原始 members 放入Map\r\nmembers.each { member ->\r\n    uniqueMemberIdMap.put(member.user_id, member)\r\n}\r\n\r\nallDeptEmp.each { emp ->\r\n    def isAlreadyActive = curActiveMember.find { it.user_id == emp.id }\r\n    if (isAlreadyActive) {\r\n        return\r\n    }\r\n\r\n    def member = sys.entity('Attendance_group_shift_member')\r\n    member.set(\"user_id\",emp.id)\r\n    member.set(\"name\",emp.name)\r\n    uniqueMemberIdMap.put(member.user_id, member)\r\n}\r\n\r\nmembers.clear()\r\nmembers.addAll(uniqueMemberIdMap.values())\r\n",
      "codeName" : "RAWSFCODE_09",
      "codeType" : "Groovy",
      "leftPos" : 1768,
      "logicNodeType" : "RAWSFCODE",
      "name" : "过滤出不在其他生效规则内的人员",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_04"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_09"
        }
      } ],
      "topPos" : 1410,
      "parallelOutput" : true
    }, {
      "code" : "def members = logic.param('members').getReal()\r\ndef lastSchedules = logic.param('lastSchedules').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\n\r\nmembers.each { member ->\r\n    if (member == null) return\r\n    newSchedules.each { attendance_schedule ->\r\n        def newSchedule = sys.entity('attendance_schedule')\r\n        attendance_schedule.copyTo(newSchedule)\r\n        newSchedule.member_id = member.user_id\r\n        newSchedule.member_name = member.name\r\n        lastSchedules.add(newSchedule)\r\n    }\r\n}",
      "codeName" : "RAWSFCODE_07",
      "codeType" : "Groovy",
      "leftPos" : 1258,
      "logicNodeType" : "RAWSFCODE",
      "name" : "为规则人员生成新排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION_04"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_07"
        }
      } ],
      "topPos" : 1480,
      "parallelOutput" : true
    }, {
      "codeName" : "END_02",
      "leftPos" : 1270,
      "logicNodeType" : "END",
      "name" : "结束",
      "getReturnParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "returnType" : "LOGICPARAM",
      "topPos" : -334,
      "parallelOutput" : true
    }, {
      "code" : "def activeShifts = logic.param('activeShifts').getReal()\r\ndef activeRule = logic.param('activeRule').getReal()\r\ndef newSchedules = logic.param('newSchedules').getReal()\r\ndef _default = logic.param('Default').getReal()\r\ndef effect_time = _default.get(\"effect_time\")\r\ndef inversion_days = _default.get(\"inversion_days\")\r\n\r\ndef attendance_group_shift = logic.param('attendance_group_shift').getReal()\r\ndef workdays = attendance_group_shift.get(\"workdays\")\r\n\r\ndef sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\r\ndef endCal = Calendar.getInstance()\r\nendCal.add(Calendar.MONTH, 1)\r\nendCal.set(Calendar.DAY_OF_MONTH, endCal.getActualMaximum(Calendar.DAY_OF_MONTH))\r\n\r\ndef startCal = Calendar.getInstance()\r\nstartCal.setTime(effect_time)\r\nstartCal.set(Calendar.HOUR_OF_DAY, 0)\r\nstartCal.set(Calendar.MINUTE, 0)\r\nstartCal.set(Calendar.SECOND, 0)\r\nstartCal.set(Calendar.MILLISECOND, 0)\r\n\r\ndef cycleMap = [:]\r\nworkdays.eachWithIndex { workday, index ->\r\n    if (index + 1 <= inversion_days) {\r\n        cycleMap[(index + 1)] = workday\r\n    }\r\n}\r\n\r\nDate baseDate = startCal.getTime()\r\nwhile (!startCal.after(endCal)) {\r\n    Date checkinDate = startCal.getTime()\r\n    long offsetMillis = checkinDate.time - baseDate.time\r\n    int offsetDays = (offsetMillis / (24 * 60 * 60 * 1000)) as int\r\n    int dayInCycle = (offsetDays % inversion_days) + 1\r\n\r\n    def workdayConfig = cycleMap[dayInCycle]\r\n    if (workdayConfig) {\r\n        def shift = activeShifts.find { it.id == workdayConfig.shift_id }\r\n        def shiftData = shift?.shift_data ?: [:]\r\n        def workTime = shiftData?.work_times ?: []\r\n\r\n        def attendance_schedule = sys.entity('attendance_schedule')\r\n        attendance_schedule.rule_data = activeRule.rule_data\r\n        attendance_schedule.rule_name = activeRule.name\r\n        attendance_schedule.rule_id = activeRule.id\r\n        attendance_schedule.checkin_date = sdf.format(checkinDate)\r\n        attendance_schedule.shift_data = shiftData\r\n        attendance_schedule.work_time = workTime\r\n        attendance_schedule.workday = shiftData ? 1 : 0\r\n        newSchedules.add(attendance_schedule)\r\n    }\r\n    startCal.add(Calendar.DAY_OF_MONTH, 1)\r\n}",
      "codeName" : "RAWSFCODE_011",
      "codeType" : "Groovy",
      "leftPos" : 1511,
      "logicNodeType" : "RAWSFCODE",
      "name" : "N班倒构造新排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_014"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_011"
        }
      } ],
      "topPos" : 780,
      "parallelOutput" : true
    }, {
      "codeName" : "RAWSQLCALL_05",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "curActiveMember"
      },
      "leftPos" : 1530,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "查询当前生效规则成员",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_02"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_05"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "sql" : "select * FROM attendance_group_shift_member WHERE  rule_id != ?\n AND EXISTS (\n    SELECT 1 \n    FROM attendance_rule rule  \n    WHERE \n      rule.id = attendance_group_shift_member.rule_id \n      AND rule.IS_ACTIVATE  = 1\n  )",
      "topPos" : 1202,
      "fillDstLogicParam" : true,
      "ignoreResetDstLogicParam" : false,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_01",
      "leftPos" : 1768,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "N_DEPT_ID_EQ",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "empFilter"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "USER_ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "deptTemp"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "employees"
        },
        "paramAction" : "RENEWPARAM"
      } ],
      "topPos" : 1202,
      "parallelOutput" : true
    }, {
      "codeName" : "RAWSQLCALL_04",
      "leftPos" : 1768,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "将该部门在其他生效规则内移除",
      "getPSDELogicNodeParams" : [ {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "USER_ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "deptTemp"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "sql" : "DELETE FROM attendance_group_shift_member WHERE  user_id = ? and  rule_id != ?\n AND EXISTS (\n    SELECT 1 \n    FROM attendance_rule rule  \n    WHERE \n      rule.id = attendance_group_shift_member.rule_id \n      AND rule.IS_ACTIVATE  = 1\n  )",
      "topPos" : 1506,
      "parallelOutput" : true
    }, {
      "codeName" : "DEACTION_04",
      "getDstPSDEAction" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_schedule/PSDEACTIONS/Create.json"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "lastSchedules"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_schedule.json"
      },
      "leftPos" : 1258,
      "logicNodeType" : "DEACTION",
      "name" : "保存排班",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RESETPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION_04"
        }
      } ],
      "topPos" : 1580,
      "parallelOutput" : true
    }, {
      "codeName" : "RESETPARAM_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "attendance_group_shift"
      },
      "leftPos" : 1258,
      "logicNodeType" : "RESETPARAM",
      "name" : "重置参数",
      "topPos" : 1684,
      "parallelOutput" : true
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "entityParam" : true
    }, {
      "codeName" : "CurRuleSchedules",
      "logicName" : "当前规则下的排班",
      "name" : "当前规则下的排班",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_schedule.json"
      },
      "entityPageParam" : true
    }, {
      "codeName" : "activeFilter",
      "logicName" : "activeFilter",
      "name" : "activeFilter",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_rule.json"
      },
      "filterParam" : true
    }, {
      "codeName" : "activeRule",
      "logicName" : "激活规则",
      "name" : "激活规则",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_rule.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "activeShift",
      "logicName" : "activeShift",
      "name" : "activeShift",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_shift.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "activeShifts",
      "logicName" : "activeShifts",
      "name" : "activeShifts",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_shift.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "allDeptEmp",
      "logicName" : "allDeptEmp",
      "name" : "allDeptEmp",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "allmembers",
      "logicName" : "allmembers",
      "name" : "allmembers",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "attendance_group_shift",
      "logicName" : "attendance_group_shift",
      "name" : "attendance_group_shift",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "attendance_group_shifts",
      "logicName" : "组排班",
      "name" : "组排班",
      "entityListParam" : true
    }, {
      "codeName" : "attendance_scheduleFilter",
      "logicName" : "attendance_scheduleFilter",
      "name" : "attendance_scheduleFilter",
      "filterParam" : true
    }, {
      "codeName" : "attendance_scheduleTemp",
      "logicName" : "attendance_scheduleTemp",
      "name" : "attendance_scheduleTemp",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_schedule.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "attendance_scheduleTemps",
      "logicName" : "attendance_scheduleTemps",
      "name" : "attendance_scheduleTemps",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_schedule.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "calendarFilter",
      "logicName" : "calendarFilter",
      "name" : "calendarFilter",
      "filterParam" : true
    }, {
      "codeName" : "calendarList",
      "logicName" : "calendarList",
      "name" : "calendarList",
      "entityListParam" : true
    }, {
      "codeName" : "curActiveMember",
      "logicName" : "curActiveMember",
      "name" : "curActiveMember",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "deptTemp",
      "logicName" : "deptTemp",
      "name" : "deptTemp",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "depts",
      "logicName" : "depts",
      "name" : "depts",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "empFilter",
      "logicName" : "empFilter",
      "name" : "empFilter",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/employee_management/PSDATAENTITIES/employee.json"
      },
      "filterParam" : true
    }, {
      "codeName" : "employees",
      "logicName" : "employees",
      "name" : "employees",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/employee_management/PSDATAENTITIES/employee.json"
      },
      "entityPageParam" : true
    }, {
      "codeName" : "lastSchedules",
      "logicName" : "新排班",
      "name" : "新排班",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_schedule.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "memberTemp",
      "logicName" : "memberTemp",
      "name" : "memberTemp",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "members",
      "logicName" : "members",
      "name" : "members",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "newSchedules",
      "logicName" : "newSchedules",
      "name" : "newSchedules",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_schedule.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "shiftFilter",
      "logicName" : "shiftFilter",
      "name" : "shiftFilter",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_shift.json"
      },
      "filterParam" : true
    }, {
      "codeName" : "shifts",
      "logicName" : "shifts",
      "name" : "shifts",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_shift.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "srfactionparam",
      "logicName" : "srfactionparam",
      "name" : "srfactionparam",
      "entityListParam" : true
    }, {
      "codeName" : "temp",
      "logicName" : "temp",
      "name" : "temp",
      "entityParam" : true
    }, {
      "codeName" : "waitRulePage",
      "logicName" : "waitRulePage",
      "name" : "waitRulePage",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_rule.json"
      },
      "entityPageParam" : true
    }, {
      "codeName" : "workdays",
      "logicName" : "workdays",
      "name" : "workdays",
      "entityListParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "executeCompletion3",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/executeCompletion3.json",
    "logicName" : "定时补充排班3",
    "memo" : "为已激活规则补全排班，每月1日执行，生成下个月排班",
    "name" : "定时补充排班3",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : 200,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL1"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : 188,
      "parallelOutput" : true
    }, {
      "codeName" : "RAWSQLCALL1",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "rules"
      },
      "leftPos" : 330,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "需补全排班的规则",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL1"
        }
      } ],
      "sql" : "SELECT \r\n   *\r\nFROM \r\n    attendance_activate_rule r\r\nWHERE \r\n    EXISTS (\r\n        SELECT \r\n            1\r\n        FROM \r\n            attendance_group_shift_member gsm\r\n        WHERE \r\n            gsm.rule_id = r.id\r\n    )",
      "topPos" : 196,
      "fillDstLogicParam" : true,
      "ignoreResetDstLogicParam" : false
    }, {
      "codeName" : "LOOPSUBCALL_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "temp"
      },
      "leftPos" : 540,
      "logicNodeType" : "LOOPSUBCALL",
      "name" : "循环子调用",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE2"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        },
        "subCallLink" : true
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        }
      } ],
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "rules"
      },
      "topPos" : 196,
      "parallelOutput" : true
    }, {
      "code" : "def temp = logic.param('temp').getReal()\r\ndef rule = logic.param('rule').getReal()\r\n\r\ndef rule_data = temp.get(\"rule_data\").any()\r\nif (rule_data){\r\n\r\n    def rule_runtime = sys.dataentity('attendance_rule')\r\n    rule_runtime.createEntity(rule_data).copyTo(rule)\r\n    // 获取下个月第一天\r\n    def calendar = Calendar.getInstance()\r\n    calendar.time = new Date()\r\n    calendar.add(Calendar.MONTH, 1)\r\n    calendar.set(Calendar.DAY_OF_MONTH, 1)\r\n    calendar.set(Calendar.HOUR_OF_DAY, 0)\r\n    calendar.set(Calendar.MINUTE, 0)\r\n    calendar.set(Calendar.SECOND, 0)\r\n    calendar.set(Calendar.MILLISECOND, 0)\r\n    rule.set(\"limitTime\", calendar.getTime())\r\n    //转换scope\r\n    def shifts = temp.get(\"rule_data\").any().get(\"shifts\")\r\n    if(shifts){\r\n        def _shifts = logic.param('shifts').getReal()\r\n        shifts.forEach { shift ->\r\n            def newShift = sys.entity('shift')\r\n            shift.copyTo(newShift)\r\n            _shifts.add(newShift)\r\n        }\r\n        rule.set(\"shifts\",_shifts)\r\n    }\r\n}",
      "codeName" : "RAWSFCODE2",
      "codeType" : "Groovy",
      "leftPos" : 835,
      "logicNodeType" : "RAWSFCODE",
      "name" : "执行脚本代码",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DELOGIC_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE2"
        }
      } ],
      "topPos" : 196
    }, {
      "codeName" : "DELOGIC_01",
      "getDstPSDELogic" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/activeRule.json"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "rule"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "leftPos" : 1000,
      "logicNodeType" : "DELOGIC",
      "name" : "按限制时间补全规则",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM1"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DELOGIC_01"
        }
      } ],
      "topPos" : 388,
      "parallelOutput" : true
    }, {
      "codeName" : "END_01",
      "leftPos" : 755,
      "logicNodeType" : "END",
      "name" : "结束",
      "topPos" : 420,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM1",
      "leftPos" : 1200,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicNodeParams" : [ {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "shifts"
        },
        "name" : " ==> shifts",
        "paramAction" : "RENEWPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "rule"
        },
        "name" : " ==> rule",
        "paramAction" : "RENEWPARAM"
      } ],
      "topPos" : 520,
      "parallelOutput" : true
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "entityParam" : true
    }, {
      "codeName" : "rule",
      "logicName" : "rule",
      "name" : "rule",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "ruleFilter",
      "logicName" : "ruleFilter",
      "name" : "ruleFilter",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_rule.json"
      },
      "filterParam" : true
    }, {
      "codeName" : "rules",
      "logicName" : "rules",
      "name" : "rules",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_rule.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "shifts",
      "logicName" : "shifts",
      "name" : "shifts",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_shift.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "temp",
      "logicName" : "temp",
      "name" : "temp",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_activate_rule.json"
      },
      "entityParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "fillGroupShift",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/fillGroupShift.json",
    "logicName" : "填充组排班",
    "name" : "填充组排班",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : -48,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : 114,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_02",
      "leftPos" : -88,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 不等于(<>) class_inversion",
            "paramValue" : "class_inversion"
          }, {
            "condOP" : "NOTEQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 不等于(<>) work_rest",
            "paramValue" : "work_rest"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_04"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) class_inversion",
            "paramValue" : "class_inversion"
          }, {
            "condOP" : "EQ",
            "dstFieldName" : "SAME_RESTDAY",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SAME_RESTDAY] 等于(=) 1",
            "paramValue" : "1"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_03"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "groupOP" : "OR",
            "logicType" : "GROUP",
            "name" : "OR",
            "getPSDELogicLinkConds" : [ {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) work_rest",
              "paramValue" : "work_rest"
            }, {
              "groupOP" : "AND",
              "logicType" : "GROUP",
              "name" : "AND",
              "getPSDELogicLinkConds" : [ {
                "condOP" : "EQ",
                "dstFieldName" : "SCHEDULE_TYPE",
                "getDstLogicParam" : {
                  "modelref" : true,
                  "id" : "Default"
                },
                "logicType" : "SINGLE",
                "name" : "Default[SCHEDULE_TYPE] 等于(=) class_inversion",
                "paramValue" : "class_inversion"
              }, {
                "condOP" : "EQ",
                "dstFieldName" : "SAME_RESTDAY",
                "getDstLogicParam" : {
                  "modelref" : true,
                  "id" : "Default"
                },
                "logicType" : "SINGLE",
                "name" : "Default[SAME_RESTDAY] 等于(=) 0",
                "paramValue" : "0"
              } ]
            } ]
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "group_shifts",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "paramAction" : "SETPARAMVALUE",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "groupShifts"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 224,
      "parallelOutput" : true
    }, {
      "code" : "def _default = logic.param('Default').getReal()\r\n\r\ndef groupShifts = _default.get(\"group_shifts\")\r\n\r\ndef group_num = _default.group_num ?: 2\r\n\r\ndef inversion_cycle = _default.get(\"inversion_cycle\")\r\ndef workdays = _default.get(\"workdays\")\r\n\r\ndef week1 = _default.get(\"week1\")?:\"\"\r\ndef week2 = _default.get(\"week2\")?:\"\"\r\ndef week3 = _default.get(\"week3\")?:\"\"\r\ndef week4 = _default.get(\"week4\")?:\"\"\r\n\r\n// 将week字符串转换为数字集合\r\ndef getWeekSet = { weekStr ->\r\n    weekStr?.tokenize(',')*.toInteger() as Set\r\n}\r\n\r\ndef weekSet1 = getWeekSet(week1)\r\ndef weekSet2 = getWeekSet(week2)\r\ndef weekSet3 = getWeekSet(week3)\r\ndef weekSet4 = getWeekSet(week4)\r\n\r\n// 根据 inversion_cycle 计算阈值并筛选工作日\r\ndef filteredWorkdays = []\r\nSet<Integer> selectionSet = []\r\nswitch (inversion_cycle) {\r\n    case 1:\r\n        selectionSet.addAll(weekSet1)\r\n        filteredWorkdays = workdays.findAll { it.day_number < 8 }\r\n        break\r\n    case 2:\r\n        selectionSet.addAll(weekSet1 + weekSet2)\r\n        filteredWorkdays = workdays.findAll { it.day_number < 15 }\r\n        break\r\n    case 3:\r\n        selectionSet.addAll(weekSet1 + weekSet2 + weekSet3)\r\n        filteredWorkdays = workdays.findAll { it.day_number < 22 }\r\n\r\n        break\r\n    case 4:\r\n        selectionSet.addAll(weekSet1 + weekSet2 + weekSet3 + weekSet4)\r\n        filteredWorkdays = workdays \r\n        break\r\n}\r\nfilteredWorkdays = filteredWorkdays.sort { a, b -> a.day_number <=> b.day_number }\r\n\r\nfinal WEEK_DAYS = ['周一', '周二', '周三', '周四', '周五', '周六', '周日']\r\n\r\nfilteredWorkdays.each { day ->\r\n    def offset = (day.day_number - 8 + 7) % 7\r\n    day.set(\"name\", WEEK_DAYS[offset])\r\n    day.set(\"is_work\", selectionSet.contains(day.day_number) ? 1 : 0)\r\n}\r\n\r\n(1..group_num).each { i ->\r\n    def new_group = sys.entity('attendance_group_shift')\r\n    if (new_group) {\r\n        new_group.schedule_type = _default.get(\"schedule_type\")\r\n        new_group.rule_id = _default.get(\"id\")\r\n        new_group.workdays = filteredWorkdays\r\n        new_group.all_company = false\r\n        new_group.order_num = i\r\n        groupShifts.add(new_group)\r\n    }\r\n}",
      "codeName" : "RAWSFCODE_04",
      "codeType" : "Groovy",
      "leftPos" : -88,
      "logicNodeType" : "RAWSFCODE",
      "name" : "N班倒-休息日相同",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_04"
        }
      } ],
      "topPos" : 410,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_01",
      "leftPos" : 148,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备组排班数据",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "ALL_COMPANY",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "groupShift"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValue" : "false",
        "srcValueType" : "SRCVALUE"
      }, {
        "dstFieldName" : "ORDER_NUM",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "groupShift"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValue" : "1",
        "srcValueType" : "SRCVALUE"
      }, {
        "dstIndex" : 0,
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "groupShifts"
        },
        "paramAction" : "APPENDPARAM",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "groupShift"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "group_shifts",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "paramAction" : "SETPARAMVALUE",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "groupShifts"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 420,
      "parallelOutput" : true
    }, {
      "code" : "def _default = logic.param('Default').getReal()\n\ndef groupShifts = _default.get(\"group_shifts\")\n\ndef group_num = _default.group_num ?: 2\ndef workdays = _default.get(\"workdays\")\n\n(1..group_num).each { i ->\n    def new_group = sys.entity('attendance_group_shift')\n    if (new_group) {\n        new_group.schedule_type = _default.get(\"schedule_type\")\n        new_group.rule_id = _default.get(\"id\")\n        new_group.workdays = workdays\n        new_group.all_company = false\n        new_group.order_num = i\n        groupShifts.add(new_group)\n    }\n}\n",
      "codeName" : "RAWSFCODE_03",
      "codeType" : "Groovy",
      "leftPos" : -340,
      "logicNodeType" : "RAWSFCODE",
      "name" : "上A休B/N班倒-休息日不同",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_03"
        }
      } ],
      "topPos" : 420,
      "parallelOutput" : true
    }, {
      "code" : "def groupShifts = logic.param('groupShifts').getReal()\n\ngroupShifts.each { group ->\n    if (group == null) return\n    logic.param('groupShifts').getDataEntityRuntime().fillEntityKeyValue(group)\n}\n",
      "codeName" : "RAWSFCODE_01",
      "codeType" : "Groovy",
      "leftPos" : -88,
      "logicNodeType" : "RAWSFCODE",
      "name" : "生成标识",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        }
      } ],
      "topPos" : 598,
      "parallelOutput" : true
    }, {
      "codeName" : "END_01",
      "leftPos" : -48,
      "logicNodeType" : "END",
      "name" : "结束",
      "getReturnParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "returnType" : "LOGICPARAM",
      "topPos" : 702,
      "parallelOutput" : true
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "entityParam" : true
    }, {
      "codeName" : "groupShift",
      "logicName" : "groupShift",
      "name" : "groupShift",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "groupShifts",
      "logicName" : "groupShifts",
      "name" : "groupShifts",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift.json"
      },
      "entityListParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "fillShift",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/fillShift.json",
    "logicName" : "填充默认班次",
    "name" : "填充默认班次",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : -110,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_03"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "groupOP" : "OR",
            "logicType" : "GROUP",
            "name" : "OR",
            "getPSDELogicLinkConds" : [ {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) flexible",
              "paramValue" : "flexible"
            }, {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) alternate_week",
              "paramValue" : "alternate_week"
            }, {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) fixed",
              "paramValue" : "fixed"
            }, {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) free",
              "paramValue" : "free"
            }, {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) work_rest",
              "paramValue" : "work_rest"
            } ]
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        },
        "name" : "N班倒",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) class_inversion",
            "paramValue" : "class_inversion"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_03"
        },
        "name" : "手动排班",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) manual",
            "paramValue" : "manual"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : 472,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_03",
      "leftPos" : 30,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_03"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "n_public_flag_eq",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "shiftFilter"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValue" : "1",
        "srcValueType" : "SRCVALUE"
      }, {
        "dstFieldName" : "n_default_flag_eq",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "shiftFilter"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValue" : "1",
        "srcValueType" : "SRCVALUE"
      } ],
      "topPos" : 470,
      "parallelOutput" : true
    }, {
      "codeName" : "DEDATASET_01",
      "getDstPSDEDataSet" : {
        "modelref" : true,
        "id" : "Default"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "shiftFilter"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_shift.json"
      },
      "leftPos" : 250,
      "logicNodeType" : "DEDATASET",
      "name" : "实体数据集",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "BINDPARAM_01"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "size",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "shiftPage"
            },
            "logicType" : "SINGLE",
            "name" : "shiftPage[size] 不等于(<>) 0",
            "paramValue" : "0"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_01"
        }
      } ],
      "getRetPSDELogicParam" : {
        "modelref" : true,
        "id" : "shiftPage"
      },
      "topPos" : 470,
      "parallelOutput" : true
    }, {
      "codeName" : "BINDPARAM_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "shift"
      },
      "leftPos" : 480,
      "logicNodeType" : "BINDPARAM",
      "name" : "绑定参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_04"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "BINDPARAM_01"
        }
      } ],
      "srcFieldName" : "0",
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "shiftPage"
      },
      "topPos" : 470,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_04",
      "leftPos" : 250,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_02"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_04"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "PUBLIC_FLAG",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "shift"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValue" : "0",
        "srcValueType" : "SRCVALUE"
      }, {
        "dstFieldName" : "ID",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "shift"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValueType" : "NULLVALUE"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "scopes"
        },
        "paramAction" : "BINDPARAM",
        "srcFieldName" : "SCOPES",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "shift"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "scope"
        },
        "paramAction" : "BINDPARAM",
        "srcFieldName" : "0",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "scopes"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "ID",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "scope"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValueType" : "NULLVALUE"
      }, {
        "dstFieldName" : "SHIFT_ID",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "scope"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValueType" : "NULLVALUE"
      }, {
        "dstFieldName" : "NAME",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "shift"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValue" : "白班",
        "srcValueType" : "SRCVALUE"
      }, {
        "dstFieldName" : "ORDER_VALUE",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "scope"
        },
        "name" : "直接值[1] ==> scope[ORDER_VALUE]",
        "paramAction" : "SETPARAMVALUE",
        "srcValue" : "1",
        "srcValueType" : "SRCVALUE"
      } ],
      "topPos" : 620,
      "parallelOutput" : true
    }, {
      "code" : "def _shifts = logic.param('shifts').getReal()\r\n\r\n// 生成白班和晚班配置\r\ndef createShift = { name, startTime, endTime,order_value ->\r\n    return [\r\n        attendance_ratio: 1.0,\r\n        order_value: order_value,\r\n        working_number: 1,\r\n        schedule_type: \"class_inversion\",\r\n        scopes: [\r\n            [\r\n                early_for_absenteeism: 60,\r\n                early_for_early: 0,\r\n                latest_checkout: 480,\r\n                earliest_checkin: 60,\r\n                end_base_time: endTime,\r\n                late_for_absenteeism: 60,\r\n                late_for_late: 0,\r\n                shift_name: name,\r\n                start_base_time: startTime,\r\n                order_value:1,\r\n                next_tag: name==\"晚班\"?\"0,1\":null\r\n            ]\r\n        ],\r\n        default_flag: 0,\r\n        public_flag: 0,\r\n        name: name,\r\n        id:  java.util.UUID.randomUUID()\r\n    ]\r\n}\r\n\r\ndef dayShift = createShift(\"白班\", \"09:00:00\", \"20:00:00\",1)\r\ndef nightShift = createShift(\"晚班\", \"20:00:00\", \"08:00:00\",2) \r\n\r\n_shifts << dayShift\r\n_shifts << nightShift\r\n\r\ndef _default = logic.param('Default').getReal();\r\n_default.set(\"shifts\",_shifts);\r\n",
      "codeName" : "RAWSFCODE_01",
      "codeType" : "Groovy",
      "leftPos" : 66,
      "logicNodeType" : "RAWSFCODE",
      "name" : "执行脚本代码",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM4"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        }
      } ],
      "topPos" : 760,
      "parallelOutput" : true
    }, {
      "code" : "def _shift = logic.param('shift').getReal()\r\n\r\nlogic.param('shift').getDataEntityRuntime().fillEntityKeyValue(_shift)\r\n\r\ndef _scope = logic.param('scope').getReal()\r\n\r\nlogic.param('scope').getDataEntityRuntime().fillEntityKeyValue(_scope)\r\n_scope.shift_id = _shift.id\r\n",
      "codeName" : "RAWSFCODE_02",
      "codeType" : "Groovy",
      "leftPos" : 250,
      "logicNodeType" : "RAWSFCODE",
      "name" : "执行脚本代码",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_02"
        }
      } ],
      "topPos" : 760,
      "parallelOutput" : true
    }, {
      "code" : "def _shifts = logic.param('shifts').getReal()\r\n\r\ndef createShift = { name, startTime, endTime ->\r\n    return [\r\n        attendance_ratio: 1.0,\r\n        working_number: 1,\r\n        schedule_type: \"manual\",\r\n        order_value:1,\r\n        scopes: [\r\n            [\r\n                early_for_absenteeism: 60,\r\n                early_for_early: 0,\r\n                latest_checkout: 480,\r\n                earliest_checkin: 60,\r\n                end_base_time: endTime,\r\n                late_for_absenteeism: 60,\r\n                late_for_late: 0,\r\n                shift_name: name,\r\n                start_base_time: startTime,\r\n                order_value:1\r\n            ]\r\n        ],\r\n        default_flag: 0,\r\n        public_flag: 0,\r\n        name: name,\r\n        id:  java.util.UUID.randomUUID()\r\n    ]\r\n}\r\n\r\ndef shift1 = createShift(\"班次1\", \"08:00:00\", \"17:00:00\")\r\n\r\n_shifts << shift1\r\n\r\ndef _default = logic.param('Default').getReal();\r\n_default.set(\"shifts\",_shifts);\r\n_default.set(\"shift_num\",1);\r\n\r\n",
      "codeName" : "RAWSFCODE_03",
      "codeType" : "Groovy",
      "leftPos" : -150,
      "logicNodeType" : "RAWSFCODE",
      "name" : "执行脚本代码",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM4"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_03"
        }
      } ],
      "topPos" : 760,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_01",
      "leftPos" : 250,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM4"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "shifts",
        "dstIndex" : 0,
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "shifts"
        },
        "paramAction" : "APPENDPARAM",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "shift"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "shifts",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "paramAction" : "SETPARAMVALUE",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "shifts"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "SCHEDULE_TYPE",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "shift"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "SCHEDULE_TYPE",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 890,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM4",
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM4"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "DEFAULT_SHIFT",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "name" : "shift[ID] ==> Default[DEFAULT_SHIFT]",
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "shift"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 1080,
      "parallelOutput" : true
    }, {
      "codeName" : "END_01",
      "leftPos" : 290,
      "logicNodeType" : "END",
      "name" : "结束",
      "getReturnParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "returnType" : "LOGICPARAM",
      "topPos" : 1140,
      "parallelOutput" : true
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "entityParam" : true
    }, {
      "codeName" : "scope",
      "logicName" : "scope",
      "name" : "scope",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_scope.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "scopes",
      "logicName" : "scopes",
      "name" : "scopes",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_scope.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "shift",
      "logicName" : "shift",
      "name" : "shift",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_shift.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "shiftFilter",
      "logicName" : "shiftFilter",
      "name" : "shiftFilter",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_shift.json"
      },
      "filterParam" : true
    }, {
      "codeName" : "shiftPage",
      "logicName" : "shiftPage",
      "name" : "shiftPage",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_shift.json"
      },
      "entityPageParam" : true
    }, {
      "codeName" : "shifts",
      "logicName" : "shifts",
      "name" : "shifts",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_shift.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "work_time",
      "logicName" : "work_time",
      "name" : "work_time",
      "stdDataType" : 25,
      "simpleParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "fillWorkDays",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/fillWorkDays.json",
    "logicName" : "填充工作日",
    "name" : "填充工作日",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : -110,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_05"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : 198,
      "parallelOutput" : true
    }, {
      "code" : "def _default = logic.param('Default').getReal();\ndef shifts = logic.param('shifts').getReal();\ndef defaultShift = shifts.find { it.default_flag == 1 }\nif(defaultShift){\n    def workdays = _default.get(\"workdays\") ? _default.get(\"workdays\") : [];\n    def selection = _default.get(\"workday\") ?_default.get(\"workday\"):\"\"\n\n  // 获取已存在的 workday\n    def existingDays = workdays.collect { it.name as Integer }\n\n    def fillWorkdays = []\n    (1..7).each { i ->  \n        if (!existingDays.contains(i)) {\n            def workday = [\n                name  : i.toString(),\n                day_number : i,\n                shift_id : selection.contains(i.toString())?defaultShift.id:null\n        ]\n            fillWorkdays << workday\n        }\n    }\n\n    // 合并后排序\n    def combinedWorkdays = (workdays + fillWorkdays).sort { \n        it.day_number\n    }    \n    \n    // // 为每个工作日填充工作时间\n    // combinedWorkdays = combinedWorkdays.collect { workday ->\n    //     def worktimeParts = []\n \n    //     if (workday.shift_id != null && defaultShift?.scopes) {\n    //         // 创建时间格式化工具 (HH:mm 格式)\n    //         def timeFormat = new java.text.SimpleDateFormat(\"HH:mm\")\n    //         defaultShift.scopes.each { scope ->\n    //             // 安全处理时间戳\n    //             def start = scope.start_base_time ? timeFormat.format(scope.start_base_time) : \"\"\n    //             def end = scope.end_base_time ? timeFormat.format(scope.end_base_time) : \"\"\n    //             if (start && end) worktimeParts << \"${start}-${end}\"\n    //         }\n    //     }\n \n    //     // 构建工作时间字符串\n    //     workday.work_time = worktimeParts.isEmpty() ? \"休息日\" : worktimeParts.join('/')\n    //     return workday\n    // }\n    \n    _default.set(\"workdays\", combinedWorkdays)\n}",
      "codeName" : "RAWSFCODE_01",
      "codeType" : "Groovy",
      "leftPos" : 520,
      "logicNodeType" : "RAWSFCODE",
      "name" : "固定排班/灵活打卡填充工作日",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        }
      } ],
      "topPos" : 96,
      "parallelOutput" : true
    }, {
      "code" : "def _default = logic.param('Default').getReal()\r\ndef workday = _default.get(\"workday\")?: \"\"\r\ndef schedule_type = _default.get(\"schedule_type\")\r\ndef workdays = _default.get(\"workdays\")\r\n\r\n//固定排班、灵活打卡>workday\r\nif (workday == \"\" && \r\n    workdays != null&&\r\n    ( schedule_type == \"fixed\" || schedule_type == \"flexible\")) \r\n{\r\n        workday = workdays\r\n                .findAll { it.shift_id != null } \r\n                .sort { a, b -> a.day_number <=> b.day_number }\r\n                .collect { it.day_number } \r\n                .join(',')\r\n\r\n        _default.set(\"workday\",workday)    \r\n}\r\n\r\n//计算工作日week1\r\ndef week1 = _default.get(\"week1\")?: \"\"\r\nif (week1 == \"\"&& workdays != null) {\r\n    if(schedule_type == \"alternate_week\" ){\r\n        week1 = workdays\r\n                .findAll { it.shift_id != null && it.day_number < 8} \r\n                .sort { a, b -> a.day_number <=> b.day_number }\r\n                .collect { it.day_number } \r\n                .join(',')\r\n    }\r\n    if(schedule_type == \"class_inversion\") {\r\n         week1 = workdays\r\n                .findAll { it.id != null && it.day_number < 8} \r\n                .sort { a, b -> a.day_number <=> b.day_number }\r\n                .collect { it.day_number } \r\n                .join(',')\r\n    }\r\n    _default.set(\"week1\",week1)    \r\n}\r\n//计算工作日week2\r\ndef week2 = _default.get(\"week2\")?: \"\"\r\nif (week2 == \"\"&& workdays != null) {\r\n    if(schedule_type == \"alternate_week\" ){\r\n        week2 = workdays\r\n                .findAll { it.shift_id != null && 7<it.day_number && it.day_number < 15} \r\n                .sort { a, b -> a.day_number <=> b.day_number }\r\n                .collect { it.day_number } \r\n                .join(',')\r\n    }\r\n    if(schedule_type == \"class_inversion\") {\r\n         week2 = workdays\r\n                .findAll { it.id != null && 7<it.day_number && it.day_number < 15} \r\n                .sort { a, b -> a.day_number <=> b.day_number }\r\n                .collect { it.day_number } \r\n                .join(',')\r\n    }\r\n    _default.set(\"week2\",week2)    \r\n\r\n}\r\n\r\n//计算工作日week3\r\ndef week3 = _default.get(\"week3\")?: \"\"\r\nif (week3 == \"\" && schedule_type == \"class_inversion\" && workdays != null) {\r\n    week3 = workdays\r\n        .findAll { it.id != null && 14<it.day_number && it.day_number < 22} \r\n        .sort { a, b -> a.day_number <=> b.day_number }\r\n        .collect { it.day_number } \r\n        .join(',')\r\n    _default.set(\"week3\",week3) \r\n}\r\n//计算工作日week4\r\ndef week4 = _default.get(\"week4\")?: \"\"\r\nif (week4 == \"\" && schedule_type == \"class_inversion\"&& workdays != null) {\r\n    week4 = workdays\r\n        .findAll { it.id != null && 21<it.day_number && it.day_number < 29} \r\n        .sort { a, b -> a.day_number <=> b.day_number }\r\n        .collect { it.day_number } \r\n        .join(',')\r\n    _default.set(\"week4\",week4) \r\n\r\n}\r\n\r\n\r\n",
      "codeName" : "RAWSFCODE_05",
      "codeType" : "Groovy",
      "leftPos" : 56,
      "logicNodeType" : "RAWSFCODE",
      "name" : "计算week、workday",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 不等于(<>) manual",
            "paramValue" : "manual"
          }, {
            "condOP" : "NOTEQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 不等于(<>) free",
            "paramValue" : "free"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_05"
        }
      } ],
      "topPos" : 196,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_01",
      "leftPos" : 320,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "groupOP" : "OR",
            "logicType" : "GROUP",
            "name" : "OR",
            "getPSDELogicLinkConds" : [ {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) flexible",
              "paramValue" : "flexible"
            }, {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) fixed",
              "paramValue" : "fixed"
            } ]
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_02"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) alternate_week",
            "paramValue" : "alternate_week"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_03"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) work_rest",
            "paramValue" : "work_rest"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_04"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) class_inversion",
            "paramValue" : "class_inversion"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "shifts"
        },
        "paramAction" : "BINDPARAM",
        "srcFieldName" : "shifts",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 196,
      "parallelOutput" : true
    }, {
      "code" : "def _default = logic.param('Default').getReal();\ndef shifts = logic.param('shifts').getReal();\ndef defaultShift = shifts.find { it.default_flag == 1 }\nif(defaultShift){\n    def workdays = _default.get(\"workdays\") ? _default.get(\"workdays\") : [];\n    def big_week = _default.get(\"week1\") ?_default.get(\"week1\"):\"\";\n    def small_week = _default.get(\"week2\") ?_default.get(\"week2\"):\"\";\n    def selection = big_week+\",\"+small_week\n\n  // 获取已存在的 workday\n    def existingDays = workdays.collect { it.day_number }\n\n    def fillWorkdays = []\n    (1..14).each { i ->  \n        if (!existingDays.contains(i)) {\n            def workday = [\n                name  : i.toString(),\n                day_number : i,\n                shift_id : selection.contains(i.toString())?defaultShift.id:null\n        ]\n            fillWorkdays << workday\n        }\n    }\n\n    // 合并后排序\n    def combinedWorkdays = (workdays + fillWorkdays).sort { \n        it.day_number \n    }    \n    _default.set(\"workdays\", combinedWorkdays)\n}",
      "codeName" : "RAWSFCODE_02",
      "codeType" : "Groovy",
      "leftPos" : 520,
      "logicNodeType" : "RAWSFCODE",
      "name" : "大小周填充工作日",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_02"
        }
      } ],
      "topPos" : 196,
      "parallelOutput" : true
    }, {
      "codeName" : "DEBUGPARAM_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "leftPos" : 720,
      "logicNodeType" : "DEBUGPARAM",
      "name" : "调试逻辑参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        }
      } ],
      "topPos" : 196,
      "parallelOutput" : true
    }, {
      "codeName" : "END_01",
      "leftPos" : 926,
      "logicNodeType" : "END",
      "name" : "结束",
      "getReturnParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "returnType" : "LOGICPARAM",
      "topPos" : 200,
      "parallelOutput" : true
    }, {
      "code" : "def _default = logic.param('Default').getReal();\ndef shifts = logic.param('shifts').getReal();\ndef defaultShift = shifts.find { it.default_flag == 1 }\nif(defaultShift){\n    def work = _default.get(\"work\") ?_default.get(\"work\"):5;\n    def rest = _default.get(\"rest\") ?_default.get(\"rest\"):2;\n    def num = work+rest;\n\n    def fillWorkdays = [];\n    (1..num).each { i ->  \n        def workday = [\n            name  : \"第\"+i+\"天\",\n            day_number : i,\n            title : \"工作/休息\"\n        ]\n        fillWorkdays << workday\n    }\n\n    _default.set(\"workdays\", fillWorkdays)\n}",
      "codeName" : "RAWSFCODE_03",
      "codeType" : "Groovy",
      "leftPos" : 520,
      "logicNodeType" : "RAWSFCODE",
      "name" : "上A休B填充工作日",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_03"
        }
      } ],
      "topPos" : 310,
      "parallelOutput" : true
    }, {
      "code" : "def _default = logic.param('Default').getReal();\ndef shifts = logic.param('shifts').getReal();\ndef same_restday = _default.same_restday;\nif(shifts){\n    def title = shifts.collect { it.name }.join('/')\n    def fillWorkdays = []\n    //休息日相同\n    if(same_restday ==1){\n        def workdays = _default.get(\"workdays\") ?: []\n        def week1 = _default.get(\"week1\") ?: \"\"\n        def week2 = _default.get(\"week2\") ?: \"\"\n        def week3 = _default.get(\"week3\") ?: \"\"\n        def week4 = _default.get(\"week4\") ?: \"\"\n        def selection = [week1, week2, week3, week4].join(',').split(',')  \n\n        // 获取已存在的 workday\n        def existingDays = workdays.collect { it.day_number }\n\n        (1..28).each { i ->\n            if (!existingDays.contains(i)) {\n                def workday = [\n                    name: i.toString(),\n                    day_number: i,\n                    title: selection.contains(i.toString()) ? title : \"休息\"  \n                ]\n                fillWorkdays << workday\n            }else{\n                // 为已存在的workday填充title\n                def existingWorkday = workdays.find { it.day_number == i }\n                if (existingWorkday) {\n                    existingWorkday.title = title\n                }\n        }\n\n        // 合并后排序\n        def combinedWorkdays = (workdays + fillWorkdays).sort { \n            it.day_number \n        }    \n        _default.set(\"workdays\", combinedWorkdays)\n    }\n    }\n    //休息日不同\n    if(same_restday ==0 ){\n        title = title+\"/休息\"  \n        if( _default.get(\"workdays\") == null){\n            def inversion_days = _default.inversion_days\n            if(inversion_days){\n                (1..inversion_days).each { i ->\n                    def workday = [\n                        name  : \"第\"+i+\"天\",\n                        day_number: i,\n                        title: title,\n                        rule_id : _default.id\n                    ]\n                    fillWorkdays << workday\n                }\n                _default.set(\"workdays\", fillWorkdays)\n        }\n        }else{\n            _default.get(\"workdays\").each{ w ->\n                w.title =title\n            }           \n        }\n    }\n}",
      "codeName" : "RAWSFCODE_04",
      "codeType" : "Groovy",
      "leftPos" : 520,
      "logicNodeType" : "RAWSFCODE",
      "name" : "N班倒填充工作日",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_04"
        }
      } ],
      "topPos" : 435,
      "parallelOutput" : true
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "entityParam" : true
    }, {
      "codeName" : "shifts",
      "logicName" : "shifts",
      "name" : "shifts",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_shift.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "workDay",
      "logicName" : "workDay",
      "name" : "workDay",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_workday.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "workDays",
      "logicName" : "workDays",
      "name" : "workDays",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_workday.json"
      },
      "entityListParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "generateHoliday",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/generateHoliday.json",
    "logicName" : "生成Odoo公共节假日",
    "memo" : "根据所勾选的节假日进行拷贝",
    "name" : "生成Odoo公共节假日",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : 180,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : 198,
      "parallelOutput" : true
    }, {
      "codeName" : "RAWSQLCALL_02",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "holidays"
      },
      "leftPos" : 550,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "获取今年的公共假期",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_02"
        }
      } ],
      "sql" : "SELECT * \nFROM resource_calendar_leaves \nWHERE DATE_FROM >= DATE_FORMAT(CURDATE(), '%Y-01-01') \n  AND DATE_FROM < DATE_ADD(DATE_FORMAT(CURDATE(), '%Y-01-01'), INTERVAL 1 YEAR)\n  AND CALENDAR_ID IS NULL",
      "topPos" : 196,
      "fillDstLogicParam" : true,
      "ignoreResetDstLogicParam" : false,
      "parallelOutput" : true
    }, {
      "codeName" : "LOOPSUBCALL_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "temp"
      },
      "leftPos" : 785,
      "logicNodeType" : "LOOPSUBCALL",
      "name" : "循环子调用",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "ISNOTNULL",
            "dstFieldName" : "HOLIDAY_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "temp"
            },
            "logicType" : "SINGLE",
            "name" : "temp[HOLIDAY_TYPE] 值不为空(NotNil)"
          }, {
            "condOP" : "LIKE",
            "dstFieldName" : "HOLIDAY",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[HOLIDAY] 文本包含(%) holiday_type",
            "paramType" : "SRCENTITYFIELD",
            "paramValue" : "holiday_type",
            "getSrcLogicParam" : {
              "modelref" : true,
              "id" : "temp"
            }
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        },
        "subCallLink" : true
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        }
      } ],
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "holidays"
      },
      "topPos" : 196,
      "parallelOutput" : true
    }, {
      "codeName" : "RAWSQLCALL_01",
      "leftPos" : 329,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "删除规则关联的公共假期",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_02"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_01"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "sql" : "delete from resource_calendar_leaves where CALENDAR_ID = ?",
      "topPos" : 198,
      "parallelOutput" : true
    }, {
      "codeName" : "END_01",
      "leftPos" : 1034,
      "logicNodeType" : "END",
      "name" : "结束",
      "topPos" : 198,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_01",
      "leftPos" : 785,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "CALENDAR_ID",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "temp"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "ID",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "temp"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValueType" : "NULLVALUE"
      } ],
      "topPos" : 364,
      "parallelOutput" : true
    }, {
      "codeName" : "DEACTION_01",
      "getDstPSDEAction" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar_leaves/PSDEACTIONS/Create.json"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "temp"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar_leaves.json"
      },
      "leftPos" : 785,
      "logicNodeType" : "DEACTION",
      "name" : "实体行为",
      "topPos" : 493,
      "parallelOutput" : true
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "entityParam" : true
    }, {
      "codeName" : "holidays",
      "logicName" : "holidays",
      "name" : "holidays",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar_leaves.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "temp",
      "logicName" : "temp",
      "name" : "temp",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar_leaves.json"
      },
      "entityParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "generateOther",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/generateOther.json",
    "logicName" : "生成Odoo工作时间",
    "name" : "生成Odoo工作时间",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : 240,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : 200,
      "parallelOutput" : true
    }, {
      "code" : "def _default = logic.param('Default').getReal()\r\ndef workdays = _default.get(\"workdays\")\r\ndef shifts = _default.get(\"shifts\")\r\ndef schedule_type = _default.get(\"schedule_type\")\r\n\r\ndef attendances = logic.param('attendances').getReal()\r\n\r\ndef resource_calendar = logic.param('resource_calendar').getReal()\r\n// 基础字段默认值\r\nresource_calendar.set(\"id\", _default.get(\"id\"))\r\nresource_calendar.set(\"name\", _default.get(\"name\")+\"的工作时间\")\r\n// resource_calendar.set(\"name\", _default.get(\"company\")+\"的工作时间\")\r\nresource_calendar.set(\"active\", 1)\r\nresource_calendar.set(\"company_id\", _default.get(\"company_id\"))\r\nresource_calendar.set(\"tz\", java.util.TimeZone.getDefault().ID)\r\nresource_calendar.set(\"flexible_hours\", 0)\r\nresource_calendar.set(\"full_time_required_hours\", 0.0)\r\nresource_calendar.set(\"two_weeks_calendar\", schedule_type == \"alternate_week\" ? 1 : 0)\r\n\r\ndef timeFormatter = java.time.format.DateTimeFormatter.ofPattern(\"HH:mm\")\r\ndef noon = java.time.LocalTime.of(12, 0)\r\nfinal WEEK_DAYS = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday']\r\n\r\n// 时间转换函数（含四舍五入逻辑）\r\ndef convertTimeToHours = { time ->\r\ndef hours, minutes\r\ndef calendar = Calendar.getInstance()\r\ncalendar.setTimeInMillis(time.getTime())\r\nhours = calendar.get(Calendar.HOUR_OF_DAY)\r\nminutes = calendar.get(Calendar.MINUTE)\r\ndef totalMinutes = hours * 60 + minutes\r\ndef decimalHours = totalMinutes / 60.0\r\n// 四舍五入到一位小数\r\nreturn (decimalHours * 10).round() / 10.0\r\n}\r\n\r\n//固定排班、灵活打卡、大小周\r\nif(workdays && (schedule_type == \"fixed\" || schedule_type == \"flexible\" || schedule_type == \"alternate_week\")){\r\n    workdays.forEach { workday ->\r\n        def offset = (workday.day_number - 1) % 7\r\n        def shift = shifts.find { it.get(\"id\") == workday.get((\"shift_id\")) }\r\n        if (shift) {\r\n            def scopes = shift.get(\"scopes\");\r\n            if (scopes){\r\n                scopes.forEach { scope ->\r\n                    def attendance = sys.entity('resource_calendar_attendance')\r\n\r\n                    def dayName = WEEK_DAYS[offset]\r\n                    def startTimeStr = new java.text.SimpleDateFormat(\"HH:mm\").format(scope.start_base_time)\r\n                    def startTime = java.time.LocalTime.parse(startTimeStr, timeFormatter)\r\n\r\n                    // 设置考勤名称\r\n                    def period = (startTime >= noon) ? \"Afternoon\" : \"Morning\"\r\n                    attendance.set(\"name\", \"${dayName} ${period}\")\r\n                    attendance.set(\"dayofweek\", offset)\r\n                    attendance.set(\"sequence\", offset)\r\n\r\n                    // 大小周\r\n                    if (schedule_type == \"alternate_week\") {\r\n                        def biweekly_cycle = _default.get(\"biweekly_cycle\")\r\n                        if(biweekly_cycle == \"big_small\"){\r\n                            attendance.set(\"sequence\", workday.day_number)\r\n                            attendance.set(\"week_type\", workday.day_number > 7 ? 1 : 0)\r\n                        }\r\n                        else if(biweekly_cycle == \"small_big\"){\r\n                            attendance.set(\"sequence\", workday.day_number > 7 ? workday.day_number - 7 : workday.day_number + 7)\r\n                            attendance.set(\"week_type\", workday.day_number > 7 ? 0 : 1)\r\n                        }\r\n                    }\r\n                    \r\n                    // 转换时间字段\r\n                    def hourFrom = convertTimeToHours(scope.start_base_time)\r\n                    def hourTo = convertTimeToHours(scope.end_base_time)\r\n\r\n                    attendance.set(\"hour_from\", hourFrom)\r\n                    attendance.set(\"hour_to\", hourTo)\r\n                    attendance.set(\"day_period\", hourFrom >= 12 ? \"afternoon\" : \"morning\")\r\n                    attendances.add(attendance);\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nresource_calendar.set(\"attendances\", attendances)\r\n",
      "codeName" : "RAWSFCODE_01",
      "codeType" : "Groovy",
      "leftPos" : 350,
      "logicNodeType" : "RAWSFCODE",
      "name" : "构造工作时间",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        }
      } ],
      "topPos" : 198,
      "parallelOutput" : true
    }, {
      "codeName" : "DEACTION_01",
      "getDstPSDEAction" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar/PSDEACTIONS/Save.json"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "resource_calendar"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar.json"
      },
      "leftPos" : 536,
      "logicNodeType" : "DEACTION",
      "name" : "实体行为",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION_01"
        }
      } ],
      "topPos" : 198,
      "parallelOutput" : true
    }, {
      "codeName" : "END_01",
      "leftPos" : 714,
      "logicNodeType" : "END",
      "name" : "结束",
      "topPos" : 200,
      "parallelOutput" : true
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "entityParam" : true
    }, {
      "codeName" : "attendances",
      "logicName" : "attendances",
      "name" : "attendances",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar_attendance.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "resource_calendar",
      "logicName" : "resource_calendar",
      "name" : "resource_calendar",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar.json"
      },
      "entityParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "generateResource",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/generateResource.json",
    "logicName" : "生成Odoo资源关联",
    "name" : "生成Odoo资源关联",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : 60,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "IS_ACTIVATE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[IS_ACTIVATE] 等于(=) 1",
            "paramValue" : "1"
          }, {
            "condOP" : "ISNOTNULL",
            "dstFieldName" : "members",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[members] 值不为空(NotNil)"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : 266,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_01",
      "leftPos" : 244,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "members"
        },
        "paramAction" : "BINDPARAM",
        "srcFieldName" : "members",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 264,
      "parallelOutput" : true
    }, {
      "codeName" : "LOOPSUBCALL_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "temp"
      },
      "leftPos" : 474,
      "logicNodeType" : "LOOPSUBCALL",
      "name" : "循环子调用",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        },
        "subCallLink" : true
      } ],
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "members"
      },
      "topPos" : 264,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_02",
      "leftPos" : 244,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "Filter"
        },
        "paramAction" : "RENEWPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "empPage"
        },
        "paramAction" : "RENEWPARAM"
      }, {
        "dstFieldName" : "N_ID_EQ",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "Filter"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "USER_ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "temp"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "emp"
        },
        "paramAction" : "RENEWPARAM"
      } ],
      "topPos" : 380,
      "parallelOutput" : true
    }, {
      "codeName" : "DEDATASET_01",
      "getDstPSDEDataSet" : {
        "modelref" : true,
        "id" : "Default"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "Filter"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/hr/PSDATAENTITIES/hr_employee.json"
      },
      "leftPos" : 244,
      "logicNodeType" : "DEDATASET",
      "name" : "查询人员信息",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_03"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "size",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "empPage"
            },
            "logicType" : "SINGLE",
            "name" : "empPage[size] 不等于(<>) 0",
            "paramValue" : "0"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_01"
        }
      } ],
      "getRetPSDELogicParam" : {
        "modelref" : true,
        "id" : "empPage"
      },
      "topPos" : 500,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_03",
      "leftPos" : 484,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_02"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_03"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "emp"
        },
        "paramAction" : "BINDPARAM",
        "srcFieldName" : "0",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "empPage"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 500,
      "parallelOutput" : true
    }, {
      "codeName" : "RAWSQLCALL_02",
      "leftPos" : 484,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "更新人员关联工作时间",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_02"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "emp"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "sql" : "UPDATE hr_employee\nSET RESOURCE_CALENDAR_ID = ?\nWHERE ID = ?",
      "topPos" : 620,
      "parallelOutput" : true
    }, {
      "codeName" : "RAWSQLCALL_01",
      "leftPos" : 484,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "更新资源关联工作时间",
      "getPSDELogicNodeParams" : [ {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "RESOURCE_ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "emp"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "sql" : "UPDATE resource_resource \nSET CALENDAR_ID = ?\nWHERE ID = ?",
      "topPos" : 740,
      "parallelOutput" : true
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "entityParam" : true
    }, {
      "codeName" : "Filter",
      "logicName" : "Filter",
      "name" : "Filter",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/hr/PSDATAENTITIES/hr_employee.json"
      },
      "filterParam" : true
    }, {
      "codeName" : "emp",
      "logicName" : "emp",
      "name" : "emp",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/hr/PSDATAENTITIES/hr_employee.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "empPage",
      "logicName" : "empPage",
      "name" : "empPage",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/hr/PSDATAENTITIES/hr_employee.json"
      },
      "entityPageParam" : true
    }, {
      "codeName" : "members",
      "logicName" : "members",
      "name" : "members",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "resource",
      "logicName" : "resource",
      "name" : "resource",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_resource.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "ret",
      "logicName" : "ret",
      "name" : "ret",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_resource.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "temp",
      "logicName" : "temp",
      "name" : "temp",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "judgingEffect",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/judgingEffect.json",
    "logicName" : "判断生效",
    "name" : "判断生效",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : 200,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "LTANDEQ",
            "dstFieldName" : "EFFECT_TIME",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[EFFECT_TIME] 小于等于(<=) 1",
            "paramType" : "CURTIME",
            "paramValue" : "1"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : 200
    }, {
      "codeName" : "PREPAREPARAM_01",
      "leftPos" : 393,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "IS_ACTIVATE",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValue" : "1",
        "srcValueType" : "SRCVALUE"
      } ],
      "topPos" : 198,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_02",
      "leftPos" : 160,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "IS_ACTIVATE",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValue" : "0",
        "srcValueType" : "SRCVALUE"
      } ],
      "topPos" : 336,
      "parallelOutput" : true
    }, {
      "codeName" : "END_01",
      "leftPos" : 433,
      "logicNodeType" : "END",
      "name" : "结束",
      "getReturnParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "returnType" : "LOGICPARAM",
      "topPos" : 338,
      "parallelOutput" : true
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "entityParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "judgingMember",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/judgingMember.json",
    "logicName" : "判断人员是否已存在其他规则",
    "name" : "判断人员是否已存在其他规则",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : 200,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : 200,
      "parallelOutput" : true
    }, {
      "codeName" : "DEBUGPARAM_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "leftPos" : 319,
      "logicNodeType" : "DEBUGPARAM",
      "name" : "调试逻辑参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_03"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "ISNULL",
            "dstFieldName" : "ID",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[ID] 值为空(Nil)"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        }
      } ],
      "topPos" : 198
    }, {
      "codeName" : "PREPAREPARAM_01",
      "leftPos" : 504,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "members"
        },
        "paramAction" : "BINDPARAM",
        "srcFieldName" : "members",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 198,
      "parallelOutput" : true
    }, {
      "codeName" : "LOOPSUBCALL_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "memberTemp"
      },
      "leftPos" : 702,
      "logicNodeType" : "LOOPSUBCALL",
      "name" : "循环子调用",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        },
        "subCallLink" : true
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_02"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        }
      } ],
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "members"
      },
      "topPos" : 198,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_02",
      "leftPos" : 969,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "memberResult"
        },
        "paramAction" : "RENEWPARAM"
      } ],
      "topPos" : 198,
      "parallelOutput" : true
    }, {
      "codeName" : "RAWSQLCALL_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "memberResult"
      },
      "leftPos" : 1180,
      "logicNodeType" : "RAWSQLCALL",
      "name" : "判断是否在其他生效规则内",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_01"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "size",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "memberResult"
            },
            "logicType" : "SINGLE",
            "name" : "memberResult[size] 不等于(<>) 0",
            "paramValue" : "0"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSQLCALL_01"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "paramAction" : "SQLPARAM",
        "srcFieldName" : "ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "memberTemp"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "sql" : "select * FROM attendance_group_shift_member WHERE  rule_id != ? and user_id = ?\n AND EXISTS (\n    SELECT 1 \n    FROM attendance_rule rule  \n    WHERE \n      rule.id = attendance_group_shift_member.rule_id \n      AND rule.IS_ACTIVATE  = 1\n  )",
      "topPos" : 198,
      "fillDstLogicParam" : true,
      "ignoreResetDstLogicParam" : false,
      "parallelOutput" : true
    }, {
      "code" : "def memberResult = logic.param('memberResult').getReal()\r\ndef results = logic.param('results').getReal()\r\n\r\nif(memberResult){\r\n    memberResult.each{ i ->\r\n        results.add(i)\r\n    }\r\n}",
      "codeName" : "RAWSFCODE_01",
      "codeType" : "Groovy",
      "leftPos" : 1399,
      "logicNodeType" : "RAWSFCODE",
      "name" : "附加到判断结果",
      "topPos" : 198,
      "parallelOutput" : true
    }, {
      "code" : "def results = logic.param('results').getReal()\r\ndef groupResult = logic.param('groupResult').getReal()\r\ndef _default = logic.param('Default').getReal()\r\n\r\nif (results) {\r\n    // 按rule_id分组并构建新结构\r\n    def grouped = results.groupBy { it.rule_id }\r\n    grouped.each { ruleId, items ->\r\n        def temp = sys.entity('Attendance_group_shift_member')\r\n        def names = items.collect { it.get(\"name\") }.findAll { it != null }\r\n        temp.set(\"name\", names.join('、'))\r\n        temp.set(\"rule_id\",ruleId )\r\n        groupResult.add(temp)\r\n    }\r\n}\r\n",
      "codeName" : "RAWSFCODE_02",
      "codeType" : "Groovy",
      "leftPos" : 702,
      "logicNodeType" : "RAWSFCODE",
      "name" : "执行脚本代码",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_02"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "size",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "groupResult"
            },
            "logicType" : "SINGLE",
            "name" : "groupResult[size] 不等于(<>) 0",
            "paramValue" : "0"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_02"
        }
      } ],
      "topPos" : 350,
      "parallelOutput" : true
    }, {
      "codeName" : "LOOPSUBCALL_02",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "temp"
      },
      "leftPos" : 912,
      "logicNodeType" : "LOOPSUBCALL",
      "name" : "循环子调用",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_04"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_02"
        },
        "subCallLink" : true
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_03"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_02"
        }
      } ],
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "groupResult"
      },
      "topPos" : 350,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_04",
      "leftPos" : 1105,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_04"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "n_id_eq",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "Filter"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "RULE_ID",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "temp"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 350,
      "parallelOutput" : true
    }, {
      "codeName" : "DEDATASET_01",
      "getDstPSDEDataSet" : {
        "modelref" : true,
        "id" : "Default"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "Filter"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "leftPos" : 1291,
      "logicNodeType" : "DEDATASET",
      "name" : "实体数据集",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_05"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "NOTEQ",
            "dstFieldName" : "size",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "rules"
            },
            "logicType" : "SINGLE",
            "name" : "rules[size] 不等于(<>) 0",
            "paramValue" : "0"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEDATASET_01"
        }
      } ],
      "getRetPSDELogicParam" : {
        "modelref" : true,
        "id" : "rules"
      },
      "topPos" : 350,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_05",
      "leftPos" : 1514,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_02"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_05"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "rule"
        },
        "paramAction" : "BINDPARAM",
        "srcFieldName" : "0",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "rules"
        },
        "srcValueType" : "SRCDLPARAM"
      }, {
        "dstFieldName" : "rule_name",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "temp"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "NAME",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "rule"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 350,
      "parallelOutput" : true
    }, {
      "codeName" : "DEBUGPARAM_02",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "temp"
      },
      "leftPos" : 1717,
      "logicNodeType" : "DEBUGPARAM",
      "name" : "调试逻辑参数",
      "topPos" : 350,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_03",
      "leftPos" : 440,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_03"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "ID",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcValue" : "1",
        "srcValueType" : "SRCVALUE"
      } ],
      "topPos" : 420,
      "parallelOutput" : true
    }, {
      "code" : "def groupResult = logic.param('groupResult').getReal()\r\ndef _default = logic.param('Default').getReal()\r\n\r\n// 提取需要拼接的内容\r\ndef namesWithRules = groupResult.collect { item ->\r\n    \"${item.name}已在考勤规则${item.get(\"rule_name\")}内\"\r\n}\r\n// 拼接最终消息\r\ndef msg = \"${namesWithRules.join('、')},是否将其移入当前考勤规则？\"\r\n_default.set(\"msg\",msg)",
      "codeName" : "RAWSFCODE_03",
      "codeType" : "Groovy",
      "leftPos" : 912,
      "logicNodeType" : "RAWSFCODE",
      "name" : "执行脚本代码",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_03"
        }
      } ],
      "topPos" : 520,
      "parallelOutput" : true
    }, {
      "codeName" : "END_01",
      "dstFieldName" : "msg",
      "leftPos" : 952,
      "logicNodeType" : "END",
      "name" : "结束",
      "getReturnParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "returnType" : "LOGICPARAMFIELD",
      "topPos" : 620,
      "parallelOutput" : true
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "entityParam" : true
    }, {
      "codeName" : "Filter",
      "logicName" : "Filter",
      "name" : "Filter",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "filterParam" : true
    }, {
      "codeName" : "groupResult",
      "logicName" : "groupResult",
      "name" : "groupResult",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "memberResult",
      "logicName" : "memberResult",
      "name" : "memberResult",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "memberTemp",
      "logicName" : "memberTemp",
      "name" : "memberTemp",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "members",
      "logicName" : "members",
      "name" : "members",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "msg",
      "logicName" : "msg",
      "name" : "msg",
      "stdDataType" : 4,
      "simpleParam" : true
    }, {
      "codeName" : "results",
      "logicName" : "results",
      "name" : "results",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityListParam" : true
    }, {
      "codeName" : "rule",
      "logicName" : "rule",
      "name" : "rule",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "rules",
      "logicName" : "rules",
      "name" : "rules",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "entityPageParam" : true
    }, {
      "codeName" : "temp",
      "logicName" : "temp",
      "name" : "temp",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift_member.json"
      },
      "entityParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "nothing",
    "defaultParamName" : "DEFAULT",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/nothing.json",
    "logicName" : "nothing",
    "name" : "nothing",
    "scriptCode" : "console.log(data);\nreturn data;",
    "customCode" : true,
    "enableBackend" : false,
    "enableFront" : true
  }, {
    "codeName" : "removeOdooData",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/removeOdooData.json",
    "logicName" : "同步删除Odoo相关",
    "name" : "同步删除Odoo相关",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : 200,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : 200,
      "parallelOutput" : true
    }, {
      "codeName" : "DEACTION_01",
      "getDstPSDEAction" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar/PSDEACTIONS/Remove.json"
      },
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "getDstPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/resource/PSDATAENTITIES/resource_calendar.json"
      },
      "leftPos" : 355,
      "logicNodeType" : "DEACTION",
      "name" : "实体行为",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEACTION_01"
        },
        "catchLink" : true
      } ],
      "topPos" : 198,
      "parallelOutput" : true
    }, {
      "codeName" : "END_01",
      "leftPos" : 395,
      "logicNodeType" : "END",
      "name" : "结束",
      "topPos" : 370,
      "parallelOutput" : true
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "entityParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  }, {
    "codeName" : "updateGroups",
    "defaultParamName" : "Default",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDELOGICS/updateGroups.json",
    "logicName" : "更新组排班工作日",
    "name" : "更新组排班工作日",
    "getPSDELogicNodes" : [ {
      "codeName" : "Begin",
      "leftPos" : -48,
      "logicNodeType" : "BEGIN",
      "name" : "开始",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_02"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "condOP" : "EQ",
            "dstFieldName" : "SCHEDULE_TYPE",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SCHEDULE_TYPE] 等于(=) class_inversion",
            "paramValue" : "class_inversion"
          }, {
            "condOP" : "EQ",
            "dstFieldName" : "SAME_RESTDAY",
            "getDstLogicParam" : {
              "modelref" : true,
              "id" : "Default"
            },
            "logicType" : "SINGLE",
            "name" : "Default[SAME_RESTDAY] 等于(=) 1",
            "paramValue" : "1"
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        },
        "name" : "连接名称",
        "getPSDELogicLinkGroupCond" : {
          "groupOP" : "AND",
          "logicType" : "GROUP",
          "name" : "连接条件组",
          "getPSDELogicLinkConds" : [ {
            "groupOP" : "OR",
            "logicType" : "GROUP",
            "name" : "OR",
            "getPSDELogicLinkConds" : [ {
              "condOP" : "EQ",
              "dstFieldName" : "SCHEDULE_TYPE",
              "getDstLogicParam" : {
                "modelref" : true,
                "id" : "Default"
              },
              "logicType" : "SINGLE",
              "name" : "Default[SCHEDULE_TYPE] 等于(=) work_rest",
              "paramValue" : "work_rest"
            }, {
              "groupOP" : "AND",
              "logicType" : "GROUP",
              "name" : "AND",
              "getPSDELogicLinkConds" : [ {
                "condOP" : "EQ",
                "dstFieldName" : "SCHEDULE_TYPE",
                "getDstLogicParam" : {
                  "modelref" : true,
                  "id" : "Default"
                },
                "logicType" : "SINGLE",
                "name" : "Default[SCHEDULE_TYPE] 等于(=) class_inversion",
                "paramValue" : "class_inversion"
              }, {
                "condOP" : "EQ",
                "dstFieldName" : "SAME_RESTDAY",
                "getDstLogicParam" : {
                  "modelref" : true,
                  "id" : "Default"
                },
                "logicType" : "SINGLE",
                "name" : "Default[SAME_RESTDAY] 等于(=) 0",
                "paramValue" : "0"
              } ]
            } ]
          } ]
        },
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "Begin"
        }
      } ],
      "topPos" : 114,
      "parallelOutput" : true
    }, {
      "code" : "def _default = logic.param('Default').getReal()\n\ndef groupShifts = _default.get(\"attendance_group_shifts\")\n\ndef inversion_cycle = _default.get(\"inversion_cycle\")\ndef workdays = _default.get(\"workdays\")\n\ndef week1 = _default.get(\"week1\")?:\"\"\ndef week2 = _default.get(\"week2\")?:\"\"\ndef week3 = _default.get(\"week3\")?:\"\"\ndef week4 = _default.get(\"week4\")?:\"\"\n\ndef selection = week1\n// 根据 inversion_cycle 计算阈值并筛选工作日\ndef filteredWorkdays = []\nif (inversion_cycle == 1) {\n    filteredWorkdays = workdays.findAll { it.day_number < 8 }\n} else if (inversion_cycle == 2) {\n    filteredWorkdays = workdays.findAll { it.day_number < 15 }\n    selection = selection + week2\n} else if (inversion_cycle == 3) {\n    filteredWorkdays = workdays.findAll { it.day_number < 22 }\n    selection = selection + week2 + week3\n} else if (inversion_cycle == 4) {\n    selection = selection + week2 + week3 + week4\n    filteredWorkdays = workdays \n}\n\nfinal WEEK_DAYS = ['周一', '周二', '周三', '周四', '周五', '周六', '周日']\n\nfilteredWorkdays.each { day ->\n        def offset = (day.day_number - 8 + 7) % 7\n        day.set(\"name\",WEEK_DAYS[offset])\n        day.set(\"is_work\", selection.contains(day.day_number.toString())?1:0)\n}\n\ngroupShifts.forEach { i ->\n    i.workdays = filteredWorkdays\n}",
      "codeName" : "RAWSFCODE_02",
      "codeType" : "Groovy",
      "leftPos" : -88,
      "logicNodeType" : "RAWSFCODE",
      "name" : "N班倒-休息日相同",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "RAWSFCODE_02"
        }
      } ],
      "topPos" : 330,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_01",
      "leftPos" : -480,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_01"
        }
      } ],
      "getPSDELogicNodeParams" : [ {
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "groupShifts"
        },
        "paramAction" : "BINDPARAM",
        "srcFieldName" : "attendance_group_shifts",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 340,
      "parallelOutput" : true
    }, {
      "codeName" : "LOOPSUBCALL_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "groupShift"
      },
      "leftPos" : -480,
      "logicNodeType" : "LOOPSUBCALL",
      "name" : "循环子调用",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "PREPAREPARAM_02"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        },
        "subCallLink" : true
      }, {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "LOOPSUBCALL_01"
        }
      } ],
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "groupShifts"
      },
      "topPos" : 440,
      "parallelOutput" : true
    }, {
      "codeName" : "DEBUGPARAM_01",
      "getDstPSDELogicParam" : {
        "modelref" : true,
        "id" : "groupShifts"
      },
      "leftPos" : -290,
      "logicNodeType" : "DEBUGPARAM",
      "name" : "调试逻辑参数",
      "getPSDELogicLinks" : [ {
        "getDstPSDELogicNode" : {
          "modelref" : true,
          "id" : "END_01"
        },
        "name" : "连接名称",
        "getSrcPSDELogicNode" : {
          "modelref" : true,
          "id" : "DEBUGPARAM_01"
        }
      } ],
      "topPos" : 541,
      "parallelOutput" : true
    }, {
      "codeName" : "PREPAREPARAM_02",
      "leftPos" : -616,
      "logicNodeType" : "PREPAREPARAM",
      "name" : "准备参数",
      "getPSDELogicNodeParams" : [ {
        "dstFieldName" : "WORKDAYS",
        "getDstPSDELogicParam" : {
          "modelref" : true,
          "id" : "groupShift"
        },
        "paramAction" : "SETPARAMVALUE",
        "srcFieldName" : "workdays",
        "getSrcPSDELogicParam" : {
          "modelref" : true,
          "id" : "Default"
        },
        "srcValueType" : "SRCDLPARAM"
      } ],
      "topPos" : 541,
      "parallelOutput" : true
    }, {
      "codeName" : "END_01",
      "leftPos" : -48,
      "logicNodeType" : "END",
      "name" : "结束",
      "getReturnParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "returnType" : "LOGICPARAM",
      "topPos" : 702,
      "parallelOutput" : true
    } ],
    "getPSDELogicParams" : [ {
      "codeName" : "Default",
      "logicName" : "传入变量",
      "name" : "传入变量",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
      },
      "default" : true,
      "entityParam" : true
    }, {
      "codeName" : "groupShift",
      "logicName" : "groupShift",
      "name" : "groupShift",
      "getParamPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift.json"
      },
      "entityParam" : true
    }, {
      "codeName" : "groupShifts",
      "logicName" : "groupShifts",
      "name" : "groupShifts",
      "entityListParam" : true
    } ],
    "getStartPSDELogicNode" : {
      "modelref" : true,
      "id" : "Begin"
    },
    "enableBackend" : true,
    "enableFront" : false
  } ],
  "getAllPSDEMethodDTOs" : [ {
    "name" : "attendance_rule_dto",
    "getPSDEMethodDTOFields" : [ {
      "logicName" : "每日打卡要求",
      "name" : "requirement",
      "getPSDEField" : {
        "name" : "REQUIREMENT",
        "codeName" : "requirement"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 100,
      "type" : "SIMPLE"
    }, {
      "defaultValue" : "0",
      "logicName" : "智能匹配",
      "name" : "auto_match",
      "getPSDEField" : {
        "name" : "AUTO_MATCH",
        "codeName" : "auto_match"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 9,
      "type" : "SIMPLE"
    }, {
      "logicName" : "工作日(周期1)",
      "name" : "week1",
      "getPSDEField" : {
        "name" : "WEEK1",
        "codeName" : "week1"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 100,
      "type" : "SIMPLE"
    }, {
      "logicName" : "工作日(周期2)",
      "name" : "week2",
      "getPSDEField" : {
        "name" : "WEEK2",
        "codeName" : "week2"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 100,
      "type" : "SIMPLE"
    }, {
      "logicName" : "工作日(周期3)",
      "name" : "week3",
      "getPSDEField" : {
        "name" : "WEEK3",
        "codeName" : "week3"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 100,
      "type" : "SIMPLE"
    }, {
      "logicName" : "工作日(周期4)",
      "name" : "week4",
      "getPSDEField" : {
        "name" : "WEEK4",
        "codeName" : "week4"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 100,
      "type" : "SIMPLE"
    }, {
      "defaultValue" : "1,2,3,4,5",
      "logicName" : "工作日(常规)",
      "name" : "workday",
      "getPSDEField" : {
        "name" : "WORKDAY",
        "codeName" : "workday"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 100,
      "type" : "SIMPLE"
    }, {
      "logicName" : "上下班时间",
      "name" : "work_time",
      "getPSDEField" : {
        "name" : "WORK_TIME",
        "codeName" : "work_time"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 100,
      "type" : "SIMPLE"
    }, {
      "logicName" : "循环周期设置（大小周）",
      "name" : "biweekly_cycle",
      "getPSDEField" : {
        "name" : "BIWEEKLY_CYCLE",
        "codeName" : "biweekly_cycle"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 60,
      "type" : "SIMPLE"
    }, {
      "logicName" : "循环周期设置（N班倒）",
      "name" : "inversion_cycle",
      "getPSDEField" : {
        "name" : "INVERSION_CYCLE",
        "codeName" : "inversion_cycle"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 9,
      "type" : "SIMPLE"
    }, {
      "logicName" : "循环天数设置（N班倒）",
      "name" : "inversion_days",
      "getPSDEField" : {
        "name" : "INVERSION_DAYS",
        "codeName" : "inversion_days"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 9,
      "type" : "SIMPLE"
    }, {
      "jsonFormat" : "yyyy-MM-dd HH:mm:ss",
      "logicName" : "生效时间",
      "name" : "effect_time",
      "getPSDEField" : {
        "name" : "EFFECT_TIME",
        "codeName" : "effect_time"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 5,
      "type" : "SIMPLE"
    }, {
      "logicName" : "工作天数（上A休B）",
      "name" : "work",
      "getPSDEField" : {
        "name" : "WORK",
        "codeName" : "work"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 9,
      "type" : "SIMPLE"
    }, {
      "logicName" : "休息天数（上A休B）",
      "name" : "rest",
      "getPSDEField" : {
        "name" : "REST",
        "codeName" : "rest"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 9,
      "type" : "SIMPLE"
    }, {
      "logicName" : "是否休息日相同",
      "name" : "same_restday",
      "getPSDEField" : {
        "name" : "SAME_RESTDAY",
        "codeName" : "same_restday"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 9,
      "type" : "SIMPLE"
    }, {
      "logicName" : "倒班数",
      "name" : "inversion_count",
      "getPSDEField" : {
        "name" : "INVERSION_COUNT",
        "codeName" : "inversion_count"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 9,
      "type" : "SIMPLE"
    }, {
      "logicName" : "默认班次标识",
      "name" : "default_shift",
      "getPSDEField" : {
        "name" : "DEFAULT_SHIFT",
        "codeName" : "default_shift"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 100,
      "type" : "SIMPLE"
    }, {
      "logicName" : "智能匹配判断结果",
      "name" : "judge_result",
      "getPSDEField" : {
        "name" : "JUDGE_RESULT",
        "codeName" : "judge_result"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 100,
      "type" : "SIMPLE"
    }, {
      "logicName" : "成员总数",
      "name" : "total_members",
      "getPSDEField" : {
        "name" : "TOTAL_MEMBERS",
        "codeName" : "total_members"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 100,
      "type" : "SIMPLE"
    }, {
      "logicName" : "班次数量",
      "name" : "shift_num",
      "getPSDEField" : {
        "name" : "SHIFT_NUM",
        "codeName" : "shift_num"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 9,
      "type" : "SIMPLE"
    }, {
      "defaultValue" : "0",
      "logicName" : "是否激活",
      "name" : "is_activate",
      "getPSDEField" : {
        "name" : "IS_ACTIVATE",
        "codeName" : "is_activate"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 9,
      "type" : "SIMPLE"
    }, {
      "defaultValue" : "2",
      "logicName" : "组排班数",
      "name" : "group_num",
      "getPSDEField" : {
        "name" : "GROUP_NUM",
        "codeName" : "group_num"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 9,
      "type" : "SIMPLE"
    }, {
      "logicName" : "节假日配置",
      "name" : "holiday",
      "getPSDEField" : {
        "name" : "HOLIDAY",
        "codeName" : "holiday"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 2000,
      "type" : "SIMPLE"
    }, {
      "logicName" : "实际出勤次数",
      "name" : "free_ratio",
      "getPSDEField" : {
        "name" : "FREE_RATIO",
        "codeName" : "free_ratio"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 9,
      "type" : "SIMPLE"
    }, {
      "logicName" : "实际最少出勤时长",
      "name" : "free_min_minutes",
      "getPSDEField" : {
        "name" : "FREE_MIN_MINUTES",
        "codeName" : "free_min_minutes"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 9,
      "type" : "SIMPLE"
    }, {
      "defaultValue" : "0",
      "logicName" : "默认免考勤",
      "name" : "default_flag",
      "getPSDEField" : {
        "name" : "DEFAULT_FLAG",
        "codeName" : "default_flag"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 9,
      "type" : "SIMPLE"
    }, {
      "logicName" : "工作时段",
      "name" : "work_times",
      "getPSDEField" : {
        "name" : "WORK_TIMES",
        "codeName" : "work_times"
      },
      "sourceType" : "DEFIELD",
      "stringLength" : 1048576,
      "type" : "DTOS"
    }, {
      "defaultValue" : "device",
      "logicName" : "考勤方式",
      "name" : "checkin_method",
      "getPSDEField" : {
        "name" : "CHECKIN_METHOD",
        "codeName" : "checkin_method"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 60,
      "type" : "SIMPLE"
    }, {
      "jsonFormat" : "yyyy-MM-dd HH:mm:ss",
      "logicName" : "创建时间",
      "name" : "create_date",
      "getPSDEField" : {
        "name" : "CREATE_DATE",
        "codeName" : "create_date"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 5,
      "type" : "SIMPLE",
      "readOnly" : true
    }, {
      "logicName" : "创建人",
      "name" : "create_uid",
      "getPSDEField" : {
        "name" : "CREATE_UID",
        "codeName" : "create_uid"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 100,
      "type" : "SIMPLE",
      "readOnly" : true
    }, {
      "logicName" : "弹性分钟数",
      "name" : "elastic_minutes",
      "getPSDEField" : {
        "name" : "ELASTIC_MINUTES",
        "codeName" : "elastic_minutes"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 9,
      "type" : "SIMPLE"
    }, {
      "defaultValue" : "0",
      "logicName" : "是否启用弹性打卡",
      "name" : "elastic_valid",
      "getPSDEField" : {
        "name" : "ELASTIC_VALID",
        "codeName" : "elastic_valid"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 9,
      "type" : "SIMPLE"
    }, {
      "jsonFormat" : "HH:mm:ss",
      "logicName" : "结束时间",
      "name" : "free_end",
      "getPSDEField" : {
        "name" : "FREE_END",
        "codeName" : "free_end"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 5,
      "type" : "SIMPLE"
    }, {
      "jsonFormat" : "HH:mm:ss",
      "logicName" : "开始时间",
      "name" : "free_start",
      "getPSDEField" : {
        "name" : "FREE_START",
        "codeName" : "free_start"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 5,
      "type" : "SIMPLE"
    }, {
      "logicName" : "主键",
      "name" : "id",
      "getPSDEField" : {
        "name" : "ID",
        "codeName" : "id"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 60,
      "type" : "SIMPLE"
    }, {
      "logicName" : "规则名称",
      "name" : "name",
      "getPSDEField" : {
        "name" : "NAME",
        "codeName" : "name"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 255,
      "type" : "SIMPLE",
      "allowEmpty" : false
    }, {
      "defaultValue" : "fixed",
      "logicName" : "班次类型",
      "name" : "schedule_type",
      "getPSDEField" : {
        "name" : "SCHEDULE_TYPE",
        "codeName" : "schedule_type"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 60,
      "type" : "SIMPLE",
      "allowEmpty" : false
    }, {
      "jsonFormat" : "yyyy-MM-dd HH:mm:ss",
      "logicName" : "更新时间",
      "name" : "write_date",
      "getPSDEField" : {
        "name" : "WRITE_DATE",
        "codeName" : "write_date"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 5,
      "type" : "SIMPLE",
      "readOnly" : true
    }, {
      "logicName" : "更新人",
      "name" : "write_uid",
      "getPSDEField" : {
        "name" : "WRITE_UID",
        "codeName" : "write_uid"
      },
      "sourceType" : "DEFIELD",
      "stdDataType" : 25,
      "stringLength" : 100,
      "type" : "SIMPLE",
      "readOnly" : true
    }, {
      "name" : "devices",
      "getPSDER" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_checkin_device/PSDERS/DER1N_ATTENDANCE_CHECKIN_DEVICE_ATTENDANCE_RULE_RULE_ID.json"
      },
      "getRefPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_checkin_device_dto"
      },
      "getRefPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_checkin_device.json"
      },
      "scale" : 0,
      "sourceType" : "DER",
      "type" : "DTOS"
    }, {
      "name" : "gps_list",
      "getPSDER" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_gps_location/PSDERS/DER1N_ATTENDANCE_GPS_LOCATION_ATTENDANCE_RULE_RULE_ID.json"
      },
      "getRefPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_gps_location_dto"
      },
      "getRefPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_gps_location.json"
      },
      "scale" : 0,
      "sourceType" : "DER",
      "type" : "DTOS"
    }, {
      "name" : "group_shifts",
      "getPSDER" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift/PSDERS/DER1N_ATTENDANCE_GROUP_SHIFT_ATTENDANCE_RULE_RULE_ID.json"
      },
      "getRefPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_group_shift_dto"
      },
      "getRefPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift.json"
      },
      "scale" : 0,
      "sourceType" : "DER",
      "type" : "DTOS"
    }, {
      "name" : "shifts",
      "getPSDER" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_shift/PSDERS/DER1N_ATTENDANCE_SHIFT_ATTENDANCE_RULE_RULE_ID.json"
      },
      "getRefPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_shift_dto"
      },
      "getRefPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_shift.json"
      },
      "scale" : 0,
      "sourceType" : "DER",
      "type" : "DTOS"
    }, {
      "name" : "wifi_list",
      "getPSDER" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_wifi_location/PSDERS/DER1N_ATTENDANCE_WIFI_LOCATION_ATTENDANCE_RULE_RULE_ID.json"
      },
      "getRefPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_wifi_location_dto"
      },
      "getRefPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_wifi_location.json"
      },
      "scale" : 0,
      "sourceType" : "DER",
      "type" : "DTOS"
    }, {
      "name" : "workdays",
      "getPSDER" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_workday/PSDERS/DER1N_ATTENDANCE_WORKDAY_ATTENDANCE_RULE_RULE_ID.json"
      },
      "getRefPSDEMethodDTO" : {
        "modelref" : true,
        "id" : "attendance_workday_dto"
      },
      "getRefPSDataEntity" : {
        "modelref" : true,
        "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_workday.json"
      },
      "scale" : 0,
      "sourceType" : "DER",
      "type" : "DTOS"
    } ],
    "sourceType" : "DE",
    "type" : "DEFAULT",
    "defaultMode" : true
  }, {
    "name" : "attendance_rule_filter_dto",
    "getPSDEFilterDTOFields" : [ {
      "logicName" : "循环周期设置（大小周）",
      "name" : "n_cycle_eq",
      "getPSDEFSearchMode" : {
        "modelref" : true,
        "id" : "N_CYCLE_EQ"
      },
      "getPSDEField" : {
        "name" : "BIWEEKLY_CYCLE",
        "codeName" : "biweekly_cycle"
      },
      "scale" : 0,
      "sourceType" : "DEFSEARCHMODE",
      "stdDataType" : 25,
      "type" : "SIMPLE"
    }, {
      "jsonFormat" : "yyyy-MM-dd HH:mm:ss",
      "logicName" : "生效时间",
      "name" : "n_effect_time_ltandeq",
      "getPSDEFSearchMode" : {
        "modelref" : true,
        "id" : "N_EFFECT_TIME_LTANDEQ"
      },
      "getPSDEField" : {
        "name" : "EFFECT_TIME",
        "codeName" : "effect_time"
      },
      "scale" : 0,
      "sourceType" : "DEFSEARCHMODE",
      "stdDataType" : 5,
      "type" : "SIMPLE"
    }, {
      "logicName" : "主键",
      "name" : "n_id_eq",
      "getPSDEFSearchMode" : {
        "modelref" : true,
        "id" : "N_ID_EQ"
      },
      "getPSDEField" : {
        "name" : "ID",
        "codeName" : "id"
      },
      "scale" : 0,
      "sourceType" : "DEFSEARCHMODE",
      "stdDataType" : 25,
      "type" : "SIMPLE"
    }, {
      "logicName" : "循环周期设置（N班倒）",
      "name" : "n_inversion_cycle_eq",
      "getPSDEFSearchMode" : {
        "modelref" : true,
        "id" : "N_INVERSION_CYCLE_EQ"
      },
      "getPSDEField" : {
        "name" : "INVERSION_CYCLE",
        "codeName" : "inversion_cycle"
      },
      "scale" : 0,
      "sourceType" : "DEFSEARCHMODE",
      "stdDataType" : 9,
      "type" : "SIMPLE"
    }, {
      "logicName" : "规则名称",
      "name" : "n_name_like",
      "getPSDEFSearchMode" : {
        "modelref" : true,
        "id" : "N_NAME_LIKE"
      },
      "getPSDEField" : {
        "name" : "NAME",
        "codeName" : "name"
      },
      "scale" : 0,
      "sourceType" : "DEFSEARCHMODE",
      "stdDataType" : 25,
      "type" : "SIMPLE"
    }, {
      "defaultValue" : "fixed",
      "logicName" : "班次类型",
      "name" : "n_schedule_type_eq",
      "getPSDEFSearchMode" : {
        "modelref" : true,
        "id" : "N_SCHEDULE_TYPE_EQ"
      },
      "getPSDEField" : {
        "name" : "SCHEDULE_TYPE",
        "codeName" : "schedule_type"
      },
      "scale" : 0,
      "sourceType" : "DEFSEARCHMODE",
      "stdDataType" : 25,
      "type" : "SIMPLE"
    } ],
    "sourceType" : "DE",
    "type" : "DEFILTER",
    "defaultMode" : true
  } ],
  "getAllPSDEOPPrivs" : [ {
    "logicName" : "建立",
    "name" : "CREATE"
  }, {
    "logicName" : "删除",
    "name" : "DELETE"
  }, {
    "logicName" : "读取",
    "name" : "READ"
  }, {
    "logicName" : "更新",
    "name" : "UPDATE"
  } ],
  "getAllPSDEUserRoles" : [ {
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEUSERROLES/ALL_R.json",
    "name" : "全部数据（读）",
    "getPSDEUserRoleOPPrivs" : [ {
      "dataAccessAction" : "READ",
      "name" : "READ",
      "getPSDEOPPriv" : {
        "modelref" : true,
        "id" : "READ"
      }
    } ],
    "roleTag" : "ALL_R",
    "userDRAction" : "READ",
    "allData" : true
  }, {
    "customCond" : "[('CREATE_UID','=',#{srf.sessioncontext.srfpersonid})]",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule/PSDEUSERROLES/CURDRAFTMAN_RW.json",
    "name" : "我创建的（读写）",
    "getPSDEUserRoleOPPrivs" : [ {
      "dataAccessAction" : "READ",
      "name" : "READ",
      "getPSDEOPPriv" : {
        "modelref" : true,
        "id" : "READ"
      }
    }, {
      "dataAccessAction" : "CREATE",
      "name" : "PSDEOPPRIVROLE",
      "getPSDEOPPriv" : {
        "modelref" : true,
        "id" : "CREATE"
      }
    }, {
      "dataAccessAction" : "UPDATE",
      "name" : "UPDATE",
      "getPSDEOPPriv" : {
        "modelref" : true,
        "id" : "UPDATE"
      }
    }, {
      "dataAccessAction" : "DELETE",
      "name" : "DELETE",
      "getPSDEOPPriv" : {
        "modelref" : true,
        "id" : "DELETE"
      }
    } ],
    "roleTag" : "CURDRAFTMAN_RW",
    "userDRAction" : "READ"
  } ],
  "getAllPSModelDatas" : [ {
    "codeName" : "EditView2",
    "logicName" : "考勤规则实体编辑视图（左右关系）",
    "name" : "考勤规则实体编辑视图（左右关系）",
    "realModelSubType" : "DEEDITVIEW2",
    "realModelType" : "PSDEVIEWBASE"
  }, {
    "codeName" : "PickupGridView",
    "logicName" : "考勤规则实体选择表格视图（部件视图）",
    "name" : "考勤规则实体选择表格视图（部件视图）",
    "realModelSubType" : "DEPICKUPGRIDVIEW",
    "realModelType" : "PSDEVIEWBASE"
  }, {
    "codeName" : "RedirectView",
    "logicName" : "考勤规则实体数据重定向视图",
    "modelTag" : "REDIRECTVIEW",
    "name" : "考勤规则实体数据重定向视图",
    "realModelSubType" : "DEREDIRECTVIEW",
    "realModelType" : "PSDEVIEWBASE"
  }, {
    "codeName" : "GridView",
    "logicName" : "考勤规则实体表格视图",
    "modelTag" : "MDATAVIEW",
    "name" : "考勤规则实体表格视图",
    "realModelSubType" : "DEGRIDVIEW",
    "realModelType" : "PSDEVIEWBASE"
  }, {
    "codeName" : "MPickupView",
    "logicName" : "考勤规则实体数据多项选择视图",
    "modelTag" : "MPICKUPVIEW",
    "name" : "考勤规则实体数据多项选择视图",
    "realModelSubType" : "DEMPICKUPVIEW",
    "realModelType" : "PSDEVIEWBASE"
  }, {
    "codeName" : "NoRequiredEditView",
    "logicName" : "免考勤规则编辑视图",
    "name" : "免考勤规则编辑视图",
    "realModelSubType" : "DEEDITVIEW",
    "realModelType" : "PSDEVIEWBASE"
  }, {
    "codeName" : "EditView",
    "logicName" : "考勤规则实体编辑视图",
    "modelTag" : "EDITVIEW",
    "name" : "考勤规则实体编辑视图",
    "realModelSubType" : "DEEDITVIEW",
    "realModelType" : "PSDEVIEWBASE"
  }, {
    "codeName" : "PickupView",
    "logicName" : "考勤规则实体数据选择视图",
    "modelTag" : "PICKUPVIEW",
    "name" : "考勤规则实体数据选择视图",
    "realModelSubType" : "DEPICKUPVIEW",
    "realModelType" : "PSDEVIEWBASE"
  }, {
    "codeName" : "ActiveOptionView",
    "logicName" : "保存考勤规则",
    "name" : "保存考勤规则",
    "realModelSubType" : "DEOPTVIEW",
    "realModelType" : "PSDEVIEWBASE"
  }, {
    "codeName" : "Main2",
    "logicName" : "保存考勤规则_表单",
    "modelTag2" : "0",
    "name" : "保存考勤规则_表单",
    "realModelSubType" : "EDITFORM",
    "realModelType" : "PSDEFORM"
  }, {
    "codeName" : "Main3",
    "logicName" : "免考勤规则编辑视图_表单",
    "modelTag2" : "0",
    "name" : "免考勤规则编辑视图_表单",
    "realModelSubType" : "EDITFORM",
    "realModelType" : "PSDEFORM"
  }, {
    "codeName" : "Main",
    "logicName" : "主编辑表单",
    "modelTag2" : "0",
    "name" : "主编辑表单",
    "realModelSubType" : "EDITFORM",
    "realModelType" : "PSDEFORM"
  } ],
  "codeName" : "attendance_rule",
  "dEType" : 1,
  "dSLink" : "DEFAULT",
  "dataAccCtrlArch" : 1,
  "dataAccCtrlMode" : 1,
  "dataChangeLogMode" : 0,
  "dataImpExpMode" : 3,
  "getDefaultPSDEDataQuery" : {
    "modelref" : true,
    "id" : "Default"
  },
  "getDefaultPSDEDataSet" : {
    "modelref" : true,
    "id" : "Default"
  },
  "getDefaultPSDEFilterDTO" : {
    "modelref" : true,
    "id" : "attendance_rule_filter_dto"
  },
  "getDefaultPSDEMethodDTO" : {
    "modelref" : true,
    "id" : "attendance_rule_dto"
  },
  "dynaInstMode" : 0,
  "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json",
  "enableActions" : 7,
  "enableUIActions" : 15,
  "enableViewLevel" : 0,
  "extendMode" : 0,
  "getKeyPSDEField" : {
    "name" : "ID",
    "codeName" : "id"
  },
  "logicName" : "考勤规则",
  "getMajorPSDEField" : {
    "name" : "NAME",
    "codeName" : "name"
  },
  "getMajorPSDERs" : [ {
    "codeName" : "rule",
    "dERType" : "DER1N",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_checkin_device/PSDERS/DER1N_ATTENDANCE_CHECKIN_DEVICE_ATTENDANCE_RULE_RULE_ID.json",
    "fKeyName" : "F027708F47901289A5",
    "getMajorPSDataEntity" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
    },
    "masterOrder" : 100,
    "masterRS" : 15,
    "minorCodeName" : "devices",
    "getMinorPSDataEntity" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_checkin_device.json"
    },
    "minorServiceCodeName" : "devices",
    "name" : "DER1N_ATTENDANCE_CHECKIN_DEVICE_ATTENDANCE_RULE_RULE_ID",
    "getNestedPSDEDataSet" : {
      "modelref" : true,
      "id" : "Default"
    },
    "orderValue" : 100,
    "getPSPickupDEField" : {
      "name" : "RULE_ID",
      "codeName" : "RULE_ID"
    },
    "pickupDEFName" : "RULE_ID",
    "removeActionType" : 1,
    "removeOrder" : 0,
    "serviceCodeName" : "rule",
    "tempDataOrder" : 10,
    "enableFKey" : true,
    "nestedRS" : true
  }, {
    "codeName" : "rule",
    "dERType" : "DER1N",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_gps_location/PSDERS/DER1N_ATTENDANCE_GPS_LOCATION_ATTENDANCE_RULE_RULE_ID.json",
    "fKeyName" : "FF1B67355FB9FE6B09",
    "getMajorPSDataEntity" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
    },
    "masterOrder" : -1,
    "masterRS" : 8,
    "minorCodeName" : "gps_list",
    "getMinorPSDataEntity" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_gps_location.json"
    },
    "minorServiceCodeName" : "gps_list",
    "name" : "DER1N_ATTENDANCE_GPS_LOCATION_ATTENDANCE_RULE_RULE_ID",
    "getNestedPSDEDataSet" : {
      "modelref" : true,
      "id" : "Default"
    },
    "orderValue" : 100,
    "getPSPickupDEField" : {
      "name" : "RULE_ID",
      "codeName" : "RULE_ID"
    },
    "pickupDEFName" : "RULE_ID",
    "removeActionType" : 1,
    "removeOrder" : 0,
    "serviceCodeName" : "rule",
    "tempDataOrder" : 10,
    "enableFKey" : true,
    "nestedRS" : true
  }, {
    "codeName" : "rule",
    "dERType" : "DER1N",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift/PSDERS/DER1N_ATTENDANCE_GROUP_SHIFT_ATTENDANCE_RULE_RULE_ID.json",
    "fKeyName" : "F4D6110A307ACC3F44",
    "getMajorPSDataEntity" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
    },
    "masterOrder" : -1,
    "masterRS" : 8,
    "minorCodeName" : "group_shifts",
    "getMinorPSDataEntity" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_group_shift.json"
    },
    "minorServiceCodeName" : "group_shifts",
    "name" : "DER1N_ATTENDANCE_GROUP_SHIFT_ATTENDANCE_RULE_RULE_ID",
    "getNestedPSDEDataSet" : {
      "modelref" : true,
      "id" : "Default"
    },
    "orderValue" : 100,
    "getPSPickupDEField" : {
      "name" : "RULE_ID",
      "codeName" : "rule_id"
    },
    "getPSPickupTextDEField" : {
      "name" : "RULE_NAME",
      "codeName" : "rule_name"
    },
    "pickupDEFName" : "RULE_ID",
    "removeActionType" : 1,
    "removeOrder" : 0,
    "serviceCodeName" : "rule",
    "tempDataOrder" : 10,
    "enableFKey" : true,
    "nestedRS" : true
  }, {
    "codeName" : "rule",
    "dERType" : "DER1N",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_record/PSDERS/DER1N_ATTENDANCE_RECORD_ATTENDANCE_RULE_RULE_ID.json",
    "fKeyName" : "F28EA92B88D21EB8D0",
    "getMajorPSDataEntity" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
    },
    "masterOrder" : -1,
    "masterRS" : 0,
    "getMinorPSDataEntity" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_record.json"
    },
    "name" : "DER1N_ATTENDANCE_RECORD_ATTENDANCE_RULE_RULE_ID",
    "orderValue" : 100,
    "getPSPickupDEField" : {
      "name" : "RULE_ID",
      "codeName" : "rule_id"
    },
    "getPSPickupTextDEField" : {
      "name" : "RULE_NAME",
      "codeName" : "rule_name"
    },
    "pickupDEFName" : "RULE_ID",
    "removeActionType" : -1,
    "removeOrder" : 0,
    "serviceCodeName" : "rule",
    "enableFKey" : true
  }, {
    "codeName" : "rule",
    "dERType" : "DER1N",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_shift/PSDERS/DER1N_ATTENDANCE_SHIFT_ATTENDANCE_RULE_RULE_ID.json",
    "fKeyName" : "FC26F367D16F8E63BD",
    "getMajorPSDataEntity" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
    },
    "masterOrder" : -1,
    "masterRS" : 8,
    "minorCodeName" : "shifts",
    "getMinorPSDataEntity" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_shift.json"
    },
    "minorServiceCodeName" : "shifts",
    "name" : "DER1N_ATTENDANCE_SHIFT_ATTENDANCE_RULE_RULE_ID",
    "getNestedPSDEDataSet" : {
      "modelref" : true,
      "id" : "Default"
    },
    "orderValue" : 100,
    "getPSPickupDEField" : {
      "name" : "RULE_ID",
      "codeName" : "rule_id"
    },
    "getPSPickupTextDEField" : {
      "name" : "RULE_NAME",
      "codeName" : "rule_name"
    },
    "pickupDEFName" : "RULE_ID",
    "removeActionType" : 1,
    "removeOrder" : 0,
    "serviceCodeName" : "rule",
    "tempDataOrder" : 10,
    "enableFKey" : true,
    "nestedRS" : true
  }, {
    "codeName" : "rule",
    "dERType" : "DER1N",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_wifi_location/PSDERS/DER1N_ATTENDANCE_WIFI_LOCATION_ATTENDANCE_RULE_RULE_ID.json",
    "fKeyName" : "F2BCD6672DF18E10F5",
    "getMajorPSDataEntity" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
    },
    "masterOrder" : -1,
    "masterRS" : 8,
    "minorCodeName" : "wifi_list",
    "getMinorPSDataEntity" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_wifi_location.json"
    },
    "minorServiceCodeName" : "wifi_list",
    "name" : "DER1N_ATTENDANCE_WIFI_LOCATION_ATTENDANCE_RULE_RULE_ID",
    "getNestedPSDEDataSet" : {
      "modelref" : true,
      "id" : "Default"
    },
    "orderValue" : 100,
    "getPSPickupDEField" : {
      "name" : "RULE_ID",
      "codeName" : "RULE_ID"
    },
    "pickupDEFName" : "RULE_ID",
    "removeActionType" : -1,
    "removeOrder" : 0,
    "serviceCodeName" : "rule",
    "tempDataOrder" : 10,
    "enableFKey" : true,
    "nestedRS" : true
  }, {
    "codeName" : "rule",
    "dERType" : "DER1N",
    "dynaModelFilePath" : "PSMODULES/attendance/PSDATAENTITIES/attendance_workday/PSDERS/DER1N_ATTENDANCE_WORKDAY_ATTENDANCE_RULE_RULE_ID.json",
    "fKeyName" : "F0E738B9FFE85F3A57",
    "getMajorPSDataEntity" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_rule.json"
    },
    "masterOrder" : 100,
    "masterRS" : 15,
    "minorCodeName" : "workdays",
    "getMinorPSDataEntity" : {
      "modelref" : true,
      "path" : "PSMODULES/attendance/PSDATAENTITIES/attendance_workday.json"
    },
    "minorServiceCodeName" : "workdays",
    "name" : "DER1N_ATTENDANCE_WORKDAY_ATTENDANCE_RULE_RULE_ID",
    "getNestedPSDEDataSet" : {
      "modelref" : true,
      "id" : "Default"
    },
    "orderValue" : 100,
    "getPSPickupDEField" : {
      "name" : "RULE_ID",
      "codeName" : "RULE_ID"
    },
    "pickupDEFName" : "RULE_ID",
    "removeActionType" : 1,
    "removeOrder" : 0,
    "serviceCodeName" : "rule",
    "tempDataOrder" : 10,
    "enableFKey" : true,
    "nestedRS" : true
  } ],
  "name" : "ATTENDANCE_RULE",
  "getPSSysDBScheme" : {
    "modelref" : true,
    "path" : "PSSYSDBSCHEMES/DEFAULT.json"
  },
  "getPSSystemModule" : {
    "modelref" : true,
    "path" : "PSMODULES/attendance.json"
  },
  "saaSMode" : 0,
  "serviceAPIMode" : 1,
  "serviceCodeName" : "attendance_rule",
  "storageMode" : 1,
  "systemTag" : "attendance",
  "tableName" : "ATTENDANCE_RULE",
  "tempDataHolder" : 2,
  "viewName" : "V_ATTENDANCE_RULE",
  "getViewPSDEDataQuery" : {
    "modelref" : true,
    "id" : "View"
  },
  "enableAPIStorage" : false,
  "enableCreate" : true,
  "enableDataVer" : false,
  "enableEntityCache" : false,
  "enableModify" : true,
  "enableMultiDS" : false,
  "enableMultiForm" : false,
  "enableMultiStorage" : false,
  "enableNoSQLStorage" : false,
  "enableRemove" : true,
  "enableSQLStorage" : true,
  "enableTempData" : true,
  "enableTempDataFront" : true,
  "logicValid" : false,
  "subSysAsCloud" : false
}
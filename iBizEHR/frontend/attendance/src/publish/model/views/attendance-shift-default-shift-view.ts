export default {
  enableDirtyChecking: true,
  showDataInfoBar: true,
  xdataControlName: 'form',
  loadDefault: true,
  openMode: 'POPUPMODAL',
  deviewCodeName: 'DefaultShiftView',
  deviewId: '7c4b96fbedcf29e715ac370249cac3be',
  accUserMode: 2,
  caption: '上下班时间',
  codeName: 'attendance_shift_default_shift_view',
  appDataEntityId: 'attendanceapp.attendance_shift',
  appViewEngines: [
    {
      engineCat: 'VIEW',
      engineType: 'OptionView',
      id: 'engine',
    },
  ],
  appViewLogics: [
    {
      logicTrigger: 'CUSTOM',
      logicType: 'SCRIPT',
      scriptCode:
        "console.log('校验时间');\r\nconst { scopes } = data;\r\n// 计算时间结果，返回分钟\r\nconst calcMinutes = (time, minutes = 0) => {\r\n    const times = time.split(':');\r\n    const hoursTime = Number(times[0]) * 60 + Number(times[1]);\r\n    return hoursTime + Number(minutes);\r\n}\r\n// 校验第一个的最早打卡时间要晚于最后一个的最晚打卡时间\r\nconst verifitime = () => {\r\n    const firsttime = scopes[0];\r\n    const lasttime = scopes[data.working_number - 1];\r\n\r\n    // 第一次上班时间\r\n    const prevstart = firsttime.start_base_time;\r\n    // 第一次下班提前打卡时间\r\n    const prevAdvance = firsttime.earliest_checkin;\r\n    // 最后一次下班时间\r\n    const nextend = lasttime.end_base_time;\r\n    //最后一次下班延迟打开时间\r\n    const nextExtension = lasttime.latest_checkout;\r\n\r\n    // 最早上班 \r\n    const startwork = calcMinutes(prevstart, -Number(prevAdvance));\r\n    // 最晚下班\r\n    const endwork = calcMinutes(nextend, Number(nextExtension));\r\n\r\n    if (endwork >= 1440) {\r\n        // 最迟下班时间已经到了第二天，\r\n        // 那么今天最早上班时间必须在当天且大于昨天下班时间\r\n        const tomorrowTime = endwork - 1440;\r\n        if (startwork >= 0) {\r\n            if (tomorrowTime < startwork) {\r\n                return true\r\n            }\r\n            return false;\r\n        }\r\n        return false\r\n    } else if (startwork > 0 && endwork <= startwork) {\r\n        // 表示开始和结束时间顺序不对\r\n        return false;\r\n    } else if (startwork < 0 && endwork < 1440) {\r\n        // 最早打卡时间是上一天，\r\n        // 那么换算成前一天的打卡时间就必须要大于前一天最晚下班打卡时间\r\n        const yestoday = 1440 + startwork\r\n        if (yestoday > endwork) {\r\n            return true;\r\n        }\r\n        return false\r\n    }\r\n    return true;\r\n}\r\n\r\n// 显示错误提示\r\nconst showErrorMsg = (index, errmsg) => {\r\n    // 校验失败，需要提示当前错误项\r\n    const form = view.nerve.form.call.getThisController();\r\n    const mctrldata = form.details.scopes.contentCtrlData;\r\n    const key = mctrldata[index].srfkey;\r\n    // 获取下一班次的重复器表单控制器\r\n    const mdformNeuron = form.details.scopes.formNeurons.get(key);\r\n    const childForm = mdformNeuron.call.getThisController();\r\n    // 提示\r\n    ibiz.message.error(errmsg);\r\n    childForm.details.earliest_checkin.error = errmsg;\r\n\r\n}\r\n\r\nif (!data.working_number || data.working_number < 2) {\r\n    // 仅一个的情况仅处理边界打卡时间\r\n    const tag = verifitime()\r\n    if (tag) {\r\n        return {\r\n            refresult: true\r\n        };\r\n    }\r\n    showErrorMsg(0, \"当天最晚下班打卡时间不能与最早上班打卡时间重合\");\r\n    return {\r\n        refresult: false\r\n    }\r\n}\r\n\r\n// 循环比较每一班次和下一班次\r\nfor (let i = 0; i < data.working_number - 1; i++) {\r\n    const prevscopes = scopes[i];\r\n    const nextscopes = scopes[i + 1];\r\n\r\n    // 上一次下班时间\r\n    const prevEnd = prevscopes.end_base_time;\r\n    // 上一次下班延迟打卡时间\r\n    const prevExtension = prevscopes.latest_checkout;\r\n    // 下次次上班时间\r\n    const nextStart = nextscopes.start_base_time;\r\n    //下次上班时间延迟打卡时间\r\n    const nextExtension = nextscopes.earliest_checkin;\r\n\r\n    // 第一次最后下班时间   以分钟计算\r\n    const prevClockout = calcMinutes(prevEnd, Number(prevExtension));\r\n    // 下次上班时间\r\n    const nextClockin = calcMinutes(nextStart, -Number(nextExtension))\r\n\r\n    if (prevClockout >= nextClockin) {\r\n        showErrorMsg(i + 1, \"最早上班时间不得早于上个班次最晚下班时间\");\r\n        // // 校验失败，需要提示当前错误项\r\n        // const form = view.nerve.form.call.getThisController();\r\n        // const mctrldata = form.details.scopes.contentCtrlData;\r\n        // const key = mctrldata[i + 1].srfkey;\r\n        // // 获取下一班次的重复器表单控制器\r\n        // const mdformNeuron = form.details.scopes.formNeurons.get(key);\r\n        // const childForm = mdformNeuron.call.getThisController();\r\n        // // 提示\r\n        // ibiz.message.error('最早上班时间不得早于上个班次最晚下班时间');\r\n        // childForm.details.earliest_checkin.error = '最早上班时间不得早于上个班次最晚下班时间'\r\n        return {\r\n            refresult: false\r\n        };\r\n    }\r\n}\r\nconst tag = verifitime();\r\nif (!tag) {\r\n    showErrorMsg(data.working_number - 1, \"当天最晚下班打卡时间不能与最早上班打卡时间重合\");\r\n    return {\r\n        refresult: false\r\n    };\r\n}\r\n\r\nreturn {\r\n    refresult: true\r\n};\r\n\r\n\r\n",
      builtinLogic: true,
      name: 'BEFORECONFIRM',
      id: 'beforeconfirm',
    },
  ],
  controls: [
    {
      createControlAction: {
        appDEMethodId: 'create',
        appDataEntityId: 'attendanceapp.attendance_shift',
        id: 'create',
      },
      getDraftFromControlAction: {
        appDataEntityId: 'attendanceapp.attendance_shift',
        id: 'loaddraftfrom',
      },
      getDraftControlAction: {
        appDEMethodId: 'get_draft',
        appDataEntityId: 'attendanceapp.attendance_shift',
        id: 'loaddraft',
      },
      getControlAction: {
        appDEMethodId: 'get',
        appDataEntityId: 'attendanceapp.attendance_shift',
        id: 'load',
      },
      removeControlAction: {
        appDEMethodId: 'remove',
        appDataEntityId: 'attendanceapp.attendance_shift',
        id: 'remove',
      },
      updateControlAction: {
        appDEMethodId: 'updatebytype',
        appDataEntityId: 'attendanceapp.attendance_shift',
        id: 'update',
      },
      deformItemUpdates: [
        {
          codeName: 'ScheduleGetDraft',
          defiupdateDetails: [
            {
              id: 'work_load',
            },
            {
              id: 'scopes',
            },
          ],
          scriptCode:
            'console.log("次数更新"+data)\r\n\r\ndata.attendance_ratio = 1.0;\r\n// data.name = "班次";\r\nvar _workNumber = data.working_number ? data.working_number : 1;\r\nvar _scopes = [];\r\n\r\n// 时间字符串转分钟数的工具函数\r\nfunction timeToMinutes(timeStr) {\r\n    const parts = timeStr.split(\':\');\r\n    const hours = parseInt(parts[0], 10);\r\n    const minutes = parseInt(parts[1], 10);\r\n    return hours * 60 + minutes;\r\n}\r\n\r\n// 根据班次数量定义时间段配置\r\nvar timeConfigs = {\r\n    1: [{ start: "08:00", end: "17:00" }],\r\n    2: [\r\n        { start: "08:00", end: "12:00" },\r\n        { start: "13:30", end: "17:30" }\r\n    ],\r\n    3: [\r\n        { start: "08:00", end: "12:00" },\r\n        { start: "13:30", end: "17:30" },\r\n        { start: "18:30", end: "21:00" }\r\n    ]\r\n};\r\n\r\n\r\n\r\n\r\n// 获取当前班次数量的时间配置\r\nvar currentConfig = timeConfigs[_workNumber] || timeConfigs[1];\r\n\r\n// 生成班次配置并计算总工时\r\nvar totalWorkingMinutes = 0;\r\ncurrentConfig.forEach((timeRange, index) => {\r\n    // 转换时间为分钟数\r\n    const start = timeToMinutes(timeRange.start);\r\n    const end = timeToMinutes(timeRange.end);\r\n\r\n    // 计算单个班次工时（分钟）\r\n    totalWorkingMinutes += (end - start);\r\n\r\n    //最早提前\r\n    var earliest_checkin = 120\r\n    //最晚延后\r\n    var latest_checkout = 480\r\n    if (_workNumber === 2 && index === 0) {\r\n        earliest_checkin = 120\r\n        latest_checkout = 30\r\n    }\r\n    if (_workNumber === 2 && index === 1) {\r\n        earliest_checkin = 30\r\n        latest_checkout = 480\r\n    }\r\n\r\n    if (_workNumber === 3 && index === 0) {\r\n        earliest_checkin = 120\r\n        latest_checkout = 30\r\n    }\r\n\r\n    if (_workNumber === 3 && index === 1) {\r\n        earliest_checkin = 30\r\n        latest_checkout = 29\r\n    }\r\n\r\n    if (_workNumber === 3 && index === 2) {\r\n        earliest_checkin = 30\r\n        latest_checkout = 180\r\n    }\r\n\r\n\r\n    // 生成scope对象\r\n    var scope = {\r\n        early_for_absenteeism: 60,\r\n        early_for_early: 0,\r\n        latest_checkout: latest_checkout,\r\n        end_base_time: timeRange.end,\r\n        start_base_time: timeRange.start,\r\n        earliest_checkin: earliest_checkin,\r\n        late_for_absenteeism: 60,\r\n        late_for_late: 0,\r\n        shift_id: data.id,\r\n        order_value: index+1\r\n    };\r\n    _scopes.push(scope);\r\n});\r\n\r\n// 转换为小时分钟格式\r\nvar hours = Math.floor(totalWorkingMinutes / 60);\r\nvar minutes = totalWorkingMinutes % 60;\r\nvar workLoadText = hours + "小时" + minutes + "分钟";\r\n\r\n// 更新数据\r\nctrl.setDataValue(\'scopes\', _scopes);\r\nctrl.setDataValue(\'work_load\', workLoadText);',
          customCode: true,
          showBusyIndicator: true,
          name: '次数更新',
          id: 'schedulegetdraft',
        },
        {
          codeName: 'refreshWorkLoad',
          defiupdateDetails: [
            {
              id: 'scopes',
            },
            {
              id: 'work_load',
            },
          ],
          scriptCode:
            'console.log("初始化总工时" + data)\r\n\r\nfunction timeToMinutes(timeStr) {\r\n    const parts = timeStr.split(\':\');\r\n    const hours = parseInt(parts[0], 10);\r\n    const minutes = parseInt(parts[1], 10);\r\n    return hours * 60 + minutes;\r\n}\r\n// 初始化总工时\r\nlet totalWorkingMinutes = 0;\r\nvar _workNumber = data.working_number ? data.working_number : 1;\r\nvar start_base_time1 = 0\r\nvar end_base_time1 = 0\r\nvar start_base_time2 = 0\r\nvar end_base_time2 = 0\r\nvar start_base_time3 = 0\r\nvar end_base_time3 = 0\r\n\r\n// 遍历所有班次配置计算总工时\r\nif (data.scopes && data.scopes.length > 0) {\r\n    data.scopes.forEach(scope => {\r\n        var start_base_time = scope.start_base_time;\r\n        var end_base_time = scope.end_base_time;\r\n\r\n        // 转换时间段为分钟数\r\n        const start = timeToMinutes(start_base_time);\r\n        const end = timeToMinutes(end_base_time);\r\n        // 累加工时\r\n        if (start >= end) {\r\n            totalWorkingMinutes += (24 * 60 - start + end);\r\n        }else {\r\n            totalWorkingMinutes += (end - start);\r\n        }\r\n\r\n        if (scope.order_value === 1) {\r\n            start_base_time1 = start\r\n            end_base_time1 = end\r\n        }\r\n        if (scope.order_value === 2) {\r\n            start_base_time2 = start\r\n            end_base_time2 = end\r\n        }\r\n        if (scope.order_value === 3) {\r\n            start_base_time3 = start\r\n            end_base_time3 = end\r\n        }\r\n\r\n    });\r\n}\r\n\r\n// 转换为小时分钟格式\r\nconst hours = Math.floor(Math.abs(totalWorkingMinutes) / 60);\r\nconst minutes = totalWorkingMinutes % 60;\r\n\r\n// 更新数据\r\nctrl.setDataValue(\'work_load\', `${hours}小时${minutes}分钟`);\r\n\r\n//计算次日标记\r\nif (data.scopes && data.scopes.length > 0) {\r\n    data.scopes.forEach(scope => {\r\n        scope.next_tag = "0,0"\r\n        if (start_base_time1 >= end_base_time1) {\r\n            if (scope.order_value === 1) {\r\n                scope.next_tag = "0,1"\r\n            } else {\r\n                scope.next_tag = "1,1"\r\n            }\r\n        }\r\n        //两次\r\n        if(_workNumber > 1){\r\n            if (start_base_time2 <= end_base_time1) {\r\n                if (scope.order_value > 1) {\r\n                    scope.next_tag = "1,1"\r\n                }\r\n            }\r\n            if (end_base_time2 <= start_base_time2) {\r\n                if (scope.order_value === 2) {\r\n                    scope.next_tag = "0,1"\r\n                }else if (scope.order_value === 3){\r\n                    scope.next_tag = "1,1"\r\n                }\r\n            }\r\n        }\r\n\r\n        //三次\r\n        if(_workNumber === 3){\r\n            if (start_base_time3 <= end_base_time2) {\r\n                if (scope.order_value ===3) {\r\n                    scope.next_tag = "1,1"\r\n                }\r\n            }\r\n            if (end_base_time3 <= start_base_time3) {\r\n                if (scope.order_value === 3){\r\n                    scope.next_tag = "0,1"\r\n                }\r\n            }\r\n        }\r\n\r\n    });\r\n    const mdctrl = ctrl.formMDCtrls.find(item => item.name === \'scopes\')\r\n    if (mdctrl) {\r\n        // mdctrl.loadData()\r\n        mdctrl.refresh()\r\n\r\n    }\r\n}\r\n',
          customCode: true,
          showBusyIndicator: true,
          name: '刷新工时/次日标记',
          id: 'refreshworkload',
        },
      ],
      deformPages: [
        {
          layout: {
            columnCount: 24,
            layout: 'TABLE_24COL',
          },
          deformDetails: [
            {
              layout: {
                columnCount: 24,
                layout: 'TABLE_24COL',
              },
              deformDetails: [
                {
                  layout: {
                    columnCount: 24,
                    layout: 'TABLE_24COL',
                  },
                  deformDetails: [
                    {
                      createDV: 'workday',
                      createDVT: 'APPDATA',
                      dataType: 25,
                      enableCond: 3,
                      labelPos: 'LEFT',
                      labelWidth: 130,
                      noPrivDisplayMode: 1,
                      appDEFieldId: 'workday_id',
                      editor: {
                        editorType: 'HIDDEN',
                        valueType: 'SIMPLE',
                        editable: true,
                        id: 'workday_id',
                      },
                      updateDV: 'workday',
                      updateDVT: 'APPDATA',
                      allowEmpty: true,
                      hidden: true,
                      caption: '工作日',
                      codeName: 'workday_id',
                      detailStyle: 'DEFAULT',
                      detailType: 'FORMITEM',
                      layoutPos: {
                        colMD: 24,
                        layout: 'TABLE_24COL',
                      },
                      id: 'workday_id',
                    },
                    {
                      createDV: 'schedule_type',
                      createDVT: 'APPDATA',
                      dataType: 25,
                      enableCond: 3,
                      labelPos: 'LEFT',
                      labelWidth: 130,
                      noPrivDisplayMode: 1,
                      appDEFieldId: 'schedule_type',
                      editor: {
                        editorType: 'HIDDEN',
                        valueType: 'SIMPLE',
                        editable: true,
                        id: 'schedule_type',
                      },
                      updateDV: 'schedule_type',
                      updateDVT: 'APPDATA',
                      allowEmpty: true,
                      hidden: true,
                      caption: '班次类型',
                      codeName: 'schedule_type',
                      detailStyle: 'DEFAULT',
                      detailType: 'FORMITEM',
                      layoutPos: {
                        colMD: 24,
                        layout: 'TABLE_24COL',
                      },
                      id: 'schedule_type',
                    },
                    {
                      dataType: 25,
                      enableCond: 3,
                      labelPos: 'LEFT',
                      labelWidth: 130,
                      noPrivDisplayMode: 1,
                      appDEFieldId: 'name',
                      editor: {
                        maxLength: 255,
                        editorType: 'TEXTBOX',
                        valueType: 'SIMPLE',
                        editable: true,
                        id: 'name',
                      },
                      capLanguageRes: {
                        lanResTag: 'DEF.LNAME.SHIFT.NAME',
                      },
                      caption: '班次名称',
                      codeName: 'name',
                      detailStyle: 'DEFAULT',
                      detailType: 'FORMITEM',
                      defdgroupLogics: [
                        {
                          logicCat: 'PANELVISIBLE',
                          relatedDetailNames: ['schedule_type'],
                          groupOP: 'AND',
                          defdlogics: [
                            {
                              condOP: 'EQ',
                              defdname: 'schedule_type',
                              value: 'manual',
                              logicType: 'SINGLE',
                              id: 'schedule_type等于(=) manual',
                            },
                          ],
                          logicType: 'GROUP',
                        },
                        {
                          logicCat: 'ITEMBLANK',
                          relatedDetailNames: ['schedule_type'],
                          groupOP: 'AND',
                          defdlogics: [
                            {
                              condOP: 'NOTEQ',
                              defdname: 'schedule_type',
                              value: 'manual',
                              logicType: 'SINGLE',
                              id: 'schedule_type不等于(<>) manual',
                            },
                          ],
                          logicType: 'GROUP',
                        },
                        {
                          logicCat: 'ITEMENABLE',
                          relatedDetailNames: ['schedule_type'],
                          groupOP: 'AND',
                          defdlogics: [
                            {
                              condOP: 'EQ',
                              defdname: 'schedule_type',
                              value: 'manual',
                              logicType: 'SINGLE',
                              id: 'schedule_type等于(=) manual',
                            },
                          ],
                          logicType: 'GROUP',
                        },
                      ],
                      layoutPos: {
                        colMD: 24,
                        layout: 'TABLE_24COL',
                      },
                      showCaption: true,
                      id: 'name',
                    },
                    {
                      createDV: '1',
                      dataType: 9,
                      enableCond: 3,
                      labelPos: 'LEFT',
                      labelWidth: 130,
                      noPrivDisplayMode: 1,
                      appDEFieldId: 'working_number',
                      deformItemUpdateId: 'schedulegetdraft',
                      editor: {
                        appCodeListId:
                          'attendanceapp.attendance__workingnumber',
                        editorType: 'RADIOBUTTONLIST',
                        valueType: 'SIMPLE',
                        editable: true,
                        id: 'working_number',
                      },
                      updateDV: '1',
                      allowEmpty: true,
                      needCodeListConfig: true,
                      capLanguageRes: {
                        lanResTag: 'DEF.LNAME.SHIFT.WORKING_NUMBER',
                      },
                      caption: '上下班次数',
                      codeName: 'working_number',
                      detailStyle: 'DEFAULT',
                      detailType: 'FORMITEM',
                      layoutPos: {
                        colMD: 24,
                        layout: 'TABLE_24COL',
                      },
                      showCaption: true,
                      id: 'working_number',
                    },
                    {
                      dataType: 9,
                      enableCond: 3,
                      labelPos: 'LEFT',
                      labelWidth: 130,
                      noPrivDisplayMode: 1,
                      appDEFieldId: 'default_flag',
                      editor: {
                        editorType: 'HIDDEN',
                        valueType: 'SIMPLE',
                        editable: true,
                        id: 'default_flag',
                      },
                      allowEmpty: true,
                      hidden: true,
                      caption: '默认标识',
                      codeName: 'default_flag',
                      detailStyle: 'DEFAULT',
                      detailType: 'FORMITEM',
                      layoutPos: {
                        colMD: 24,
                        layout: 'TABLE_24COL',
                      },
                      id: 'default_flag',
                    },
                  ],
                  capLanguageRes: {
                    lanResTag:
                      'CONTROL.DEFORM.SHIFT.MAIN2.GROUPPANEL.GROUPPANEL2',
                  },
                  caption: '基本信息',
                  codeName: 'grouppanel2',
                  detailStyle: 'DEFAULT',
                  detailType: 'GROUPPANEL',
                  layoutPos: {
                    colMD: 24,
                    layout: 'TABLE_24COL',
                  },
                  id: 'grouppanel2',
                },
                {
                  layout: {
                    columnCount: 24,
                    layout: 'TABLE_24COL',
                  },
                  deformDetails: [
                    {
                      layout: {
                        columnCount: 24,
                        layout: 'TABLE_24COL',
                      },
                      deformDetails: [
                        {
                          contentType: 'REPEATER',
                          ctrlParams: {
                            'SRFNAVCTX.shift': '%id%',
                          },
                          fieldName: 'scopes',
                          appDEFieldId: 'scopes',
                          deformItemUpdateId: 'refreshworkload',
                          layout: {
                            columnCount: 24,
                            layout: 'TABLE_24COL',
                          },
                          deformDetails: [
                            {
                              rawItem: {
                                halign: 'LEFT',
                                valign: 'MIDDLE',
                                wrapMode: 'NOWRAP',
                                contentType: 'RAW',
                                id: 'rawitem2',
                              },
                              codeName: 'rawitem2',
                              detailStyle: 'DEFAULT',
                              detailType: 'RAWITEM',
                              layoutPos: {
                                colMD: 24,
                                layout: 'TABLE_24COL',
                              },
                              sysPFPluginId: 'group_title',
                              repeatContent: true,
                              showCaption: true,
                              id: 'rawitem2',
                            },
                            {
                              layout: {
                                columnCount: 24,
                                layout: 'TABLE_24COL',
                              },
                              deformDetails: [
                                {
                                  layout: {
                                    columnCount: 24,
                                    layout: 'TABLE_24COL',
                                  },
                                  deformDetails: [
                                    {
                                      layout: {
                                        columnCount: 24,
                                        layout: 'TABLE_24COL',
                                      },
                                      deformDetails: [
                                        {
                                          layout: {
                                            align: 'flex-start',
                                            dir: 'row',
                                            layout: 'FLEX',
                                          },
                                          deformDetails: [
                                            {
                                              dataType: 25,
                                              enableCond: 3,
                                              itemWidth: 224,
                                              labelPos: 'LEFT',
                                              labelWidth: 130,
                                              noPrivDisplayMode: 1,
                                              editor: {
                                                dateTimeFormat: 'HH:mm',
                                                editorParams: {
                                                  TIMEFMT: 'HH:mm',
                                                  customprops:
                                                    '{"clearable":false,"activeChange":false}',
                                                },
                                                editorStyle: 'TIME_PICKER',
                                                editorType:
                                                  'DATEPICKEREX_NODAY_NOSECOND',
                                                editorWidth: 94,
                                                sysPFPluginId: 'time_picker',
                                                valueType: 'SIMPLE',
                                                editable: true,
                                                id: 'start_base_time',
                                              },
                                              capLanguageRes: {
                                                lanResTag:
                                                  'CONTROL.DEFORM.SHIFT.MAIN2.FORMITEM.BASE_TIME',
                                              },
                                              caption: '上班时间',
                                              codeName: 'start_base_time',
                                              detailStyle: 'DEFAULT',
                                              detailType: 'FORMITEM',
                                              controlAttributes: [
                                                {
                                                  attrName: 'clearable',
                                                  attrValue: 'false',
                                                  name: 'startClearableFalse',
                                                  id: 'startclearablefalse',
                                                },
                                              ],
                                              layoutPos: {
                                                shrink: 1,
                                                layout: 'FLEX',
                                              },
                                              repeatContent: true,
                                              showCaption: true,
                                              id: 'start_base_time',
                                            },
                                            {
                                              rawItem: {
                                                caption: '次日',
                                                halign: 'LEFT',
                                                valign: 'MIDDLE',
                                                wrapMode: 'NOWRAP',
                                                contentType: 'RAW',
                                                sysCss: {
                                                  cssName: 'next_tag',
                                                },
                                                rawItemWidth: 50,
                                                id: 'rawitem14',
                                              },
                                              codeName: 'rawitem14',
                                              detailStyle: 'DEFAULT',
                                              detailType: 'RAWITEM',
                                              defdgroupLogics: [
                                                {
                                                  logicCat: 'PANELVISIBLE',
                                                  relatedDetailNames: [
                                                    'next_tag',
                                                  ],
                                                  groupOP: 'AND',
                                                  defdlogics: [
                                                    {
                                                      groupOP: 'OR',
                                                      defdlogics: [
                                                        {
                                                          condOP: 'EQ',
                                                          defdname: 'next_tag',
                                                          value: '1,0',
                                                          logicType: 'SINGLE',
                                                          id: 'next_tag等于(=) 1,0',
                                                        },
                                                        {
                                                          condOP: 'EQ',
                                                          defdname: 'next_tag',
                                                          value: '1,1',
                                                          logicType: 'SINGLE',
                                                          id: 'next_tag等于(=) 1,1',
                                                        },
                                                      ],
                                                      logicType: 'GROUP',
                                                      name: 'OR',
                                                      id: 'or',
                                                    },
                                                  ],
                                                  logicType: 'GROUP',
                                                },
                                              ],
                                              layoutPos: {
                                                shrink: 1,
                                                layout: 'FLEX',
                                                width: 50,
                                                widthMode: 'PX',
                                              },
                                              sysCss: {
                                                cssName: 'next_tag',
                                              },
                                              repeatContent: true,
                                              showCaption: true,
                                              id: 'rawitem14',
                                            },
                                          ],
                                          codeName: 'grouppanel8',
                                          detailStyle: 'DEFAULT',
                                          detailType: 'GROUPPANEL',
                                          layoutPos: {
                                            colMD: 24,
                                            layout: 'TABLE_24COL',
                                          },
                                          repeatContent: true,
                                          id: 'grouppanel8',
                                        },
                                      ],
                                      codeName: 'grouppanel10',
                                      detailStyle: 'DEFAULT',
                                      detailType: 'GROUPPANEL',
                                      layoutPos: {
                                        colMD: 24,
                                        layout: 'TABLE_24COL',
                                      },
                                      repeatContent: true,
                                      id: 'grouppanel10',
                                    },
                                    {
                                      dataType: 25,
                                      enableCond: 3,
                                      labelPos: 'LEFT',
                                      labelWidth: 130,
                                      noPrivDisplayMode: 1,
                                      editor: {
                                        editorParams: {
                                          customprops: '{"activeChange":false}',
                                        },
                                        editorType: 'NUMBER',
                                        valueType: 'SIMPLE',
                                        editable: true,
                                        id: 'late_for_late',
                                      },
                                      allowEmpty: true,
                                      capLanguageRes: {
                                        lanResTag:
                                          'CONTROL.DEFORM.SHIFT.MAIN2.FORMITEM.LATE_FOR_LATE',
                                      },
                                      caption: '上班晚',
                                      codeName: 'late_for_late',
                                      detailStyle: 'DEFAULT',
                                      detailType: 'FORMITEM',
                                      layoutPos: {
                                        colLG: 16,
                                        colMD: 16,
                                        layout: 'TABLE_24COL',
                                      },
                                      repeatContent: true,
                                      showCaption: true,
                                      id: 'late_for_late',
                                    },
                                    {
                                      rawItem: {
                                        caption: '分钟记为迟到',
                                        halign: 'LEFT',
                                        valign: 'MIDDLE',
                                        wrapMode: 'NOWRAP',
                                        contentType: 'RAW',
                                        sysCss: {
                                          cssName: 'form-rawitem-style',
                                        },
                                        id: 'rawitem1',
                                      },
                                      codeName: 'rawitem1',
                                      detailStyle: 'DEFAULT',
                                      detailType: 'RAWITEM',
                                      layoutPos: {
                                        colLG: 8,
                                        colMD: 24,
                                        layout: 'TABLE_24COL',
                                      },
                                      sysCss: {
                                        cssName: 'form-rawitem-style',
                                      },
                                      repeatContent: true,
                                      showCaption: true,
                                      id: 'rawitem1',
                                    },
                                    {
                                      dataType: 25,
                                      enableCond: 3,
                                      labelPos: 'LEFT',
                                      labelWidth: 130,
                                      noPrivDisplayMode: 1,
                                      editor: {
                                        editorParams: {
                                          customprops: '{"activeChange":false}',
                                        },
                                        editorType: 'NUMBER',
                                        valueType: 'SIMPLE',
                                        editable: true,
                                        id: 'late_for_absenteeism',
                                      },
                                      allowEmpty: true,
                                      capLanguageRes: {
                                        lanResTag:
                                          'CONTROL.DEFORM.SHIFT.MAIN2.FORMITEM.LATE_FOR_ABSENTEEISM',
                                      },
                                      caption: '上班晚',
                                      codeName: 'late_for_absenteeism',
                                      detailStyle: 'DEFAULT',
                                      detailType: 'FORMITEM',
                                      layoutPos: {
                                        colLG: 16,
                                        colMD: 16,
                                        layout: 'TABLE_24COL',
                                      },
                                      repeatContent: true,
                                      showCaption: true,
                                      id: 'late_for_absenteeism',
                                    },
                                    {
                                      rawItem: {
                                        caption: '分钟记为缺卡',
                                        halign: 'LEFT',
                                        valign: 'MIDDLE',
                                        wrapMode: 'NOWRAP',
                                        contentType: 'RAW',
                                        sysCss: {
                                          cssName: 'form-rawitem-style',
                                        },
                                        id: 'rawitem3',
                                      },
                                      codeName: 'rawitem3',
                                      detailStyle: 'DEFAULT',
                                      detailType: 'RAWITEM',
                                      layoutPos: {
                                        colLG: 8,
                                        colMD: 8,
                                        layout: 'TABLE_24COL',
                                      },
                                      sysCss: {
                                        cssName: 'form-rawitem-style',
                                      },
                                      repeatContent: true,
                                      showCaption: true,
                                      id: 'rawitem3',
                                    },
                                    {
                                      dataType: 25,
                                      enableCond: 3,
                                      labelPos: 'LEFT',
                                      labelWidth: 130,
                                      noPrivDisplayMode: 1,
                                      editor: {
                                        editorParams: {
                                          customprops: '{"activeChange":false}',
                                        },
                                        editorType: 'NUMBER',
                                        valueType: 'SIMPLE',
                                        editable: true,
                                        id: 'earliest_checkin',
                                      },
                                      allowEmpty: true,
                                      capLanguageRes: {
                                        lanResTag:
                                          'CONTROL.DEFORM.SHIFT.MAIN2.FORMITEM.EARLIEST_CHECKIN',
                                      },
                                      caption: '最早提前',
                                      codeName: 'earliest_checkin',
                                      detailStyle: 'DEFAULT',
                                      detailType: 'FORMITEM',
                                      layoutPos: {
                                        colLG: 16,
                                        colMD: 16,
                                        layout: 'TABLE_24COL',
                                      },
                                      repeatContent: true,
                                      showCaption: true,
                                      id: 'earliest_checkin',
                                    },
                                    {
                                      rawItem: {
                                        caption: '分钟进行打卡',
                                        halign: 'LEFT',
                                        valign: 'MIDDLE',
                                        wrapMode: 'NOWRAP',
                                        contentType: 'RAW',
                                        sysCss: {
                                          cssName: 'form-rawitem-style',
                                        },
                                        id: 'rawitem4',
                                      },
                                      codeName: 'rawitem4',
                                      detailStyle: 'DEFAULT',
                                      detailType: 'RAWITEM',
                                      layoutPos: {
                                        colLG: 8,
                                        colMD: 8,
                                        layout: 'TABLE_24COL',
                                      },
                                      sysCss: {
                                        cssName: 'form-rawitem-style',
                                      },
                                      repeatContent: true,
                                      showCaption: true,
                                      id: 'rawitem4',
                                    },
                                  ],
                                  codeName: 'grouppanel4',
                                  detailStyle: 'DEFAULT',
                                  detailType: 'GROUPPANEL',
                                  layoutPos: {
                                    colLG: 12,
                                    colMD: 12,
                                    layout: 'TABLE_24COL',
                                  },
                                  repeatContent: true,
                                  id: 'grouppanel4',
                                },
                                {
                                  layout: {
                                    columnCount: 24,
                                    layout: 'TABLE_24COL',
                                  },
                                  deformDetails: [
                                    {
                                      layout: {
                                        columnCount: 24,
                                        layout: 'TABLE_24COL',
                                      },
                                      deformDetails: [
                                        {
                                          layout: {
                                            align: 'flex-start',
                                            dir: 'row',
                                            layout: 'FLEX',
                                          },
                                          deformDetails: [
                                            {
                                              dataType: 25,
                                              enableCond: 3,
                                              itemWidth: 224,
                                              labelPos: 'LEFT',
                                              labelWidth: 130,
                                              noPrivDisplayMode: 1,
                                              editor: {
                                                dateTimeFormat: 'HH:mm',
                                                editorParams: {
                                                  TIMEFMT: 'HH:mm',
                                                  customprops:
                                                    '{"clearable":false,"activeChange":false}',
                                                },
                                                editorStyle: 'TIME_PICKER',
                                                editorType:
                                                  'DATEPICKEREX_NODAY_NOSECOND',
                                                editorWidth: 94,
                                                sysPFPluginId: 'time_picker',
                                                valueType: 'SIMPLE',
                                                editable: true,
                                                id: 'end_base_time',
                                              },
                                              allowEmpty: true,
                                              caption: '下班时间',
                                              codeName: 'end_base_time',
                                              detailStyle: 'DEFAULT',
                                              detailType: 'FORMITEM',
                                              controlAttributes: [
                                                {
                                                  attrName: 'clearable',
                                                  attrValue: 'false',
                                                  name: 'endClearableFalse',
                                                  id: 'endclearablefalse',
                                                },
                                              ],
                                              layoutPos: {
                                                shrink: 1,
                                                layout: 'FLEX',
                                              },
                                              repeatContent: true,
                                              showCaption: true,
                                              id: 'end_base_time',
                                            },
                                            {
                                              rawItem: {
                                                caption: '次日',
                                                halign: 'LEFT',
                                                valign: 'MIDDLE',
                                                wrapMode: 'NOWRAP',
                                                contentType: 'RAW',
                                                sysCss: {
                                                  cssName: 'next_tag',
                                                },
                                                rawItemWidth: 50,
                                                id: 'rawitem15',
                                              },
                                              codeName: 'rawitem15',
                                              detailStyle: 'DEFAULT',
                                              detailType: 'RAWITEM',
                                              defdgroupLogics: [
                                                {
                                                  logicCat: 'PANELVISIBLE',
                                                  relatedDetailNames: [
                                                    'next_tag',
                                                  ],
                                                  groupOP: 'AND',
                                                  defdlogics: [
                                                    {
                                                      groupOP: 'OR',
                                                      defdlogics: [
                                                        {
                                                          condOP: 'EQ',
                                                          defdname: 'next_tag',
                                                          value: '1,1',
                                                          logicType: 'SINGLE',
                                                          id: 'next_tag等于(=) 1,1',
                                                        },
                                                        {
                                                          condOP: 'EQ',
                                                          defdname: 'next_tag',
                                                          value: '0,1',
                                                          logicType: 'SINGLE',
                                                          id: 'next_tag等于(=) 0,1',
                                                        },
                                                      ],
                                                      logicType: 'GROUP',
                                                      name: 'OR',
                                                      id: 'or',
                                                    },
                                                  ],
                                                  logicType: 'GROUP',
                                                },
                                              ],
                                              layoutPos: {
                                                shrink: 1,
                                                layout: 'FLEX',
                                                width: 50,
                                                widthMode: 'PX',
                                              },
                                              sysCss: {
                                                cssName: 'next_tag',
                                              },
                                              repeatContent: true,
                                              showCaption: true,
                                              id: 'rawitem15',
                                            },
                                          ],
                                          codeName: 'grouppanel14',
                                          detailStyle: 'DEFAULT',
                                          detailType: 'GROUPPANEL',
                                          layoutPos: {
                                            colMD: 24,
                                            layout: 'TABLE_24COL',
                                          },
                                          repeatContent: true,
                                          id: 'grouppanel14',
                                        },
                                      ],
                                      codeName: 'grouppanel11',
                                      detailStyle: 'DEFAULT',
                                      detailType: 'GROUPPANEL',
                                      layoutPos: {
                                        colMD: 24,
                                        layout: 'TABLE_24COL',
                                      },
                                      repeatContent: true,
                                      id: 'grouppanel11',
                                    },
                                    {
                                      dataType: 25,
                                      enableCond: 3,
                                      labelPos: 'LEFT',
                                      labelWidth: 130,
                                      noPrivDisplayMode: 1,
                                      editor: {
                                        editorParams: {
                                          customprops: '{"activeChange":false}',
                                        },
                                        editorType: 'NUMBER',
                                        valueType: 'SIMPLE',
                                        editable: true,
                                        id: 'early_for_early',
                                      },
                                      allowEmpty: true,
                                      capLanguageRes: {
                                        lanResTag:
                                          'CONTROL.DEFORM.SHIFT.MAIN2.FORMITEM.EARLY_FOR_EARLY',
                                      },
                                      caption: '下班早',
                                      codeName: 'early_for_early',
                                      detailStyle: 'DEFAULT',
                                      detailType: 'FORMITEM',
                                      layoutPos: {
                                        colLG: 16,
                                        colMD: 16,
                                        layout: 'TABLE_24COL',
                                      },
                                      repeatContent: true,
                                      showCaption: true,
                                      id: 'early_for_early',
                                    },
                                    {
                                      rawItem: {
                                        caption: '分钟记为早退',
                                        halign: 'LEFT',
                                        valign: 'MIDDLE',
                                        wrapMode: 'NOWRAP',
                                        contentType: 'RAW',
                                        sysCss: {
                                          cssName: 'form-rawitem-style',
                                        },
                                        id: 'rawitem6',
                                      },
                                      codeName: 'rawitem6',
                                      detailStyle: 'DEFAULT',
                                      detailType: 'RAWITEM',
                                      layoutPos: {
                                        colLG: 8,
                                        colMD: 8,
                                        layout: 'TABLE_24COL',
                                      },
                                      sysCss: {
                                        cssName: 'form-rawitem-style',
                                      },
                                      repeatContent: true,
                                      showCaption: true,
                                      id: 'rawitem6',
                                    },
                                    {
                                      dataType: 25,
                                      enableCond: 3,
                                      labelPos: 'LEFT',
                                      labelWidth: 130,
                                      noPrivDisplayMode: 1,
                                      editor: {
                                        editorParams: {
                                          customprops: '{"activeChange":false}',
                                        },
                                        editorType: 'NUMBER',
                                        valueType: 'SIMPLE',
                                        editable: true,
                                        id: 'early_for_absenteeism',
                                      },
                                      allowEmpty: true,
                                      capLanguageRes: {
                                        lanResTag:
                                          'CONTROL.DEFORM.SHIFT.MAIN2.FORMITEM.EARLY_FOR_ABSENTEEISM',
                                      },
                                      caption: '下班早',
                                      codeName: 'early_for_absenteeism',
                                      detailStyle: 'DEFAULT',
                                      detailType: 'FORMITEM',
                                      layoutPos: {
                                        colLG: 16,
                                        colMD: 16,
                                        layout: 'TABLE_24COL',
                                      },
                                      repeatContent: true,
                                      showCaption: true,
                                      id: 'early_for_absenteeism',
                                    },
                                    {
                                      rawItem: {
                                        caption: '分钟记为缺卡',
                                        halign: 'LEFT',
                                        valign: 'MIDDLE',
                                        wrapMode: 'NOWRAP',
                                        contentType: 'RAW',
                                        sysCss: {
                                          cssName: 'form-rawitem-style',
                                        },
                                        id: 'rawitem7',
                                      },
                                      codeName: 'rawitem7',
                                      detailStyle: 'DEFAULT',
                                      detailType: 'RAWITEM',
                                      layoutPos: {
                                        colLG: 8,
                                        colMD: 8,
                                        layout: 'TABLE_24COL',
                                      },
                                      sysCss: {
                                        cssName: 'form-rawitem-style',
                                      },
                                      repeatContent: true,
                                      showCaption: true,
                                      id: 'rawitem7',
                                    },
                                    {
                                      dataType: 25,
                                      enableCond: 3,
                                      labelPos: 'LEFT',
                                      labelWidth: 130,
                                      noPrivDisplayMode: 1,
                                      editor: {
                                        editorParams: {
                                          customprops: '{"activeChange":false}',
                                        },
                                        editorType: 'NUMBER',
                                        valueType: 'SIMPLE',
                                        editable: true,
                                        id: 'latest_checkout',
                                      },
                                      allowEmpty: true,
                                      capLanguageRes: {
                                        lanResTag:
                                          'CONTROL.DEFORM.SHIFT.MAIN2.FORMITEM.LATEST_CHECKOUT',
                                      },
                                      caption: '最晚延后',
                                      codeName: 'latest_checkout',
                                      detailStyle: 'DEFAULT',
                                      detailType: 'FORMITEM',
                                      layoutPos: {
                                        colLG: 16,
                                        colMD: 16,
                                        layout: 'TABLE_24COL',
                                      },
                                      repeatContent: true,
                                      showCaption: true,
                                      id: 'latest_checkout',
                                    },
                                    {
                                      rawItem: {
                                        caption: '分钟进行打卡',
                                        halign: 'LEFT',
                                        valign: 'MIDDLE',
                                        wrapMode: 'NOWRAP',
                                        contentType: 'RAW',
                                        sysCss: {
                                          cssName: 'form-rawitem-style',
                                        },
                                        id: 'rawitem8',
                                      },
                                      codeName: 'rawitem8',
                                      detailStyle: 'DEFAULT',
                                      detailType: 'RAWITEM',
                                      layoutPos: {
                                        colLG: 8,
                                        colMD: 8,
                                        layout: 'TABLE_24COL',
                                      },
                                      sysCss: {
                                        cssName: 'form-rawitem-style',
                                      },
                                      repeatContent: true,
                                      showCaption: true,
                                      id: 'rawitem8',
                                    },
                                  ],
                                  codeName: 'grouppanel5',
                                  detailStyle: 'DEFAULT',
                                  detailType: 'GROUPPANEL',
                                  layoutPos: {
                                    colLG: 12,
                                    colMD: 12,
                                    layout: 'TABLE_24COL',
                                  },
                                  repeatContent: true,
                                  id: 'grouppanel5',
                                },
                              ],
                              codeName: 'grouppanel9',
                              detailStyle: 'DEFAULT',
                              detailType: 'GROUPPANEL',
                              layoutPos: {
                                colMD: 24,
                                layout: 'TABLE_24COL',
                              },
                              repeatContent: true,
                              id: 'grouppanel9',
                            },
                            {
                              dataType: 25,
                              enableCond: 3,
                              labelPos: 'LEFT',
                              labelWidth: 130,
                              noPrivDisplayMode: 1,
                              editor: {
                                editorType: 'HIDDEN',
                                valueType: 'SIMPLE',
                                editable: true,
                                id: 'next_tag',
                              },
                              allowEmpty: true,
                              hidden: true,
                              caption: '次日标记',
                              codeName: 'next_tag',
                              detailStyle: 'DEFAULT',
                              detailType: 'FORMITEM',
                              layoutPos: {
                                colMD: 24,
                                layout: 'TABLE_24COL',
                              },
                              repeatContent: true,
                              id: 'next_tag',
                            },
                            {
                              createDV: 'attendance_shift',
                              createDVT: 'APPDATA',
                              dataType: 25,
                              enableCond: 3,
                              labelPos: 'LEFT',
                              labelWidth: 130,
                              noPrivDisplayMode: 1,
                              editor: {
                                editorType: 'HIDDEN',
                                valueType: 'SIMPLE',
                                editable: true,
                                id: 'shift_id',
                              },
                              allowEmpty: true,
                              hidden: true,
                              codeName: 'shift_id',
                              detailStyle: 'DEFAULT',
                              detailType: 'FORMITEM',
                              layoutPos: {
                                colMD: 24,
                                layout: 'TABLE_24COL',
                              },
                              repeatContent: true,
                              id: 'shift_id',
                            },
                          ],
                          codeName: 'scopes',
                          detailStyle: 'DEFAULT',
                          detailType: 'MDCTRL',
                          layoutPos: {
                            colMD: 24,
                            layout: 'TABLE_24COL',
                          },
                          showCaption: true,
                          id: 'scopes',
                        },
                      ],
                      capLanguageRes: {
                        lanResTag:
                          'CONTROL.DEFORM.SHIFT.MAIN2.GROUPPANEL.GROUPPANEL1',
                      },
                      caption: '考勤时段',
                      codeName: 'grouppanel1',
                      detailStyle: 'DEFAULT',
                      detailType: 'GROUPPANEL',
                      layoutPos: {
                        colMD: 24,
                        layout: 'TABLE_24COL',
                      },
                      id: 'grouppanel1',
                    },
                    {
                      dataType: 25,
                      labelPos: 'LEFT',
                      labelWidth: 130,
                      noPrivDisplayMode: 1,
                      editor: {
                        halign: 'LEFT',
                        valign: 'MIDDLE',
                        wrapMode: 'NOWRAP',
                        editorType: 'SPAN',
                        valueType: 'SIMPLE',
                        editable: true,
                        id: 'work_load',
                      },
                      allowEmpty: true,
                      capLanguageRes: {
                        lanResTag:
                          'CONTROL.DEFORM.SHIFT.MAIN2.FORMITEM.WORK_LOAD',
                      },
                      caption: '总工时',
                      codeName: 'work_load',
                      detailStyle: 'DEFAULT',
                      detailType: 'FORMITEM',
                      layoutPos: {
                        colLG: 8,
                        colMD: 8,
                        layout: 'TABLE_24COL',
                      },
                      showCaption: true,
                      id: 'work_load',
                    },
                    {
                      createDV: '1',
                      dataType: 25,
                      enableCond: 3,
                      itemWidth: 180,
                      labelPos: 'LEFT',
                      labelWidth: 130,
                      noPrivDisplayMode: 1,
                      editor: {
                        editorType: 'NUMBER',
                        editorWidth: 50,
                        valueType: 'SIMPLE',
                        editable: true,
                        id: 'attendance_ratio',
                      },
                      updateDV: '1',
                      allowEmpty: true,
                      capLanguageRes: {
                        lanResTag:
                          'CONTROL.DEFORM.SHIFT.MAIN2.FORMITEM.ATTENDANCE_RATIO',
                      },
                      caption: '记为出勤',
                      codeName: 'attendance_ratio',
                      detailStyle: 'DEFAULT',
                      detailType: 'FORMITEM',
                      layoutPos: {
                        colLG: 6,
                        colMD: 6,
                        layout: 'TABLE_24COL',
                      },
                      showCaption: true,
                      id: 'attendance_ratio',
                    },
                    {
                      rawItem: {
                        caption: '天（应出勤天数/实际出勤天数，将按此折算）',
                        halign: 'LEFT',
                        valign: 'MIDDLE',
                        wrapMode: 'NOWRAP',
                        contentType: 'RAW',
                        sysCss: {
                          cssName: 'form-rawitem-style',
                        },
                        id: 'rawitem9',
                      },
                      codeName: 'rawitem9',
                      contentHeight: 36,
                      detailStyle: 'DEFAULT',
                      detailType: 'RAWITEM',
                      height: 36,
                      layoutPos: {
                        colLG: 10,
                        colMD: 10,
                        height: 36,
                        heightMode: 'PX',
                        layout: 'TABLE_24COL',
                      },
                      sysCss: {
                        cssName: 'form-rawitem-style',
                      },
                      showCaption: true,
                      id: 'rawitem9',
                    },
                  ],
                  codeName: 'grouppanel3',
                  detailStyle: 'DEFAULT',
                  detailType: 'GROUPPANEL',
                  layoutPos: {
                    colMD: 24,
                    layout: 'TABLE_24COL',
                  },
                  id: 'grouppanel3',
                },
                {
                  layout: {
                    columnCount: 24,
                    layout: 'TABLE_24COL',
                  },
                  deformDetails: [
                    {
                      createDV: '0',
                      dataType: 9,
                      enableCond: 3,
                      labelPos: 'LEFT',
                      labelWidth: 130,
                      noPrivDisplayMode: 1,
                      appDEFieldId: 'rest_enable',
                      editor: {
                        editorType: 'SWITCH',
                        valueType: 'SIMPLE',
                        editable: true,
                        id: 'rest_enable',
                      },
                      allowEmpty: true,
                      caption: '休息时间',
                      codeName: 'rest_enable',
                      detailStyle: 'DEFAULT',
                      detailType: 'FORMITEM',
                      layoutPos: {
                        colMD: 24,
                        layout: 'TABLE_24COL',
                      },
                      showCaption: true,
                      id: 'rest_enable',
                    },
                    {
                      layout: {
                        align: 'flex-start',
                        dir: 'row',
                        layout: 'FLEX',
                        valign: 'center',
                      },
                      deformDetails: [
                        {
                          dataType: 25,
                          enableCond: 3,
                          itemWidth: 90,
                          labelPos: 'NONE',
                          noPrivDisplayMode: 1,
                          editor: {
                            dateTimeFormat: 'HH:mm',
                            editorParams: {
                              TIMEFMT: 'HH:mm',
                            },
                            editorType: 'DATEPICKEREX_NODAY_NOSECOND',
                            editorWidth: 90,
                            valueType: 'SIMPLE',
                            editable: true,
                            id: 'rest_start',
                          },
                          allowEmpty: true,
                          codeName: 'rest_start',
                          detailStyle: 'DEFAULT',
                          detailType: 'FORMITEM',
                          layoutPos: {
                            shrink: 1,
                            layout: 'FLEX',
                          },
                          id: 'rest_start',
                        },
                        {
                          rawItem: {
                            caption: '至',
                            halign: 'LEFT',
                            valign: 'MIDDLE',
                            wrapMode: 'NOWRAP',
                            contentType: 'RAW',
                            rawItemWidth: 30,
                            id: 'rawitem10',
                          },
                          codeName: 'rawitem10',
                          detailStyle: 'DEFAULT',
                          detailType: 'RAWITEM',
                          layoutPos: {
                            shrink: 1,
                            layout: 'FLEX',
                            width: 30,
                            widthMode: 'PX',
                          },
                          showCaption: true,
                          id: 'rawitem10',
                        },
                        {
                          dataType: 25,
                          enableCond: 3,
                          itemWidth: 90,
                          labelPos: 'NONE',
                          noPrivDisplayMode: 1,
                          editor: {
                            dateTimeFormat: 'HH:mm',
                            editorParams: {
                              TIMEFMT: 'HH:mm',
                            },
                            editorType: 'DATEPICKEREX_NODAY_NOSECOND',
                            editorWidth: 90,
                            valueType: 'SIMPLE',
                            editable: true,
                            id: 'end_start',
                          },
                          allowEmpty: true,
                          codeName: 'end_start',
                          detailStyle: 'DEFAULT',
                          detailType: 'FORMITEM',
                          layoutPos: {
                            shrink: 1,
                            layout: 'FLEX',
                          },
                          id: 'end_start',
                        },
                      ],
                      codeName: 'grouppanel7',
                      detailStyle: 'DEFAULT',
                      detailType: 'GROUPPANEL',
                      defdgroupLogics: [
                        {
                          logicCat: 'PANELVISIBLE',
                          relatedDetailNames: ['rest_enable'],
                          groupOP: 'AND',
                          defdlogics: [
                            {
                              condOP: 'EQ',
                              defdname: 'rest_enable',
                              value: '1',
                              logicType: 'SINGLE',
                              id: 'rest_enable等于(=) 1',
                            },
                          ],
                          logicType: 'GROUP',
                        },
                      ],
                      layoutPos: {
                        colLGOffset: 2,
                        colMD: 24,
                        layout: 'TABLE_24COL',
                      },
                      sysCss: {
                        cssName: 'raw-group',
                      },
                      id: 'grouppanel7',
                    },
                    {
                      dataType: 9,
                      enableCond: 3,
                      labelPos: 'LEFT',
                      labelWidth: 130,
                      noPrivDisplayMode: 1,
                      appDEFieldId: 'overtime_valid',
                      editor: {
                        editorType: 'SWITCH',
                        valueType: 'SIMPLE',
                        editable: true,
                        id: 'overtime_valid',
                      },
                      allowEmpty: true,
                      caption: '加班工时',
                      codeName: 'overtime_valid',
                      detailStyle: 'DEFAULT',
                      detailType: 'FORMITEM',
                      layoutPos: {
                        colMD: 24,
                        layout: 'TABLE_24COL',
                      },
                      showCaption: true,
                      id: 'overtime_valid',
                    },
                    {
                      layout: {
                        dir: 'row',
                        layout: 'FLEX',
                      },
                      deformDetails: [
                        {
                          createDV: '0',
                          dataType: 9,
                          enableCond: 3,
                          itemWidth: 195,
                          labelPos: 'LEFT',
                          labelWidth: 115,
                          noPrivDisplayMode: 1,
                          appDEFieldId: 'invalid_overtime',
                          editor: {
                            editorType: 'NUMBER',
                            editorWidth: 80,
                            valueType: 'SIMPLE',
                            editable: true,
                            id: 'invalid_overtime',
                          },
                          allowEmpty: true,
                          caption: '加班少于',
                          codeName: 'invalid_overtime',
                          detailStyle: 'DEFAULT',
                          detailType: 'FORMITEM',
                          layoutPos: {
                            shrink: 1,
                            layout: 'FLEX',
                          },
                          showCaption: true,
                          id: 'invalid_overtime',
                        },
                        {
                          rawItem: {
                            caption: ' 分钟不计入加班',
                            halign: 'LEFT',
                            valign: 'MIDDLE',
                            wrapMode: 'NOWRAP',
                            contentType: 'RAW',
                            rawItemWidth: 150,
                            id: 'rawitem13',
                          },
                          codeName: 'rawitem13',
                          detailStyle: 'DEFAULT',
                          detailType: 'RAWITEM',
                          layoutPos: {
                            shrink: 1,
                            layout: 'FLEX',
                            width: 150,
                            widthMode: 'PX',
                          },
                          showCaption: true,
                          id: 'rawitem13',
                        },
                      ],
                      codeName: 'grouppanel13',
                      detailStyle: 'DEFAULT',
                      detailType: 'GROUPPANEL',
                      defdgroupLogics: [
                        {
                          logicCat: 'PANELVISIBLE',
                          relatedDetailNames: ['overtime_valid'],
                          groupOP: 'AND',
                          defdlogics: [
                            {
                              condOP: 'EQ',
                              defdname: 'overtime_valid',
                              value: '1',
                              logicType: 'SINGLE',
                              id: 'overtime_valid等于(=) 1',
                            },
                          ],
                          logicType: 'GROUP',
                        },
                      ],
                      layoutPos: {
                        colLGOffset: 2,
                        colMD: 24,
                        layout: 'TABLE_24COL',
                      },
                      id: 'grouppanel13',
                    },
                    {
                      layout: {
                        dir: 'row',
                        layout: 'FLEX',
                      },
                      deformDetails: [
                        {
                          createDV: '0',
                          dataType: 9,
                          enableCond: 3,
                          itemWidth: 194,
                          labelPos: 'LEFT',
                          labelWidth: 114,
                          noPrivDisplayMode: 1,
                          appDEFieldId: 'start_overtime',
                          editor: {
                            editorType: 'NUMBER',
                            editorWidth: 80,
                            valueType: 'SIMPLE',
                            editable: true,
                            id: 'start_overtime',
                          },
                          allowEmpty: true,
                          caption: '下班后',
                          codeName: 'start_overtime',
                          detailStyle: 'DEFAULT',
                          detailType: 'FORMITEM',
                          layoutPos: {
                            shrink: 1,
                            layout: 'FLEX',
                          },
                          showCaption: true,
                          id: 'start_overtime',
                        },
                        {
                          rawItem: {
                            caption: '分钟开始计入加班',
                            halign: 'LEFT',
                            valign: 'MIDDLE',
                            wrapMode: 'NOWRAP',
                            contentType: 'RAW',
                            rawItemWidth: 150,
                            id: 'rawitem12',
                          },
                          codeName: 'rawitem12',
                          detailStyle: 'DEFAULT',
                          detailType: 'RAWITEM',
                          layoutPos: {
                            shrink: 1,
                            layout: 'FLEX',
                            width: 150,
                            widthMode: 'PX',
                          },
                          showCaption: true,
                          id: 'rawitem12',
                        },
                      ],
                      codeName: 'grouppanel12',
                      detailStyle: 'DEFAULT',
                      detailType: 'GROUPPANEL',
                      defdgroupLogics: [
                        {
                          logicCat: 'PANELVISIBLE',
                          relatedDetailNames: ['overtime_valid'],
                          groupOP: 'AND',
                          defdlogics: [
                            {
                              condOP: 'EQ',
                              defdname: 'overtime_valid',
                              value: '1',
                              logicType: 'SINGLE',
                              id: 'overtime_valid等于(=) 1',
                            },
                          ],
                          logicType: 'GROUP',
                        },
                      ],
                      layoutPos: {
                        colLGOffset: 2,
                        colMD: 24,
                        layout: 'TABLE_24COL',
                      },
                      id: 'grouppanel12',
                    },
                  ],
                  codeName: 'grouppanel6',
                  detailStyle: 'DEFAULT',
                  detailType: 'GROUPPANEL',
                  layoutPos: {
                    colMD: 24,
                    layout: 'TABLE_24COL',
                  },
                  id: 'grouppanel6',
                },
              ],
              capLanguageRes: {
                lanResTag: 'CONTROL.DEFORM.SHIFT.MAIN2.GROUPPANEL.GROUP1',
              },
              caption: '班次基本信息',
              codeName: 'group1',
              detailStyle: 'DEFAULT',
              detailType: 'GROUPPANEL',
              layoutPos: {
                colMD: 24,
                layout: 'TABLE_24COL',
              },
              id: 'group1',
            },
            {
              dataType: 25,
              enableCond: 3,
              labelPos: 'LEFT',
              labelWidth: 130,
              noPrivDisplayMode: 1,
              appDEFieldId: 'id',
              editor: {
                editorType: 'HIDDEN',
                valueType: 'SIMPLE',
                editable: true,
                id: 'id',
              },
              allowEmpty: true,
              hidden: true,
              capLanguageRes: {
                lanResTag: 'DEF.LNAME.SHIFT.ID',
              },
              caption: '主键',
              codeName: 'id',
              detailStyle: 'DEFAULT',
              detailType: 'FORMITEM',
              layoutPos: {
                colMD: 24,
                layout: 'TABLE_24COL',
              },
              id: 'id',
            },
          ],
          capLanguageRes: {
            lanResTag: 'CONTROL.DEFORM.SHIFT.MAIN2.FORMPAGE.FORMPAGE1',
          },
          caption: '基本信息',
          codeName: 'formpage1',
          detailStyle: 'DEFAULT',
          detailType: 'FORMPAGE',
          id: 'formpage1',
        },
      ],
      layout: {
        columnCount: 24,
        layout: 'TABLE_24COL',
      },
      tabHeaderPos: 'TOP',
      noTabHeader: true,
      autoLoad: true,
      showBusyIndicator: true,
      codeName: 'main3',
      controlType: 'FORM',
      logicName: '默认班次表单',
      appDataEntityId: 'attendanceapp.attendance_shift',
      controlLogics: [
        {
          eventNames: 'onChange',
          itemName: 'scopes',
          logicTag: 'form',
          logicType: 'SCRIPT',
          scriptCode:
            'console.log("重复器表单完全加载绘制完成");\r\n\r\n// 计算时间\r\nconst calctime = (index) => {\r\n    const mdctrl = ctrl.formMDCtrls.find(item => item.name === \'scopes\')\r\n    const mdData = mdctrl.repeaterMap.get(index.toString());\r\n    const form = mdData.data;\r\n    if (form) {\r\n        const {start_base_time, end_base_time} = form\r\n        const [start_hour, start_minute] = start_base_time.split(\':\');\r\n        const [end_hour, end_minute] = end_base_time.split(\':\');\r\n        // 开始小时\r\n        const tempStartHour = Number(start_hour);\r\n        // 开始分钟\r\n        const tempStartMinute = Number(start_minute);\r\n        // 结束小时\r\n        const tempEndHour = Number(end_hour);\r\n        // 结束分钟\r\n        const tempEndMinute = Number(end_minute);\r\n        return {\r\n            "start_hour": tempStartHour,\r\n            "start_minute": tempStartMinute,\r\n            "end_hour": tempEndHour,\r\n            "end_minute": tempEndMinute,\r\n            "start_base_time": start_base_time,\r\n            "end_base_time": end_base_time,\r\n        }\r\n    }\r\n    return {\r\n        "start_hour": 0,\r\n        "start_minute": 0,\r\n        "end_hour": 0,\r\n        "end_minute": 0,\r\n    }\r\n}\r\n\r\n// 计算禁用时间\r\nconst calcDisabledTime = (index, tag) => {\r\n    const times = [];\r\n    // tag为true时，表示小于index的时间禁用,否则，大于index的时间禁用\r\n    if (tag) {\r\n        for (let i = 0; i < index; i++) {\r\n            times.push(i)\r\n        }\r\n    } else {\r\n        for (let i = index; i < 59; i++) {\r\n            times.push(i)\r\n        }\r\n    }\r\n    return times;\r\n}\r\n\r\n// 重复器表单的第一个表单数据\r\nconst defaultTime = {\r\n    "start_hour": 0,\r\n    "start_minute": 0,\r\n    "end_hour": 0,\r\n    "end_minute": 0\r\n}\r\n\r\nconst time1 = calctime(0); // 第一次班次的开始结束时间\r\nconst {\r\n    start_hour: start_hour1,\r\n    start_minute: start_minute1,\r\n    end_hour: end_hour1,\r\n    end_minute: end_minute1,\r\n    start_base_time: start_base_time1,\r\n    end_base_time: end_base_time1\r\n} = time1;\r\n\r\nconst time2 = ctrl.data.working_number > 1 ? calctime(1) : defaultTime; // 第二次班次的开始结束时间\r\nconst {\r\n    start_hour: start_hour2,\r\n    start_minute: start_minute2,\r\n    end_hour: end_hour2,\r\n    end_minute: end_minute2,\r\n    start_base_time: start_base_time2,\r\n    end_base_time: end_base_time2\r\n} = time2;\r\n\r\nconst time3 = ctrl.data.working_number === 3 ? calctime(2) : defaultTime; // 第三次班次的开始结束时间\r\nconst {\r\n    start_hour: start_hour3,\r\n    start_minute: start_minute3,\r\n    end_hour: end_hour3,\r\n    end_minute: end_minute3,\r\n    start_base_time: start_base_time3,\r\n    end_base_time: end_base_time3\r\n} = time3;\r\n// 重复器表单的第一个表单数据\r\nconst mdctrl = ctrl.formMDCtrls.find(item => item.name === \'scopes\')\r\nconst form1 = mdctrl.repeaterMap.get("0").details;\r\n\r\n// 重复器表单的第二个表单数据\r\nconst form2 = ctrl.data.working_number > 1 ? mdctrl.repeaterMap.get("1").details : null ;\r\n\r\n// 重复器表单的第三个表单数据\r\nconst form3 =  ctrl.data.working_number > 2 ? mdctrl.repeaterMap.get("2").details : null ;\r\n\r\nif (ctrl.data.working_number > 1) {\r\n    if (form1) {\r\n        // 下班时间控制器\r\n        const endc = form1.end_base_time\r\n        const endEditor = endc.editor;\r\n        // 上班时间控制器\r\n        const startc = form1.start_base_time\r\n        const startEditor = startc.editor;\r\n        if (endEditor && startEditor) {\r\n            //对于上班时间1：当上班时间1>下班时间1时，[大于下班时间1]区间内禁选\r\n            if (start_base_time1 >= end_base_time1) {\r\n                const disabledHourTime = calcDisabledTime(end_minute1 == 0 ? end_hour1 : end_hour1 + 1, false);\r\n                const disabledMinuteTime = calcDisabledTime(end_minute1, false); // 结束时间需要禁用的分钟\r\n                startEditor.setDisabledHours(disabledHourTime);\r\n                startEditor.setDisabledMinutes(disabledMinuteTime);\r\n            }\r\n            //对于下班时间1：当上班时间2<下班时间1,[上班时间2~上班时间1]区间内禁选\r\n            if (start_base_time2 <= start_base_time1) {\r\n                const disabledRange =\r\n                    {\r\n                        "starthour": end_hour2,\r\n                        "startminute": end_minute2,\r\n                        "endhour": start_hour1,\r\n                        "endminute": start_minute1\r\n                    }\r\n                endEditor.setDisabledRange([disabledRange]);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nif (ctrl.data.working_number >= 2) {\r\n    if (form2) {\r\n        // 下班时间控制器\r\n        const endc = form2.end_base_time\r\n        const endEditor2 = endc.editor;\r\n        // 上班时间控制器\r\n        const startc = form2.start_base_time\r\n        const startEditor2 = startc.editor;\r\n        if (endEditor2 && startEditor2) {\r\n            // 对于上班时间2，上下班次数为2~3时\r\n            // 若下班时间2<下班时间1\r\n            if (end_base_time2 < end_base_time1) {\r\n                //[end_base_time2~end_base_time1]区间内禁选，获取禁选时间\r\n                const disabledRange =\r\n                    {\r\n                        "starthour": end_hour2,\r\n                        "startminute": end_minute2,\r\n                        "endhour": end_hour1,\r\n                        "endminute": end_minute1\r\n                    }\r\n                startEditor2.setDisabledRange([disabledRange]);\r\n            } else {\r\n                //若上班时间1>=下班时间1\r\n                if (start_base_time1 >= end_base_time1) {\r\n                    //[小于下班时间1 && 大于下班时间2]的时间禁选\r\n                    const disabledRange1 =\r\n                        {\r\n                            "starthour": 0,\r\n                            "startminute": 0,\r\n                            "endhour": end_hour1,\r\n                            "endminute": end_minute1\r\n                        }\r\n                    const disabledRange2 =\r\n                        {\r\n                            "starthour": end_hour2,\r\n                            "startminute": end_minute2,\r\n                            "endhour": 24,\r\n                            "endminute": 60\r\n                        }\r\n                    startEditor2.setDisabledRange([disabledRange1, disabledRange2])\r\n                }\r\n            }\r\n\r\n            //对于下班时间2，当上下班次数为2时\r\n            if (ctrl.data.working_number === 2) {\r\n                // 当上班时间2<下班时间1或上班时间1>下班时间1，[小于上班时间2]区间内禁选\r\n                if ((end_base_time1 > start_base_time1 && start_base_time2 <= end_base_time1) || start_base_time1 >= end_base_time1) {\r\n                    const disabledHourTime = calcDisabledTime(start_hour2, true); // 结束时间需要禁用的小时\r\n                    const disabledMinuteTime = calcDisabledTime(start_minute2, true); // 结束时间需要禁用的分钟\r\n                    endEditor2.setDisabledHours(disabledHourTime);\r\n                    endEditor2.setDisabledMinutes(disabledMinuteTime);\r\n                }\r\n            }\r\n\r\n            if (ctrl.data.working_number === 3) {\r\n                // 下班时间控制器\r\n                const endc3 = form3.end_base_time\r\n                const endEditor3 = endc3.editor;\r\n                // 上班时间控制器\r\n                const startc3 = form3.start_base_time\r\n                const startEditor3 = startc3.editor;\r\n                //对于下班时间2，当上下班次数为3时\r\n                if ((end_base_time1 > start_base_time1 && start_base_time2 <= end_base_time1) || start_base_time1 >= end_base_time1) {\r\n\r\n                    const disabledRange1 =\r\n                        {\r\n                            "starthour": 0,\r\n                            "startminute": 0,\r\n                            "endhour": start_hour2,\r\n                            "endminute": start_minute2\r\n                        }\r\n                    const disabledRange2 =\r\n                        {\r\n                            "starthour": start_hour3,\r\n                            "startminute": start_hour3,\r\n                            "endhour": 24,\r\n                            "endminute": 60\r\n                        }\r\n                    endEditor2.setDisabledRange([disabledRange1, disabledRange2])\r\n                }\r\n\r\n                // 对于上班时间3：当上班时间1>下班时间1 或 下班时间2<上班时间2时，[小于下班时间2&&大于下班时间3]区间内禁选\r\n                if (start_base_time1 >= end_base_time1 || end_base_time2 <= start_base_time2) {\r\n                    const disabledRange1 =\r\n                        {\r\n                            "starthour": 0,\r\n                            "startminute": 0,\r\n                            "endhour": end_hour2,\r\n                            "endminute": end_minute2\r\n                        }\r\n                    const disabledRange2 =\r\n                        {\r\n                            "starthour": end_hour3,\r\n                            "startminute": end_minute3,\r\n                            "endhour": 24,\r\n                            "endminute": 60\r\n                        }\r\n                    startEditor3.setDisabledRange([disabledRange1, disabledRange2])\r\n\r\n                }\r\n                // 对于下班时间3：当上班时间3属于跨天时，小于上班时间3的区间禁选\r\n                if (start_base_time1 >= end_base_time1 || end_base_time2 <= start_base_time2 || start_base_time3 <= end_base_time2) {\r\n                    const disabledHourTime = calcDisabledTime(start_hour3, true);\r\n                    const disabledMinuteTime = calcDisabledTime(start_minute3, true); // 结束时间需要禁用的分钟\r\n                    endEditor3.setDisabledHours(disabledHourTime);\r\n                    endEditor3.setDisabledMinutes(disabledMinuteTime);\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n',
          triggerType: 'CTRLEVENT',
          name: 'setTimeDisable',
          id: 'settimedisable',
        },
        {
          eventNames: 'onClick',
          logicTag: 'form',
          logicType: 'SCRIPT',
          scriptCode:
            'console.log("重复器表单完全加载绘制完成");\r\n\r\n// 计算时间\r\nconst calctime = (index) => {\r\n    const mdData = mdctrl.contentCtrlData[index];\r\n    const {srfkey} = mdData;\r\n    const formNeuron = mdctrl.formNeurons.get(srfkey);\r\n    if (formNeuron) {\r\n        const form = formNeuron.call.getThisController();\r\n        const {start_base_time, end_base_time} = form.data\r\n        const [start_hour, start_minute] = start_base_time.split(\':\');\r\n        const [end_hour, end_minute] = end_base_time.split(\':\');\r\n        // 开始小时\r\n        const tempStartHour = Number(start_hour);\r\n        // 开始分钟\r\n        const tempStartMinute = Number(start_minute);\r\n        // 结束小时\r\n        const tempEndHour = Number(end_hour);\r\n        // 结束分钟\r\n        const tempEndMinute = Number(end_minute);\r\n        return {\r\n            "start_hour": tempStartHour,\r\n            "start_minute": tempStartMinute,\r\n            "end_hour": tempEndHour,\r\n            "end_minute": tempEndMinute,\r\n            "start_base_time": start_base_time,\r\n            "end_base_time": end_base_time,\r\n        }\r\n    }\r\n    return {\r\n        "start_hour": 0,\r\n        "start_minute": 0,\r\n        "end_hour": 0,\r\n        "end_minute": 0,\r\n    }\r\n}\r\n\r\n// 计算禁用时间\r\nconst calcDisabledTime = (index, tag) => {\r\n    const times = [];\r\n    // tag为true时，表示小于index的时间禁用,否则，大于index的时间禁用\r\n    if (tag) {\r\n        for (let i = 0; i < index; i++) {\r\n            times.push(i)\r\n        }\r\n    } else {\r\n        for (let i = index; i < 59; i++) {\r\n            times.push(i)\r\n        }\r\n    }\r\n    return times;\r\n}\r\n\r\n// 重复器表单的第一个表单数据\r\nconst defaultTime = {\r\n    "start_hour": 0,\r\n    "start_minute": 0,\r\n    "end_hour": 0,\r\n    "end_minute": 0\r\n}\r\n\r\nconst time1 = calctime(0); // 第一次班次的开始结束时间\r\nconst {\r\n    start_hour: start_hour1,\r\n    start_minute: start_minute1,\r\n    end_hour: end_hour1,\r\n    end_minute: end_minute1,\r\n    start_base_time: start_base_time1,\r\n    end_base_time: end_base_time1\r\n} = time1;\r\n\r\nconst time2 = ctrl.data.working_number > 1 ? calctime(1) : defaultTime; // 第二次班次的开始结束时间\r\nconst {\r\n    start_hour: start_hour2,\r\n    start_minute: start_minute2,\r\n    end_hour: end_hour2,\r\n    end_minute: end_minute2,\r\n    start_base_time: start_base_time2,\r\n    end_base_time: end_base_time2\r\n} = time2;\r\n\r\nconst time3 = ctrl.data.working_number === 3 ? calctime(2) : defaultTime; // 第三次班次的开始结束时间\r\nconst {\r\n    start_hour: start_hour3,\r\n    start_minute: start_minute3,\r\n    end_hour: end_hour3,\r\n    end_minute: end_minute3,\r\n    start_base_time: start_base_time3,\r\n    end_base_time: end_base_time3\r\n} = time3;\r\n// 重复器表单的第一个表单数据\r\nconst mdData1 = mdctrl.contentCtrlData[0];\r\nconst srfkey1 = mdData1?.srfkey;\r\nconst formNeuron1 = srfkey1 ? mdctrl.formNeurons.get(srfkey1) : null;\r\n\r\n// 重复器表单的第二个表单数据\r\nconst mdData2 = ctrl.data.working_number > 1 ? mdctrl.contentCtrlData[1] : null;\r\nconst srfkey2 = mdData2?.srfkey;\r\nconst formNeuron2 = srfkey2 ? mdctrl.formNeurons.get(srfkey2) : null;\r\n\r\n// 重复器表单的第二个表单数据\r\nconst mdData3 = ctrl.data.working_number === 3 ? mdctrl.contentCtrlData[2] : null;\r\nconst srfkey3 = mdData3?.srfkey;\r\nconst formNeuron3 = srfkey3 ? mdctrl.formNeurons.get(srfkey3) : null;\r\n\r\nif (ctrl.data.working_number > 1) {\r\n    if (formNeuron1) {\r\n        const form = formNeuron1.call.getThisController();\r\n        // 下班时间控制器\r\n        const endc = form.details.end_base_time\r\n        const endEditor = endc.editor;\r\n        // 上班时间控制器\r\n        const startc = form.details.start_base_time\r\n        const startEditor = startc.editor;\r\n        if (endEditor && startEditor) {\r\n            //对于上班时间1：当上班时间1>下班时间1时，[大于下班时间1]区间内禁选\r\n            if (start_base_time1 >= end_base_time1) {\r\n                const disabledHourTime = calcDisabledTime(end_minute1 == 0 ? end_hour1 : end_hour1 + 1, false);\r\n                const disabledMinuteTime = calcDisabledTime(end_minute1, false); // 结束时间需要禁用的分钟\r\n                startEditor.setDisabledHours(disabledHourTime);\r\n                startEditor.setDisabledMinutes(disabledMinuteTime);\r\n            }\r\n            //对于下班时间1：当上班时间2<下班时间1,[上班时间2~上班时间1]区间内禁选\r\n            if (start_base_time2 <= start_base_time1) {\r\n                const disabledRange =\r\n                    {\r\n                        "starthour": end_hour2,\r\n                        "startminute": end_minute2,\r\n                        "endhour": start_hour1,\r\n                        "endminute": start_minute1\r\n                    }\r\n                endEditor.setDisabledRange([disabledRange]);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nif (ctrl.data.working_number >= 2) {\r\n    if (formNeuron2) {\r\n        const form = formNeuron2.call.getThisController();\r\n        // 下班时间控制器\r\n        const endc = form.details.end_base_time\r\n        const endEditor2 = endc.editor;\r\n        // 上班时间控制器\r\n        const startc = form.details.start_base_time\r\n        const startEditor2 = startc.editor;\r\n        if (endEditor2 && startEditor2) {\r\n            // 对于上班时间2，上下班次数为2~3时\r\n            // 若下班时间2<下班时间1\r\n            if (end_base_time2 < end_base_time1) {\r\n                //[end_base_time2~end_base_time1]区间内禁选，获取禁选时间\r\n                const disabledRange =\r\n                    {\r\n                        "starthour": end_hour2,\r\n                        "startminute": end_minute2,\r\n                        "endhour": end_hour1,\r\n                        "endminute": end_minute1\r\n                    }\r\n                startEditor2.setDisabledRange([disabledRange]);\r\n            } else {\r\n                //若上班时间1>=下班时间1\r\n                if (start_base_time1 >= end_base_time1) {\r\n                    //[小于下班时间1 && 大于下班时间2]的时间禁选\r\n                    const disabledRange1 =\r\n                        {\r\n                            "starthour": 0,\r\n                            "startminute": 0,\r\n                            "endhour": end_hour1,\r\n                            "endminute": end_minute1\r\n                        }\r\n                    const disabledRange2 =\r\n                        {\r\n                            "starthour": end_hour2,\r\n                            "startminute": end_minute2,\r\n                            "endhour": 24,\r\n                            "endminute": 60\r\n                        }\r\n                    startEditor2.setDisabledRange([disabledRange1, disabledRange2])\r\n                }\r\n            }\r\n\r\n            //对于下班时间2，当上下班次数为2时\r\n            if (ctrl.data.working_number === 2) {\r\n                // 当上班时间2<下班时间1或上班时间1>下班时间1，[小于上班时间2]区间内禁选\r\n                if ((end_base_time1 > start_base_time1 && start_base_time2 <= end_base_time1) || start_base_time1 >= end_base_time1) {\r\n                    const disabledHourTime = calcDisabledTime(start_hour2, true); // 结束时间需要禁用的小时\r\n                    const disabledMinuteTime = calcDisabledTime(start_minute2, true); // 结束时间需要禁用的分钟\r\n                    endEditor2.setDisabledHours(disabledHourTime);\r\n                    endEditor2.setDisabledMinutes(disabledMinuteTime);\r\n                }\r\n            }\r\n\r\n            if (ctrl.data.working_number === 3) {\r\n                const form3 = formNeuron3.call.getThisController();\r\n                // 下班时间控制器\r\n                const endc3 = form3.details.end_base_time\r\n                const endEditor3 = endc3.editor;\r\n                // 上班时间控制器\r\n                const startc3 = form3.details.start_base_time\r\n                const startEditor3 = startc3.editor;\r\n                //对于下班时间2，当上下班次数为3时\r\n                if ((end_base_time1 > start_base_time1 && start_base_time2 <= end_base_time1) || start_base_time1 >= end_base_time1) {\r\n\r\n                    const disabledRange1 =\r\n                        {\r\n                            "starthour": 0,\r\n                            "startminute": 0,\r\n                            "endhour": start_hour2,\r\n                            "endminute": start_minute2\r\n                        }\r\n                    const disabledRange2 =\r\n                        {\r\n                            "starthour": start_hour3,\r\n                            "startminute": start_hour3,\r\n                            "endhour": 24,\r\n                            "endminute": 60\r\n                        }\r\n                    endEditor2.setDisabledRange([disabledRange1, disabledRange2])\r\n                }\r\n\r\n                // 对于上班时间3：当上班时间1>下班时间1 或 下班时间2<上班时间2时，[小于下班时间2&&大于下班时间3]区间内禁选\r\n                if (start_base_time1 >= end_base_time1 || end_base_time2 <= start_base_time2) {\r\n                    const disabledRange1 =\r\n                        {\r\n                            "starthour": 0,\r\n                            "startminute": 0,\r\n                            "endhour": end_hour2,\r\n                            "endminute": end_minute2\r\n                        }\r\n                    const disabledRange2 =\r\n                        {\r\n                            "starthour": end_hour3,\r\n                            "startminute": end_minute3,\r\n                            "endhour": 24,\r\n                            "endminute": 60\r\n                        }\r\n                    startEditor3.setDisabledRange([disabledRange1, disabledRange2])\r\n\r\n                }\r\n                // 对于下班时间3：当上班时间3属于跨天时，小于上班时间3的区间禁选\r\n                if (start_base_time1 >= end_base_time1 || end_base_time2 <= start_base_time2 || start_base_time3 <= end_base_time2) {\r\n                    const disabledHourTime = calcDisabledTime(start_hour3, true);\r\n                    const disabledMinuteTime = calcDisabledTime(start_minute3, true); // 结束时间需要禁用的分钟\r\n                    endEditor3.setDisabledHours(disabledHourTime);\r\n                    endEditor3.setDisabledMinutes(disabledMinuteTime);\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n',
          triggerType: 'CUSTOM',
          id: 'repeaterload',
        },
      ],
      controlParam: {
        id: 'form',
      },
      width: 800,
      modelId: '9432995762f13c3d74f7e3dde6ecf134',
      modelType: 'PSDEFORM_EDITFORM',
      name: 'form',
      id: 'attendanceapp.attendance_shift.main3',
    },
    {
      codeName: 'default_shift_view_datainfobar',
      controlType: 'DATAINFOBAR',
      appDataEntityId: 'attendanceapp.attendance_shift',
      controlParam: {
        id: 'datainfobar',
      },
      name: 'datainfobar',
      id: 'default_shift_view_datainfobar',
    },
    {
      caption: '上下班时间',
      codeName: 'default_shift_view_captionbar',
      controlType: 'CAPTIONBAR',
      appDataEntityId: 'attendanceapp.attendance_shift',
      controlParam: {},
      name: 'captionbar',
      id: 'default_shift_view_captionbar',
    },
  ],
  sysCss: {
    cssName: 'banci-view',
  },
  viewLayoutPanel: {
    layoutBodyOnly: true,
    useDefaultLayout: true,
    layoutPanel: true,
    codeName: 'layoutpanel',
    controlStyle: 'APPDEOPTVIEW',
    controlType: 'VIEWLAYOUTPANEL',
    appDataEntityId: 'attendanceapp.attendance_shift',
    controlParam: {},
    id: 'layoutpanel',
  },
  title: '默认班次选项操作视图',
  titleLanguageRes: {
    lanResTag: 'PAGE.TITLE.SHIFT.QUICKCREATEVIEW',
  },
  viewStyle: 'DEFAULT',
  viewType: 'DEOPTVIEW',
  width: 850,
  enableDP: true,
  showCaptionBar: true,
  modelId: '1fb7b88fea849e68a82e91493fcdc6b2',
  modelType: 'PSAPPDEVIEW',
  name: 'attendance_shiftDefaultShiftView',
  id: 'attendanceapp.attendance_shift_default_shift_view',
};
